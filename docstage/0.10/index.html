

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>petl - Extract, Transform and Load (Tables of Data) &mdash; petl v0.10 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.10',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="petl v0.10 documentation" href="#" />
    <link rel="next" title="petl.fluent - Alternative notation for combining transformations" href="fluent.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="fluent.html" title="petl.fluent - Alternative notation for combining transformations"
             accesskey="N">next</a> |</li>
        <li><a href="#">petl v0.10 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <span class="target" id="module-petl"></span><div class="section" id="petl-extract-transform-and-load-tables-of-data">
<h1>petl - Extract, Transform and Load (Tables of Data)<a class="headerlink" href="#petl-extract-transform-and-load-tables-of-data" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="#module-petl" title="petl"><tt class="xref py py-mod docutils literal"><span class="pre">petl</span></tt></a> is a tentative Python package for extracting, transforming
and loading tables of data.</p>
<ul class="simple">
<li>Documentation: <a class="reference external" href="http://packages.python.org/petl">http://packages.python.org/petl</a></li>
<li>Source Code: <a class="reference external" href="https://github.com/alimanfoo/petl">https://github.com/alimanfoo/petl</a></li>
<li>Download: <a class="reference external" href="http://pypi.python.org/pypi/petl">http://pypi.python.org/pypi/petl</a></li>
<li>Mailing List: <a class="reference external" href="http://groups.google.com/group/python-etl">http://groups.google.com/group/python-etl</a></li>
</ul>
<p>For examples of <a class="reference internal" href="#module-petl" title="petl"><tt class="xref py py-mod docutils literal"><span class="pre">petl</span></tt></a> in use, see the case studies below:</p>
<ul class="simple">
<li><a class="reference external" href="case_study_1.html">Case Study 1 - Comparing Tables</a></li>
</ul>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The tables below gives an overview of the main functions in the
<a class="reference internal" href="#module-petl" title="petl"><tt class="xref py py-mod docutils literal"><span class="pre">petl</span></tt></a> module.</p>
<p>See also the alphabetic <a class="reference internal" href="genindex.html"><em>Index</em></a> of all functions in the package.</p>
<p>Functions for extracting tables from files and databases:</p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="31%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"></th>
<th class="head">Extract</th>
<th class="head"></th>
</tr>
</thead>
<tbody valign="top">
<tr><td><a class="reference internal" href="#petl.fromcsv" title="petl.fromcsv"><tt class="xref py py-func docutils literal"><span class="pre">fromcsv()</span></tt></a></td>
<td><a class="reference internal" href="#petl.fromtsv" title="petl.fromtsv"><tt class="xref py py-func docutils literal"><span class="pre">fromtsv()</span></tt></a></td>
<td><a class="reference internal" href="#petl.frompickle" title="petl.frompickle"><tt class="xref py py-func docutils literal"><span class="pre">frompickle()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.fromsqlite3" title="petl.fromsqlite3"><tt class="xref py py-func docutils literal"><span class="pre">fromsqlite3()</span></tt></a></td>
<td><a class="reference internal" href="#petl.fromdb" title="petl.fromdb"><tt class="xref py py-func docutils literal"><span class="pre">fromdb()</span></tt></a></td>
<td><a class="reference internal" href="#petl.fromtext" title="petl.fromtext"><tt class="xref py py-func docutils literal"><span class="pre">fromtext()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.fromxml" title="petl.fromxml"><tt class="xref py py-func docutils literal"><span class="pre">fromxml()</span></tt></a></td>
<td><a class="reference internal" href="#petl.fromjson" title="petl.fromjson"><tt class="xref py py-func docutils literal"><span class="pre">fromjson()</span></tt></a></td>
<td><a class="reference internal" href="#petl.fromdicts" title="petl.fromdicts"><tt class="xref py py-func docutils literal"><span class="pre">fromdicts()</span></tt></a></td>
</tr>
</tbody>
</table>
<p>Functions for transforming tables:</p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="32%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"></th>
<th class="head">Transform</th>
<th class="head"></th>
</tr>
</thead>
<tbody valign="top">
<tr><td><a class="reference internal" href="#petl.rename" title="petl.rename"><tt class="xref py py-func docutils literal"><span class="pre">rename()</span></tt></a></td>
<td><a class="reference internal" href="#petl.setheader" title="petl.setheader"><tt class="xref py py-func docutils literal"><span class="pre">setheader()</span></tt></a></td>
<td><a class="reference internal" href="#petl.extendheader" title="petl.extendheader"><tt class="xref py py-func docutils literal"><span class="pre">extendheader()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.pushheader" title="petl.pushheader"><tt class="xref py py-func docutils literal"><span class="pre">pushheader()</span></tt></a></td>
<td><a class="reference internal" href="#petl.skip" title="petl.skip"><tt class="xref py py-func docutils literal"><span class="pre">skip()</span></tt></a></td>
<td><a class="reference internal" href="#petl.skipcomments" title="petl.skipcomments"><tt class="xref py py-func docutils literal"><span class="pre">skipcomments()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.rowslice" title="petl.rowslice"><tt class="xref py py-func docutils literal"><span class="pre">rowslice()</span></tt></a></td>
<td><a class="reference internal" href="#petl.head" title="petl.head"><tt class="xref py py-func docutils literal"><span class="pre">head()</span></tt></a></td>
<td><a class="reference internal" href="#petl.tail" title="petl.tail"><tt class="xref py py-func docutils literal"><span class="pre">tail()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.cut" title="petl.cut"><tt class="xref py py-func docutils literal"><span class="pre">cut()</span></tt></a></td>
<td><a class="reference internal" href="#petl.cutout" title="petl.cutout"><tt class="xref py py-func docutils literal"><span class="pre">cutout()</span></tt></a></td>
<td><a class="reference internal" href="#petl.select" title="petl.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.selectop" title="petl.selectop"><tt class="xref py py-func docutils literal"><span class="pre">selectop()</span></tt></a></td>
<td><a class="reference internal" href="#petl.selecteq" title="petl.selecteq"><tt class="xref py py-func docutils literal"><span class="pre">selecteq()</span></tt></a></td>
<td><a class="reference internal" href="#petl.selectne" title="petl.selectne"><tt class="xref py py-func docutils literal"><span class="pre">selectne()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.selectlt" title="petl.selectlt"><tt class="xref py py-func docutils literal"><span class="pre">selectlt()</span></tt></a></td>
<td><a class="reference internal" href="#petl.selectle" title="petl.selectle"><tt class="xref py py-func docutils literal"><span class="pre">selectle()</span></tt></a></td>
<td><a class="reference internal" href="#petl.selectgt" title="petl.selectgt"><tt class="xref py py-func docutils literal"><span class="pre">selectgt()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.selectge" title="petl.selectge"><tt class="xref py py-func docutils literal"><span class="pre">selectge()</span></tt></a></td>
<td><a class="reference internal" href="#petl.selectrangeopen" title="petl.selectrangeopen"><tt class="xref py py-func docutils literal"><span class="pre">selectrangeopen()</span></tt></a></td>
<td><a class="reference internal" href="#petl.selectrangeopenleft" title="petl.selectrangeopenleft"><tt class="xref py py-func docutils literal"><span class="pre">selectrangeopenleft()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.selectrangeopenright" title="petl.selectrangeopenright"><tt class="xref py py-func docutils literal"><span class="pre">selectrangeopenright()</span></tt></a></td>
<td><a class="reference internal" href="#petl.selectrangeclosed" title="petl.selectrangeclosed"><tt class="xref py py-func docutils literal"><span class="pre">selectrangeclosed()</span></tt></a></td>
<td><a class="reference internal" href="#petl.selectin" title="petl.selectin"><tt class="xref py py-func docutils literal"><span class="pre">selectin()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.selectnotin" title="petl.selectnotin"><tt class="xref py py-func docutils literal"><span class="pre">selectnotin()</span></tt></a></td>
<td><a class="reference internal" href="#petl.selectis" title="petl.selectis"><tt class="xref py py-func docutils literal"><span class="pre">selectis()</span></tt></a></td>
<td><a class="reference internal" href="#petl.selectisnot" title="petl.selectisnot"><tt class="xref py py-func docutils literal"><span class="pre">selectisnot()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.selectisinstance" title="petl.selectisinstance"><tt class="xref py py-func docutils literal"><span class="pre">selectisinstance()</span></tt></a></td>
<td><a class="reference internal" href="#petl.selectre" title="petl.selectre"><tt class="xref py py-func docutils literal"><span class="pre">selectre()</span></tt></a></td>
<td><a class="reference internal" href="#petl.rowselect" title="petl.rowselect"><tt class="xref py py-func docutils literal"><span class="pre">rowselect()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.recordselect" title="petl.recordselect"><tt class="xref py py-func docutils literal"><span class="pre">recordselect()</span></tt></a></td>
<td><a class="reference internal" href="#petl.rowlenselect" title="petl.rowlenselect"><tt class="xref py py-func docutils literal"><span class="pre">rowlenselect()</span></tt></a></td>
<td><a class="reference internal" href="#petl.fieldselect" title="petl.fieldselect"><tt class="xref py py-func docutils literal"><span class="pre">fieldselect()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.facet" title="petl.facet"><tt class="xref py py-func docutils literal"><span class="pre">facet()</span></tt></a></td>
<td><a class="reference internal" href="#petl.rangefacet" title="petl.rangefacet"><tt class="xref py py-func docutils literal"><span class="pre">rangefacet()</span></tt></a></td>
<td><a class="reference internal" href="#petl.replace" title="petl.replace"><tt class="xref py py-func docutils literal"><span class="pre">replace()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.replaceall" title="petl.replaceall"><tt class="xref py py-func docutils literal"><span class="pre">replaceall()</span></tt></a></td>
<td><a class="reference internal" href="#petl.convert" title="petl.convert"><tt class="xref py py-func docutils literal"><span class="pre">convert()</span></tt></a></td>
<td><a class="reference internal" href="#petl.convertall" title="petl.convertall"><tt class="xref py py-func docutils literal"><span class="pre">convertall()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.fieldconvert" title="petl.fieldconvert"><tt class="xref py py-func docutils literal"><span class="pre">fieldconvert()</span></tt></a></td>
<td><a class="reference internal" href="#petl.convertnumbers" title="petl.convertnumbers"><tt class="xref py py-func docutils literal"><span class="pre">convertnumbers()</span></tt></a></td>
<td><a class="reference internal" href="#petl.sub" title="petl.sub"><tt class="xref py py-func docutils literal"><span class="pre">sub()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.addfield" title="petl.addfield"><tt class="xref py py-func docutils literal"><span class="pre">addfield()</span></tt></a></td>
<td><a class="reference internal" href="#petl.capture" title="petl.capture"><tt class="xref py py-func docutils literal"><span class="pre">capture()</span></tt></a></td>
<td><a class="reference internal" href="#petl.split" title="petl.split"><tt class="xref py py-func docutils literal"><span class="pre">split()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.unpack" title="petl.unpack"><tt class="xref py py-func docutils literal"><span class="pre">unpack()</span></tt></a></td>
<td><a class="reference internal" href="#petl.fieldmap" title="petl.fieldmap"><tt class="xref py py-func docutils literal"><span class="pre">fieldmap()</span></tt></a></td>
<td><a class="reference internal" href="#petl.rowmap" title="petl.rowmap"><tt class="xref py py-func docutils literal"><span class="pre">rowmap()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.recordmap" title="petl.recordmap"><tt class="xref py py-func docutils literal"><span class="pre">recordmap()</span></tt></a></td>
<td><a class="reference internal" href="#petl.rowmapmany" title="petl.rowmapmany"><tt class="xref py py-func docutils literal"><span class="pre">rowmapmany()</span></tt></a></td>
<td><a class="reference internal" href="#petl.recordmapmany" title="petl.recordmapmany"><tt class="xref py py-func docutils literal"><span class="pre">recordmapmany()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.cat" title="petl.cat"><tt class="xref py py-func docutils literal"><span class="pre">cat()</span></tt></a></td>
<td><a class="reference internal" href="#petl.duplicates" title="petl.duplicates"><tt class="xref py py-func docutils literal"><span class="pre">duplicates()</span></tt></a></td>
<td><a class="reference internal" href="#petl.conflicts" title="petl.conflicts"><tt class="xref py py-func docutils literal"><span class="pre">conflicts()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a></td>
<td><a class="reference internal" href="#petl.join" title="petl.join"><tt class="xref py py-func docutils literal"><span class="pre">join()</span></tt></a></td>
<td><a class="reference internal" href="#petl.leftjoin" title="petl.leftjoin"><tt class="xref py py-func docutils literal"><span class="pre">leftjoin()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.rightjoin" title="petl.rightjoin"><tt class="xref py py-func docutils literal"><span class="pre">rightjoin()</span></tt></a></td>
<td><a class="reference internal" href="#petl.outerjoin" title="petl.outerjoin"><tt class="xref py py-func docutils literal"><span class="pre">outerjoin()</span></tt></a></td>
<td><a class="reference internal" href="#petl.crossjoin" title="petl.crossjoin"><tt class="xref py py-func docutils literal"><span class="pre">crossjoin()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.antijoin" title="petl.antijoin"><tt class="xref py py-func docutils literal"><span class="pre">antijoin()</span></tt></a></td>
<td><a class="reference internal" href="#petl.complement" title="petl.complement"><tt class="xref py py-func docutils literal"><span class="pre">complement()</span></tt></a></td>
<td><a class="reference internal" href="#petl.diff" title="petl.diff"><tt class="xref py py-func docutils literal"><span class="pre">diff()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.recordcomplement" title="petl.recordcomplement"><tt class="xref py py-func docutils literal"><span class="pre">recordcomplement()</span></tt></a></td>
<td><a class="reference internal" href="#petl.recorddiff" title="petl.recorddiff"><tt class="xref py py-func docutils literal"><span class="pre">recorddiff()</span></tt></a></td>
<td><a class="reference internal" href="#petl.intersection" title="petl.intersection"><tt class="xref py py-func docutils literal"><span class="pre">intersection()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.aggregate" title="petl.aggregate"><tt class="xref py py-func docutils literal"><span class="pre">aggregate()</span></tt></a></td>
<td><a class="reference internal" href="#petl.rangeaggregate" title="petl.rangeaggregate"><tt class="xref py py-func docutils literal"><span class="pre">rangeaggregate()</span></tt></a></td>
<td><a class="reference internal" href="#petl.rangecounts" title="petl.rangecounts"><tt class="xref py py-func docutils literal"><span class="pre">rangecounts()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.rowreduce" title="petl.rowreduce"><tt class="xref py py-func docutils literal"><span class="pre">rowreduce()</span></tt></a></td>
<td><a class="reference internal" href="#petl.recordreduce" title="petl.recordreduce"><tt class="xref py py-func docutils literal"><span class="pre">recordreduce()</span></tt></a></td>
<td><a class="reference internal" href="#petl.rangerowreduce" title="petl.rangerowreduce"><tt class="xref py py-func docutils literal"><span class="pre">rangerowreduce()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.rangerecordreduce" title="petl.rangerecordreduce"><tt class="xref py py-func docutils literal"><span class="pre">rangerecordreduce()</span></tt></a></td>
<td><a class="reference internal" href="#petl.mergeduplicates" title="petl.mergeduplicates"><tt class="xref py py-func docutils literal"><span class="pre">mergeduplicates()</span></tt></a></td>
<td><a class="reference internal" href="#petl.mergesort" title="petl.mergesort"><tt class="xref py py-func docutils literal"><span class="pre">mergesort()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.merge" title="petl.merge"><tt class="xref py py-func docutils literal"><span class="pre">merge()</span></tt></a></td>
<td><a class="reference internal" href="#petl.melt" title="petl.melt"><tt class="xref py py-func docutils literal"><span class="pre">melt()</span></tt></a></td>
<td><a class="reference internal" href="#petl.recast" title="petl.recast"><tt class="xref py py-func docutils literal"><span class="pre">recast()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.transpose" title="petl.transpose"><tt class="xref py py-func docutils literal"><span class="pre">transpose()</span></tt></a></td>
<td><a class="reference internal" href="#petl.pivot" title="petl.pivot"><tt class="xref py py-func docutils literal"><span class="pre">pivot()</span></tt></a></td>
<td><a class="reference internal" href="#petl.hashjoin" title="petl.hashjoin"><tt class="xref py py-func docutils literal"><span class="pre">hashjoin()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.hashleftjoin" title="petl.hashleftjoin"><tt class="xref py py-func docutils literal"><span class="pre">hashleftjoin()</span></tt></a></td>
<td><a class="reference internal" href="#petl.hashrightjoin" title="petl.hashrightjoin"><tt class="xref py py-func docutils literal"><span class="pre">hashrightjoin()</span></tt></a></td>
<td><a class="reference internal" href="#petl.hashantijoin" title="petl.hashantijoin"><tt class="xref py py-func docutils literal"><span class="pre">hashantijoin()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.hashcomplement" title="petl.hashcomplement"><tt class="xref py py-func docutils literal"><span class="pre">hashcomplement()</span></tt></a></td>
<td><a class="reference internal" href="#petl.hashintersection" title="petl.hashintersection"><tt class="xref py py-func docutils literal"><span class="pre">hashintersection()</span></tt></a></td>
<td><a class="reference internal" href="#petl.flatten" title="petl.flatten"><tt class="xref py py-func docutils literal"><span class="pre">flatten()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.unflatten" title="petl.unflatten"><tt class="xref py py-func docutils literal"><span class="pre">unflatten()</span></tt></a></td>
<td><a class="reference internal" href="#petl.annex" title="petl.annex"><tt class="xref py py-func docutils literal"><span class="pre">annex()</span></tt></a></td>
<td><a class="reference internal" href="#petl.unpackdict" title="petl.unpackdict"><tt class="xref py py-func docutils literal"><span class="pre">unpackdict()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.unique" title="petl.unique"><tt class="xref py py-func docutils literal"><span class="pre">unique()</span></tt></a></td>
<td><a class="reference internal" href="#petl.fold" title="petl.fold"><tt class="xref py py-func docutils literal"><span class="pre">fold()</span></tt></a></td>
<td><a class="reference internal" href="#petl.addrownumbers" title="petl.addrownumbers"><tt class="xref py py-func docutils literal"><span class="pre">addrownumbers()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.selectcontains" title="petl.selectcontains"><tt class="xref py py-func docutils literal"><span class="pre">selectcontains()</span></tt></a></td>
<td><a class="reference internal" href="#petl.search" title="petl.search"><tt class="xref py py-func docutils literal"><span class="pre">search()</span></tt></a></td>
<td><a class="reference internal" href="#petl.addcolumn" title="petl.addcolumn"><tt class="xref py py-func docutils literal"><span class="pre">addcolumn()</span></tt></a></td>
</tr>
</tbody>
</table>
<p>Functions for loading (writing) data to files and databases:</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="36%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"></th>
<th class="head">Load</th>
<th class="head"></th>
</tr>
</thead>
<tbody valign="top">
<tr><td><a class="reference internal" href="#petl.tocsv" title="petl.tocsv"><tt class="xref py py-func docutils literal"><span class="pre">tocsv()</span></tt></a></td>
<td><a class="reference internal" href="#petl.appendcsv" title="petl.appendcsv"><tt class="xref py py-func docutils literal"><span class="pre">appendcsv()</span></tt></a></td>
<td><a class="reference internal" href="#petl.totsv" title="petl.totsv"><tt class="xref py py-func docutils literal"><span class="pre">totsv()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.appendtsv" title="petl.appendtsv"><tt class="xref py py-func docutils literal"><span class="pre">appendtsv()</span></tt></a></td>
<td><a class="reference internal" href="#petl.topickle" title="petl.topickle"><tt class="xref py py-func docutils literal"><span class="pre">topickle()</span></tt></a></td>
<td><a class="reference internal" href="#petl.appendpickle" title="petl.appendpickle"><tt class="xref py py-func docutils literal"><span class="pre">appendpickle()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.tosqlite3" title="petl.tosqlite3"><tt class="xref py py-func docutils literal"><span class="pre">tosqlite3()</span></tt></a></td>
<td><a class="reference internal" href="#petl.appendsqlite3" title="petl.appendsqlite3"><tt class="xref py py-func docutils literal"><span class="pre">appendsqlite3()</span></tt></a></td>
<td><a class="reference internal" href="#petl.todb" title="petl.todb"><tt class="xref py py-func docutils literal"><span class="pre">todb()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.appenddb" title="petl.appenddb"><tt class="xref py py-func docutils literal"><span class="pre">appenddb()</span></tt></a></td>
<td><a class="reference internal" href="#petl.totext" title="petl.totext"><tt class="xref py py-func docutils literal"><span class="pre">totext()</span></tt></a></td>
<td><a class="reference internal" href="#petl.appendtext" title="petl.appendtext"><tt class="xref py py-func docutils literal"><span class="pre">appendtext()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.tojson" title="petl.tojson"><tt class="xref py py-func docutils literal"><span class="pre">tojson()</span></tt></a></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Other utility functions:</p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="35%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"></th>
<th class="head">Utilities</th>
<th class="head"></th>
</tr>
</thead>
<tbody valign="top">
<tr><td><a class="reference internal" href="#petl.header" title="petl.header"><tt class="xref py py-func docutils literal"><span class="pre">header()</span></tt></a></td>
<td><a class="reference internal" href="#petl.data" title="petl.data"><tt class="xref py py-func docutils literal"><span class="pre">data()</span></tt></a></td>
<td><a class="reference internal" href="#petl.dataslice" title="petl.dataslice"><tt class="xref py py-func docutils literal"><span class="pre">dataslice()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.records" title="petl.records"><tt class="xref py py-func docutils literal"><span class="pre">records()</span></tt></a></td>
<td><a class="reference internal" href="#petl.fieldnames" title="petl.fieldnames"><tt class="xref py py-func docutils literal"><span class="pre">fieldnames()</span></tt></a></td>
<td><a class="reference internal" href="#petl.rowcount" title="petl.rowcount"><tt class="xref py py-func docutils literal"><span class="pre">rowcount()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.look" title="petl.look"><tt class="xref py py-func docutils literal"><span class="pre">look()</span></tt></a></td>
<td><a class="reference internal" href="#petl.lookall" title="petl.lookall"><tt class="xref py py-func docutils literal"><span class="pre">lookall()</span></tt></a></td>
<td><a class="reference internal" href="#petl.see" title="petl.see"><tt class="xref py py-func docutils literal"><span class="pre">see()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.itervalues" title="petl.itervalues"><tt class="xref py py-func docutils literal"><span class="pre">itervalues()</span></tt></a></td>
<td><a class="reference internal" href="#petl.values" title="petl.values"><tt class="xref py py-func docutils literal"><span class="pre">values()</span></tt></a></td>
<td><a class="reference internal" href="#petl.valueset" title="petl.valueset"><tt class="xref py py-func docutils literal"><span class="pre">valueset()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.valuecount" title="petl.valuecount"><tt class="xref py py-func docutils literal"><span class="pre">valuecount()</span></tt></a></td>
<td><a class="reference internal" href="#petl.valuecounts" title="petl.valuecounts"><tt class="xref py py-func docutils literal"><span class="pre">valuecounts()</span></tt></a></td>
<td><a class="reference internal" href="#petl.valuecounter" title="petl.valuecounter"><tt class="xref py py-func docutils literal"><span class="pre">valuecounter()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.columns" title="petl.columns"><tt class="xref py py-func docutils literal"><span class="pre">columns()</span></tt></a></td>
<td><a class="reference internal" href="#petl.facetcolumns" title="petl.facetcolumns"><tt class="xref py py-func docutils literal"><span class="pre">facetcolumns()</span></tt></a></td>
<td><a class="reference internal" href="#petl.isunique" title="petl.isunique"><tt class="xref py py-func docutils literal"><span class="pre">isunique()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.limits" title="petl.limits"><tt class="xref py py-func docutils literal"><span class="pre">limits()</span></tt></a></td>
<td><a class="reference internal" href="#petl.stats" title="petl.stats"><tt class="xref py py-func docutils literal"><span class="pre">stats()</span></tt></a></td>
<td><a class="reference internal" href="#petl.lenstats" title="petl.lenstats"><tt class="xref py py-func docutils literal"><span class="pre">lenstats()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.stringpatterns" title="petl.stringpatterns"><tt class="xref py py-func docutils literal"><span class="pre">stringpatterns()</span></tt></a></td>
<td><a class="reference internal" href="#petl.stringpatterncounter" title="petl.stringpatterncounter"><tt class="xref py py-func docutils literal"><span class="pre">stringpatterncounter()</span></tt></a></td>
<td><a class="reference internal" href="#petl.rowlengths" title="petl.rowlengths"><tt class="xref py py-func docutils literal"><span class="pre">rowlengths()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.typecounts" title="petl.typecounts"><tt class="xref py py-func docutils literal"><span class="pre">typecounts()</span></tt></a></td>
<td><a class="reference internal" href="#petl.typecounter" title="petl.typecounter"><tt class="xref py py-func docutils literal"><span class="pre">typecounter()</span></tt></a></td>
<td><a class="reference internal" href="#petl.typeset" title="petl.typeset"><tt class="xref py py-func docutils literal"><span class="pre">typeset()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.parsecounts" title="petl.parsecounts"><tt class="xref py py-func docutils literal"><span class="pre">parsecounts()</span></tt></a></td>
<td><a class="reference internal" href="#petl.parsecounter" title="petl.parsecounter"><tt class="xref py py-func docutils literal"><span class="pre">parsecounter()</span></tt></a></td>
<td><a class="reference internal" href="#petl.dateparser" title="petl.dateparser"><tt class="xref py py-func docutils literal"><span class="pre">dateparser()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.timeparser" title="petl.timeparser"><tt class="xref py py-func docutils literal"><span class="pre">timeparser()</span></tt></a></td>
<td><a class="reference internal" href="#petl.datetimeparser" title="petl.datetimeparser"><tt class="xref py py-func docutils literal"><span class="pre">datetimeparser()</span></tt></a></td>
<td><a class="reference internal" href="#petl.boolparser" title="petl.boolparser"><tt class="xref py py-func docutils literal"><span class="pre">boolparser()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.parsenumber" title="petl.parsenumber"><tt class="xref py py-func docutils literal"><span class="pre">parsenumber()</span></tt></a></td>
<td><a class="reference internal" href="#petl.lookup" title="petl.lookup"><tt class="xref py py-func docutils literal"><span class="pre">lookup()</span></tt></a></td>
<td><a class="reference internal" href="#petl.lookupone" title="petl.lookupone"><tt class="xref py py-func docutils literal"><span class="pre">lookupone()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.recordlookup" title="petl.recordlookup"><tt class="xref py py-func docutils literal"><span class="pre">recordlookup()</span></tt></a></td>
<td><a class="reference internal" href="#petl.recordlookupone" title="petl.recordlookupone"><tt class="xref py py-func docutils literal"><span class="pre">recordlookupone()</span></tt></a></td>
<td><a class="reference internal" href="#petl.statsum" title="petl.statsum"><tt class="xref py py-func docutils literal"><span class="pre">statsum()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.adler32sum" title="petl.adler32sum"><tt class="xref py py-func docutils literal"><span class="pre">adler32sum()</span></tt></a></td>
<td><a class="reference internal" href="#petl.crc32sum" title="petl.crc32sum"><tt class="xref py py-func docutils literal"><span class="pre">crc32sum()</span></tt></a></td>
<td><a class="reference internal" href="#petl.expr" title="petl.expr"><tt class="xref py py-func docutils literal"><span class="pre">expr()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.strjoin" title="petl.strjoin"><tt class="xref py py-func docutils literal"><span class="pre">strjoin()</span></tt></a></td>
<td><a class="reference internal" href="#petl.randomtable" title="petl.randomtable"><tt class="xref py py-func docutils literal"><span class="pre">randomtable()</span></tt></a></td>
<td><a class="reference internal" href="#petl.dummytable" title="petl.dummytable"><tt class="xref py py-func docutils literal"><span class="pre">dummytable()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.diffheaders" title="petl.diffheaders"><tt class="xref py py-func docutils literal"><span class="pre">diffheaders()</span></tt></a></td>
<td><a class="reference internal" href="#petl.diffvalues" title="petl.diffvalues"><tt class="xref py py-func docutils literal"><span class="pre">diffvalues()</span></tt></a></td>
<td><a class="reference internal" href="#petl.heapqmergesorted" title="petl.heapqmergesorted"><tt class="xref py py-func docutils literal"><span class="pre">heapqmergesorted()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.shortlistmergesorted" title="petl.shortlistmergesorted"><tt class="xref py py-func docutils literal"><span class="pre">shortlistmergesorted()</span></tt></a></td>
<td><a class="reference internal" href="#petl.progress" title="petl.progress"><tt class="xref py py-func docutils literal"><span class="pre">progress()</span></tt></a></td>
<td><a class="reference internal" href="#petl.clock" title="petl.clock"><tt class="xref py py-func docutils literal"><span class="pre">clock()</span></tt></a></td>
</tr>
<tr><td><a class="reference internal" href="#petl.isordered" title="petl.isordered"><tt class="xref py py-func docutils literal"><span class="pre">isordered()</span></tt></a></td>
<td><a class="reference internal" href="#petl.rowgroupby" title="petl.rowgroupby"><tt class="xref py py-func docutils literal"><span class="pre">rowgroupby()</span></tt></a></td>
<td><a class="reference internal" href="#petl.nthword" title="petl.nthword"><tt class="xref py py-func docutils literal"><span class="pre">nthword()</span></tt></a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<div class="section" id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<p>This module is available from the <a class="reference external" href="http://pypi.python.org/pypi/petl">Python Package Index</a>. On Linux distributions you
should be able to do <tt class="docutils literal"><span class="pre">easy_install</span> <span class="pre">petl</span></tt> or <tt class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">petl</span></tt>. On
Windows or Mac you can download manually, extract and run <tt class="docutils literal"><span class="pre">python</span>
<span class="pre">setup.py</span> <span class="pre">install</span></tt>.</p>
</div>
<div class="section" id="dependencies-and-extensions">
<h3>Dependencies and extensions<a class="headerlink" href="#dependencies-and-extensions" title="Permalink to this headline">¶</a></h3>
<p>This package has been written with no dependencies other than the
Python core modules, for ease of installation and
maintenance. However, there are many third party packages which could
usefuly be used with <a class="reference internal" href="#module-petl" title="petl"><tt class="xref py py-mod docutils literal"><span class="pre">petl</span></tt></a>, e.g., providing access to data from
Excel or other file types. Some extensions with these additional
dependencies are provided by the <a class="reference external" href="http://pypi.python.org/pypi/petlx">petlx</a> package, a companion package to
<a class="reference internal" href="#module-petl" title="petl"><tt class="xref py py-mod docutils literal"><span class="pre">petl</span></tt></a>.</p>
</div>
<div class="section" id="conventions-row-containers-and-row-iterators">
<h3>Conventions - row containers and row iterators<a class="headerlink" href="#conventions-row-containers-and-row-iterators" title="Permalink to this headline">¶</a></h3>
<p>This package defines the following convention for objects acting as
containers of tabular data and supporting row-oriented iteration over
the data.</p>
<p>A <em>row container</em> (also referred to here informally as a <em>table</em>) is
any object which satisfies the following:</p>
<ol class="arabic simple">
<li>implements the <cite>__iter__</cite> method</li>
<li><cite>__iter__</cite> returns a <em>row iterator</em> (see below)</li>
<li>all row iterators returned by <cite>__iter__</cite> are independent, i.e., consuming items from one iterator will not affect any other iterators</li>
</ol>
<p>A <em>row iterator</em> is an iterator which satisfies the following:</p>
<ol class="arabic simple" start="4">
<li>each item returned by the iterator is either a list or a tuple</li>
<li>the first item returned by the iterator is a <em>header row</em> comprising a list or tuple of <em>fields</em></li>
<li>each subsequent item returned by the iterator is a <em>data row</em> comprising a list or tuple of <em>data values</em></li>
<li>a <em>field</em> is typically a string (<cite>str</cite> or <cite>unicode</cite>) but may be an object of any type as long as it implements <cite>__str__</cite>, is immutable (can be used as a dictionary key) and is pickleable</li>
<li>a <em>data value</em> is any pickleable object</li>
</ol>
<p>So, for example, the list of lists shown below is a row container:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
</pre></div>
</div>
<p>Note that, under this convention, an object returned by the
<a class="reference external" href="http://docs.python.org/library/csv.html#csv.reader" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">csv.reader()</span></tt></a> function from the standard Python <a class="reference external" href="http://docs.python.org/library/csv.html#csv" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">csv</span></tt></a> module
is a row iterator and <em>not</em> a row container, because it can only be
iterated over once, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">StringIO</span> <span class="kn">import</span> <span class="n">StringIO</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">csv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">csvdata</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;foo,bar</span>
<span class="gp">... </span><span class="s">a,1</span>
<span class="gp">... </span><span class="s">b,2</span>
<span class="gp">... </span><span class="s">&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rowiterator</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">csvdata</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rowiterator</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">row</span>
<span class="gp">...</span>
<span class="go">[&#39;foo&#39;, &#39;bar&#39;]</span>
<span class="go">[&#39;a&#39;, &#39;1&#39;]</span>
<span class="go">[&#39;b&#39;, &#39;2&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rowiterator</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">row</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># can only iterate once</span>
</pre></div>
</div>
<p>However, it is straightforward to define functions that support the
above convention for row containers and provide access to data from
CSV or other types of file or data source, see e.g. the
<a class="reference internal" href="#petl.fromcsv" title="petl.fromcsv"><tt class="xref py py-func docutils literal"><span class="pre">fromcsv()</span></tt></a> function in this package.</p>
<p>The main reason for requiring that row containers support independent
row iterators (point 3) is that data from a table may need to be
iterated over several times within the same program or interactive
session. E.g., when using <cite>petl</cite> in an interactive session to build up
a sequence of data transformation steps, the user might want to
examine outputs from several intermediate steps, before the
transformation is complete.</p>
<p>Note that this convention does not place any restrictions on the
lengths of header and data rows. A table may return a header row
and/or data rows of varying lengths.</p>
</div>
<div class="section" id="transformation-pipelines">
<h3>Transformation pipelines<a class="headerlink" href="#transformation-pipelines" title="Permalink to this headline">¶</a></h3>
<p>Note that this package makes extensive use of lazy evaluation and
iterators. This means, generally, that a transformation will not
actually be executed until data is requested.</p>
<p>E.g., given the following data in a file at &#8216;example1.csv&#8217; in the
current working directory:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">foo</span><span class="p">,</span><span class="n">bar</span><span class="p">,</span><span class="n">baz</span>
<span class="n">a</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">3.4</span>
<span class="n">b</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">7.4</span>
<span class="n">c</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mf">2.2</span>
<span class="n">d</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mf">8.1</span>
</pre></div>
</div>
<p>...the following code does not actually read the file, nor does it
load any of its contents into memory:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="n">fromcsv</span><span class="p">(</span><span class="s">&#39;example1.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Rather, <cite>table1</cite> is a row container object, which can be iterated over.</p>
<p>Similarly, if one or more transformation functions are applied, e.g.::</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;upper&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">table2</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">table3</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table5</span> <span class="o">=</span> <span class="n">extend</span><span class="p">(</span><span class="n">table4</span><span class="p">,</span> <span class="s">&#39;quux&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="p">(</span><span class="s">&#39;{bar} * {baz}&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>...no actual transformation work will be done, until data are
requested from <cite>table5</cite> or any of the other row containers returned by
the intermediate steps.</p>
<p>So in effect, a 5 step transformation pipeline has been set up, and
rows will pass through the pipeline on demand, as they are pulled from
the end of the pipeline via iteration.</p>
<p>A call to a function like <a class="reference internal" href="#petl.look" title="petl.look"><tt class="xref py py-func docutils literal"><span class="pre">look()</span></tt></a>, or any of the functions which
write data to a file or database (e.g., <a class="reference internal" href="#petl.tocsv" title="petl.tocsv"><tt class="xref py py-func docutils literal"><span class="pre">tocsv()</span></tt></a>, <a class="reference internal" href="#petl.totext" title="petl.totext"><tt class="xref py py-func docutils literal"><span class="pre">totext()</span></tt></a>,
<a class="reference internal" href="#petl.tosqlite3" title="petl.tosqlite3"><tt class="xref py py-func docutils literal"><span class="pre">tosqlite3()</span></tt></a>, <a class="reference internal" href="#petl.todb" title="petl.todb"><tt class="xref py py-func docutils literal"><span class="pre">todb()</span></tt></a>), will pull data through the pipeline
and cause all of the transformation steps to be executed on the
requested rows, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table5</span><span class="p">)</span>
<span class="go">+-------+-------+-------+--------------------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; | &#39;quux&#39;             |</span>
<span class="go">+=======+=======+=======+====================+</span>
<span class="go">| &#39;A&#39;   | 1     | 3.4   | 3.4                |</span>
<span class="go">+-------+-------+-------+--------------------+</span>
<span class="go">| &#39;B&#39;   | 2     | 7.4   | 14.8               |</span>
<span class="go">+-------+-------+-------+--------------------+</span>
<span class="go">| &#39;C&#39;   | 6     | 2.2   | 13.200000000000001 |</span>
<span class="go">+-------+-------+-------+--------------------+</span>
<span class="go">| &#39;D&#39;   | 9     | 8.1   | 72.89999999999999  |</span>
<span class="go">+-------+-------+-------+--------------------+</span>
</pre></div>
</div>
<p>...although note that <a class="reference internal" href="#petl.look" title="petl.look"><tt class="xref py py-func docutils literal"><span class="pre">look()</span></tt></a> will by default only request the
first 10 rows, and so at most only 10 rows will be processed. Calling
<a class="reference internal" href="#petl.look" title="petl.look"><tt class="xref py py-func docutils literal"><span class="pre">look()</span></tt></a> to inspect the first few rows of a table is often an
efficient way to examine the output of a transformation pipeline,
without having to execute the transformation over all of the input
data.</p>
</div>
<div class="section" id="caching-memoization">
<h3>Caching / memoization<a class="headerlink" href="#caching-memoization" title="Permalink to this headline">¶</a></h3>
<p>This package tries to make efficient use of memory by using iterators
and lazy evaluation where possible. However, some transformations
cannot be done without building data structures, either in memory or
on disk.</p>
<p>An example is the <a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function, which will either sort a
table entirely in memory, or will sort the table in memory in chunks,
writing chunks to disk and performing a final merge sort on the
chunks. Which strategy is used will depend on the arguments passed
into the <a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function when it is called.</p>
<p>In either case, the sorting can take some time, and if the sorted data
will be used more than once, it is obviously undesirable to throw away
the sorted data and start again from scratch each time. It is better
to cache (a.k.a., memoize) the sorted data, if possible, so it can be
re-used. However, if a table upstream of the sort is mutable, there
needs to be some way of discovering whether data have been changed
since the last sort was performed, and hence whether the cached data
are still fresh or not.</p>
<p>There are also cases where, even though data are generated in a purely
iterative fashion, some programs may still want to cache some or all
of the data. E.g., where data are calculated dynamically and are
relatively expensive to compute, or require scanning many rows, or
where data are being retrieved via a network and there is
latency. Again, there needs to be some way of finding out whether
cached data are fresh or not.</p>
<p>To support caching, it is recommended (but not required) that row
container objects also implement the <cite>cachetag</cite> method. This method
should return an integer which changes whenever the table&#8217;s fields or
data changes (i.e., a row iterator would yield a different sequence of
items). All <a class="reference internal" href="#module-petl" title="petl"><tt class="xref py py-mod docutils literal"><span class="pre">petl</span></tt></a> row container objects implement this method,
where applicable.</p>
<p>Note in particular that the functions <a class="reference internal" href="#petl.fromcsv" title="petl.fromcsv"><tt class="xref py py-func docutils literal"><span class="pre">fromcsv()</span></tt></a>,
<a class="reference internal" href="#petl.frompickle" title="petl.frompickle"><tt class="xref py py-func docutils literal"><span class="pre">frompickle()</span></tt></a> and <a class="reference internal" href="#petl.fromsqlite3" title="petl.fromsqlite3"><tt class="xref py py-func docutils literal"><span class="pre">fromsqlite3()</span></tt></a> return tables that
implement the <cite>cachetag</cite> method, and that the implementation of
<cite>cachetag</cite> in these cases depends on a checksum function operating on
the underlying data file. By default, <a class="reference internal" href="#petl.statsum" title="petl.statsum"><tt class="xref py py-func docutils literal"><span class="pre">statsum()</span></tt></a> is used as the
checksum function, which is cheap to compute but crude because it
relies only on file name, size and time of modification, and on some
systems this will <strong>not</strong> reveal changes within the same second that
preserve file size. If you need a finer level of granularity, use
either <a class="reference internal" href="#petl.adler32sum" title="petl.adler32sum"><tt class="xref py py-func docutils literal"><span class="pre">adler32sum()</span></tt></a> or <a class="reference internal" href="#petl.crc32sum" title="petl.crc32sum"><tt class="xref py py-func docutils literal"><span class="pre">crc32sum()</span></tt></a> instead. These can be
passed in as arguments to <a class="reference internal" href="#petl.fromcsv" title="petl.fromcsv"><tt class="xref py py-func docutils literal"><span class="pre">fromcsv()</span></tt></a>, <a class="reference internal" href="#petl.frompickle" title="petl.frompickle"><tt class="xref py py-func docutils literal"><span class="pre">frompickle()</span></tt></a> and
<a class="reference internal" href="#petl.fromsqlite3" title="petl.fromsqlite3"><tt class="xref py py-func docutils literal"><span class="pre">fromsqlite3()</span></tt></a>, or can be set globally, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">petl.io</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">petl</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">defaultsumfun</span> <span class="o">=</span> <span class="n">petl</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">adler32sum</span>
</pre></div>
</div>
<p>Care must be taken to ensure correct implementation of the <cite>cachetag</cite>
method where a table is generating data dynamically from another table
or tables. In these cases, the state of the upstream tables must be
considered when generating a <cite>cachetag</cite> value. One strategy is to
construct <cite>cachetag</cite> values by hashing the internal configuration
attributes of a table, along with the <cite>cachetag</cite> values from any
tables immediately upstream.</p>
<p>In some cases, it may be difficult to determine whether data have
changed, e.g., where data are being retrieved from a database. In
these cases it is suggested that table objects use a user-configurable
time to live (TTL) to generate <cite>cachetag</cite> values. E.g., where a
database table is updated once a day at most, a TTL of a few hours
would enable data to be cached during an interactive session, which
might improve usability for someone exploring the data or developing a
transformation script.</p>
</div>
</div>
<div class="section" id="extract-reading-tables-from-files-databases-and-other-sources">
<h2>Extract - reading tables from files, databases and other sources<a class="headerlink" href="#extract-reading-tables-from-files-databases-and-other-sources" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="petl.fromcsv">
<tt class="descclassname">petl.</tt><tt class="descname">fromcsv</tt><big>(</big><em>source=None</em>, <em>dialect=&lt;class csv.excel at 0xb22fb0c&gt;</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.fromcsv" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for the standard <a class="reference external" href="http://docs.python.org/library/csv.html#csv.reader" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">csv.reader()</span></tt></a> function. Returns a table providing
access to the data in the given delimited file. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">csv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># set up a CSV file to demonstrate with</span>
<span class="gp">... </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;test.csv&#39;</span><span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># now demonstrate the use of petl.fromcsv</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">fromcsv</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">testcsv</span> <span class="o">=</span> <span class="n">fromcsv</span><span class="p">(</span><span class="s">&#39;test.csv&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">testcsv</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | &#39;1&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>The <cite>filename</cite> argument is the path of the delimited file, all other keyword
arguments are passed to <a class="reference external" href="http://docs.python.org/library/csv.html#csv.reader" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">csv.reader()</span></tt></a>. So, e.g., to override the delimiter
from the default CSV dialect, provide the <cite>delimiter</cite> keyword argument.</p>
<p>Note that all data values are strings, and any intended numeric values will
need to be converted, see also <a class="reference internal" href="#petl.convert" title="petl.convert"><tt class="xref py py-func docutils literal"><span class="pre">convert()</span></tt></a>.</p>
<p>The returned table object implements the <cite>cachetag()</cite> method. If the 
<cite>checksumfun</cite> argument is not given, the default checksum function (whatever
<cite>petl.io.defaultsumfun</cite> is currently set to) will be used to calculate 
cachetag values.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.9.</span></p>
<p>Now supports transparent handling of gzipped files (any file name ending in 
&#8216;.gz&#8217;).</p>
</dd></dl>

<dl class="function">
<dt id="petl.fromtsv">
<tt class="descclassname">petl.</tt><tt class="descname">fromtsv</tt><big>(</big><em>source=None</em>, <em>dialect=&lt;class csv.excel_tab at 0xb22fb3c&gt;</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.fromtsv" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function, as <a class="reference internal" href="#petl.fromcsv" title="petl.fromcsv"><tt class="xref py py-func docutils literal"><span class="pre">fromcsv()</span></tt></a> but with different default dialect
(tab delimited).</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.9.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.frompickle">
<tt class="descclassname">petl.</tt><tt class="descname">frompickle</tt><big>(</big><em>source=None</em><big>)</big><a class="headerlink" href="#petl.frompickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a table providing access to the data pickled in the given file. The 
rows in the table should have been pickled to the file one at a time. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pickle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># set up a file to demonstrate with</span>
<span class="gp">... </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;test.dat&#39;</span><span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">([</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="n">f</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">([</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">([</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">f</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">([</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">],</span> <span class="n">f</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># now demonstrate the use of petl.frompickle</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">frompickle</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">testdat</span> <span class="o">=</span> <span class="n">frompickle</span><span class="p">(</span><span class="s">&#39;test.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">testdat</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2.5   |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>The returned table object implements the <cite>cachetag()</cite> method. If the 
<cite>checksumfun</cite> argument is not given, the default checksum function (whatever
<cite>petl.io.defaultsumfun</cite> is currently set to) will be used to calculate 
cachetag values.</p>
</dd></dl>

<dl class="function">
<dt id="petl.fromsqlite3">
<tt class="descclassname">petl.</tt><tt class="descname">fromsqlite3</tt><big>(</big><em>filename</em>, <em>query</em>, <em>checksumfun=None</em><big>)</big><a class="headerlink" href="#petl.fromsqlite3" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides access to data from an <a class="reference external" href="http://docs.python.org/library/sqlite3.html#sqlite3" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">sqlite3</span></tt></a> database file via a given query. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">fromsqlite3</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="c"># set up a database to demonstrate with</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;create table foobar (foo, bar)&#39;</span><span class="p">)</span>
<span class="go">&lt;sqlite3.Cursor object at 0x2240b90&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;insert into foobar values (?, ?)&#39;</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>
<span class="gp">... </span>
<span class="go">&lt;sqlite3.Cursor object at 0x2240b90&gt;</span>
<span class="go">&lt;sqlite3.Cursor object at 0x2240b90&gt;</span>
<span class="go">&lt;sqlite3.Cursor object at 0x2240b90&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># now demonstrate the petl.fromsqlite3 function</span>
<span class="gp">... </span><span class="n">foobar</span> <span class="o">=</span> <span class="n">fromsqlite3</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="p">,</span> <span class="s">&#39;select * from foobar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">foobar</span><span class="p">)</span>    
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| u&#39;a&#39;  | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| u&#39;b&#39;  | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| u&#39;c&#39;  | 2.0   |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>The returned table object implements the <cite>cachetag()</cite> method. If the 
<cite>checksumfun</cite> argument is not given, the default checksum function (whatever
<cite>petl.io.defaultsumfun</cite> is currently set to) will be used to calculate 
cachetag values.</p>
</dd></dl>

<dl class="function">
<dt id="petl.fromdb">
<tt class="descclassname">petl.</tt><tt class="descname">fromdb</tt><big>(</big><em>connection</em>, <em>query</em><big>)</big><a class="headerlink" href="#petl.fromdb" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides access to data from any DB-API 2.0 connection via a given query. 
E.g., using <cite>sqlite3</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">fromdb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">fromdb</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="s">&#39;select * from foobar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</pre></div>
</div>
<p>E.g., using <cite>psycopg2</cite> (assuming you&#8217;ve installed it first):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psycopg2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">fromdb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;dbname=test user=postgres&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">fromdb</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="s">&#39;select * from test&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</pre></div>
</div>
<p>E.g., using <cite>MySQLdb</cite> (assuming you&#8217;ve installed it first):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">MySQLdb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">fromdb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">MySQLdb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">passwd</span><span class="o">=</span><span class="s">&quot;moonpie&quot;</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="s">&quot;thangs&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">fromdb</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="s">&#39;select * from test&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</pre></div>
</div>
<p>The returned table object does not implement the <cite>cachetag()</cite> method.</p>
</dd></dl>

<dl class="function">
<dt id="petl.fromtext">
<tt class="descclassname">petl.</tt><tt class="descname">fromtext</tt><big>(</big><em>source=None, header=['lines'], strip=None</em><big>)</big><a class="headerlink" href="#petl.fromtext" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a table from lines in the given text file. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># example data</span>
<span class="gp">... </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;test.txt&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;a</span><span class="se">\t</span><span class="s">1</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;b</span><span class="se">\t</span><span class="s">2</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;c</span><span class="se">\t</span><span class="s">3</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">fromtext</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="n">fromtext</span><span class="p">(</span><span class="s">&#39;test.txt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+--------------+</span>
<span class="go">| &#39;lines&#39;      |</span>
<span class="go">+==============+</span>
<span class="go">| &#39;a\t1&#39;      |</span>
<span class="go">+--------------+</span>
<span class="go">| &#39;b\t2&#39;      |</span>
<span class="go">+--------------+</span>
<span class="go">| &#39;c\t3&#39;      |</span>
<span class="go">+--------------+</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#petl.fromtext" title="petl.fromtext"><tt class="xref py py-func docutils literal"><span class="pre">fromtext()</span></tt></a> function provides a starting point for custom handling of 
text files. E.g., using <a class="reference internal" href="#petl.capture" title="petl.capture"><tt class="xref py py-func docutils literal"><span class="pre">capture()</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">capture</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">capture</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;lines&#39;</span><span class="p">,</span> <span class="s">&#39;(.*)</span><span class="se">\\</span><span class="s">t(.*)$&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | &#39;1&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;3&#39;   |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The strip() function is called on each line, which by default will remove 
leading and trailing whitespace, including the end-of-line character - use 
the <cite>strip</cite> keyword argument to specify alternative characters to strip.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.9.</span></p>
<p>Now supports transparent handling of gzipped files (any file name ending in 
&#8216;.gz&#8217;).</p>
</dd></dl>

<dl class="function">
<dt id="petl.fromxml">
<tt class="descclassname">petl.</tt><tt class="descname">fromxml</tt><big>(</big><em>source</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.fromxml" title="Permalink to this definition">¶</a></dt>
<dd><p>Access data in an XML file. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">fromxml</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;&lt;table&gt;</span>
<span class="gp">... </span><span class="s">    &lt;tr&gt;</span>
<span class="gp">... </span><span class="s">        &lt;td&gt;foo&lt;/td&gt;&lt;td&gt;bar&lt;/td&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/tr&gt;</span>
<span class="gp">... </span><span class="s">    &lt;tr&gt;</span>
<span class="gp">... </span><span class="s">        &lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/tr&gt;</span>
<span class="gp">... </span><span class="s">    &lt;tr&gt;</span>
<span class="gp">... </span><span class="s">        &lt;td&gt;b&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/tr&gt;</span>
<span class="gp">... </span><span class="s">    &lt;tr&gt;</span>
<span class="gp">... </span><span class="s">        &lt;td&gt;c&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/tr&gt;</span>
<span class="gp">... </span><span class="s">&lt;/table&gt;&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;example1.xml&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>    
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="n">fromxml</span><span class="p">(</span><span class="s">&#39;example1.xml&#39;</span><span class="p">,</span> <span class="s">&#39;tr&#39;</span><span class="p">,</span> <span class="s">&#39;td&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | &#39;1&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>If the data values are stored in an attribute, provide the attribute name
as an extra positional argument, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;&lt;table&gt;</span>
<span class="gp">... </span><span class="s">    &lt;tr&gt;</span>
<span class="gp">... </span><span class="s">        &lt;td v=&#39;foo&#39;/&gt;&lt;td v=&#39;bar&#39;/&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/tr&gt;</span>
<span class="gp">... </span><span class="s">    &lt;tr&gt;</span>
<span class="gp">... </span><span class="s">        &lt;td v=&#39;a&#39;/&gt;&lt;td v=&#39;1&#39;/&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/tr&gt;</span>
<span class="gp">... </span><span class="s">    &lt;tr&gt;</span>
<span class="gp">... </span><span class="s">        &lt;td v=&#39;b&#39;/&gt;&lt;td v=&#39;2&#39;/&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/tr&gt;</span>
<span class="gp">... </span><span class="s">    &lt;tr&gt;</span>
<span class="gp">... </span><span class="s">        &lt;td v=&#39;c&#39;/&gt;&lt;td v=&#39;2&#39;/&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/tr&gt;</span>
<span class="gp">... </span><span class="s">&lt;/table&gt;&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;example2.xml&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>    
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">fromxml</span><span class="p">(</span><span class="s">&#39;example2.xml&#39;</span><span class="p">,</span> <span class="s">&#39;tr&#39;</span><span class="p">,</span> <span class="s">&#39;td&#39;</span><span class="p">,</span> <span class="s">&#39;v&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | &#39;1&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Data values can also be extracted by providing a mapping of field names
to element paths, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;&lt;table&gt;</span>
<span class="gp">... </span><span class="s">    &lt;row&gt;</span>
<span class="gp">... </span><span class="s">        &lt;foo&gt;a&lt;/foo&gt;&lt;baz&gt;&lt;bar v=&#39;1&#39;/&gt;&lt;bar v=&#39;3&#39;/&gt;&lt;/baz&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/row&gt;</span>
<span class="gp">... </span><span class="s">    &lt;row&gt;</span>
<span class="gp">... </span><span class="s">        &lt;foo&gt;b&lt;/foo&gt;&lt;baz&gt;&lt;bar v=&#39;2&#39;/&gt;&lt;/baz&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/row&gt;</span>
<span class="gp">... </span><span class="s">    &lt;row&gt;</span>
<span class="gp">... </span><span class="s">        &lt;foo&gt;c&lt;/foo&gt;&lt;baz&gt;&lt;bar v=&#39;2&#39;/&gt;&lt;/baz&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/row&gt;</span>
<span class="gp">... </span><span class="s">&lt;/table&gt;&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;example3.xml&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>    
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">fromxml</span><span class="p">(</span><span class="s">&#39;example3.xml&#39;</span><span class="p">,</span> <span class="s">&#39;row&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;baz/bar&#39;</span><span class="p">,</span> <span class="s">&#39;v&#39;</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+------------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39;      |</span>
<span class="go">+=======+============+</span>
<span class="go">| &#39;a&#39;   | (&#39;1&#39;, &#39;3&#39;) |</span>
<span class="go">+-------+------------+</span>
<span class="go">| &#39;b&#39;   | &#39;2&#39;        |</span>
<span class="go">+-------+------------+</span>
<span class="go">| &#39;c&#39;   | &#39;2&#39;        |</span>
<span class="go">+-------+------------+</span>
</pre></div>
</div>
<p>Note that the implementation is currently <em>not</em>
streaming, i.e., the whole document is loaded into memory.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.4.</span></p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.6: </span>If multiple elements match a given field, all values are reported as a tuple.</p>
</dd></dl>

<dl class="function">
<dt id="petl.fromjson">
<tt class="descclassname">petl.</tt><tt class="descname">fromjson</tt><big>(</big><em>source</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.fromjson" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract data from a JSON file. The file must contain a JSON array as the top
level object, and each member of the array will be treated as a row of data.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">fromjson</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="s">&#39;[{&quot;foo&quot;: &quot;a&quot;, &quot;bar&quot;: 1}, {&quot;foo&quot;: &quot;b&quot;, &quot;bar&quot;: 2}, {&quot;foo&quot;: &quot;c&quot;, &quot;bar&quot;: 2}]&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;example1.json&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="n">fromjson</span><span class="p">(</span><span class="s">&#39;example1.json&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+--------+--------+</span>
<span class="go">| u&#39;foo&#39; | u&#39;bar&#39; |</span>
<span class="go">+========+========+</span>
<span class="go">| u&#39;a&#39;   | 1      |</span>
<span class="go">+--------+--------+</span>
<span class="go">| u&#39;b&#39;   | 2      |</span>
<span class="go">+--------+--------+</span>
<span class="go">| u&#39;c&#39;   | 2      |</span>
<span class="go">+--------+--------+</span>
</pre></div>
</div>
<p>If your JSON file does not fit this structure, you will need to parse it
via <a class="reference external" href="http://docs.python.org/library/json.html#json.load" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">json.load()</span></tt></a> and select the array to treat as the data, see also 
<a class="reference internal" href="#petl.fromdicts" title="petl.fromdicts"><tt class="xref py py-func docutils literal"><span class="pre">fromdicts()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.fromdicts">
<tt class="descclassname">petl.</tt><tt class="descname">fromdicts</tt><big>(</big><em>dicts</em>, <em>header=None</em><big>)</big><a class="headerlink" href="#petl.fromdicts" title="Permalink to this definition">¶</a></dt>
<dd><p>View a sequence of Python <a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></a> as a table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">fromdicts</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dicts</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&quot;foo&quot;</span><span class="p">:</span> <span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;foo&quot;</span><span class="p">:</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;foo&quot;</span><span class="p">:</span> <span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">fromdicts</span><span class="p">(</span><span class="n">dicts</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#petl.fromjson" title="petl.fromjson"><tt class="xref py py-func docutils literal"><span class="pre">fromjson()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

</div>
<div class="section" id="transform-transforming-tables">
<h2>Transform - transforming tables<a class="headerlink" href="#transform-transforming-tables" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="petl.rename">
<tt class="descclassname">petl.</tt><tt class="descname">rename</tt><big>(</big><em>table</em>, <em>*args</em><big>)</big><a class="headerlink" href="#petl.rename" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace one or more fields in the table&#8217;s header row. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">rename</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;sex&#39; | &#39;age&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;M&#39;   | 12    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 34    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;-&#39;   | 56    |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># rename a single field</span>
<span class="gp">... </span><span class="n">table2</span> <span class="o">=</span> <span class="n">rename</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;sex&#39;</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+----------+-------+</span>
<span class="go">| &#39;gender&#39; | &#39;age&#39; |</span>
<span class="go">+==========+=======+</span>
<span class="go">| &#39;M&#39;      | 12    |</span>
<span class="go">+----------+-------+</span>
<span class="go">| &#39;F&#39;      | 34    |</span>
<span class="go">+----------+-------+</span>
<span class="go">| &#39;-&#39;      | 56    |</span>
<span class="go">+----------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># rename multiple fields by passing a dictionary as the second argument</span>
<span class="gp">... </span><span class="n">table3</span> <span class="o">=</span> <span class="n">rename</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;sex&#39;</span><span class="p">:</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">:</span> <span class="s">&#39;age_years&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+----------+-------------+</span>
<span class="go">| &#39;gender&#39; | &#39;age_years&#39; |</span>
<span class="go">+==========+=============+</span>
<span class="go">| &#39;M&#39;      | 12          |</span>
<span class="go">+----------+-------------+</span>
<span class="go">| &#39;F&#39;      | 34          |</span>
<span class="go">+----------+-------------+</span>
<span class="go">| &#39;-&#39;      | 56          |</span>
<span class="go">+----------+-------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># the returned table object can also be used to modify the field mapping using the suffix notation</span>
<span class="gp">... </span><span class="n">table4</span> <span class="o">=</span> <span class="n">rename</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span><span class="p">[</span><span class="s">&#39;sex&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;gender&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span><span class="p">[</span><span class="s">&#39;age&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;age_years&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+----------+-------------+</span>
<span class="go">| &#39;gender&#39; | &#39;age_years&#39; |</span>
<span class="go">+==========+=============+</span>
<span class="go">| &#39;M&#39;      | 12          |</span>
<span class="go">+----------+-------------+</span>
<span class="go">| &#39;F&#39;      | 34          |</span>
<span class="go">+----------+-------------+</span>
<span class="go">| &#39;-&#39;      | 56          |</span>
<span class="go">+----------+-------------+</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>Function signature changed to support the simple 2 argument form when renaming
a single field.</p>
</dd></dl>

<dl class="function">
<dt id="petl.setheader">
<tt class="descclassname">petl.</tt><tt class="descname">setheader</tt><big>(</big><em>table</em>, <em>fields</em><big>)</big><a class="headerlink" href="#petl.setheader" title="Permalink to this definition">¶</a></dt>
<dd><p>Override fields in the given table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">setheader</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">setheader</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foofoo&#39;</span><span class="p">,</span> <span class="s">&#39;barbar&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+----------+----------+</span>
<span class="go">| &#39;foofoo&#39; | &#39;barbar&#39; |</span>
<span class="go">+==========+==========+</span>
<span class="go">| &#39;a&#39;      | 1        |</span>
<span class="go">+----------+----------+</span>
<span class="go">| &#39;b&#39;      | 2        |</span>
<span class="go">+----------+----------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.extendheader">
<tt class="descclassname">petl.</tt><tt class="descname">extendheader</tt><big>(</big><em>table</em>, <em>fields</em><big>)</big><a class="headerlink" href="#petl.extendheader" title="Permalink to this definition">¶</a></dt>
<dd><p>Extend fields in the given table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">extendheader</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+---+-------+</span>
<span class="go">| &#39;foo&#39; |   |       |</span>
<span class="go">+=======+===+=======+</span>
<span class="go">| &#39;a&#39;   | 1 | True  |</span>
<span class="go">+-------+---+-------+</span>
<span class="go">| &#39;b&#39;   | 2 | False |</span>
<span class="go">+-------+---+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">extendheader</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     | False |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.pushheader">
<tt class="descclassname">petl.</tt><tt class="descname">pushheader</tt><big>(</big><em>table</em>, <em>fields</em><big>)</big><a class="headerlink" href="#petl.pushheader" title="Permalink to this definition">¶</a></dt>
<dd><p>Push rows down and prepend a header row. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">pushheader</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-----+---+</span>
<span class="go">| &#39;a&#39; | 1 |</span>
<span class="go">+=====+===+</span>
<span class="go">| &#39;b&#39; | 2 |</span>
<span class="go">+-----+---+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">pushheader</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Useful, e.g., where data are from a CSV file that has not included a header
row.</p>
</dd></dl>

<dl class="function">
<dt id="petl.skip">
<tt class="descclassname">petl.</tt><tt class="descname">skip</tt><big>(</big><em>table</em>, <em>n</em><big>)</big><a class="headerlink" href="#petl.skip" title="Permalink to this definition">¶</a></dt>
<dd><p>Skip <cite>n</cite> rows (including the header row). E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">skip</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+--------+-------+-------+</span>
<span class="go">| &#39;#aaa&#39; | &#39;bbb&#39; | &#39;ccc&#39; |</span>
<span class="go">+========+=======+=======+</span>
<span class="go">| &#39;#mmm&#39; |       |       |</span>
<span class="go">+--------+-------+-------+</span>
<span class="go">| &#39;foo&#39;  | &#39;bar&#39; |       |</span>
<span class="go">+--------+-------+-------+</span>
<span class="go">| &#39;a&#39;    | 1     |       |</span>
<span class="go">+--------+-------+-------+</span>
<span class="go">| &#39;b&#39;    | 2     |       |</span>
<span class="go">+--------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">skip</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.skipcomments">
<tt class="descclassname">petl.</tt><tt class="descname">skipcomments</tt><big>(</big><em>table</em>, <em>prefix</em><big>)</big><a class="headerlink" href="#petl.skipcomments" title="Permalink to this definition">¶</a></dt>
<dd><p>Skip any row where the first value is a string and starts with 
<cite>prefix</cite>. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">skipcomments</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+---------+-------+-------+</span>
<span class="go">| &#39;##aaa&#39; | &#39;bbb&#39; | &#39;ccc&#39; |</span>
<span class="go">+=========+=======+=======+</span>
<span class="go">| &#39;##mmm&#39; |       |       |</span>
<span class="go">+---------+-------+-------+</span>
<span class="go">| &#39;#foo&#39;  | &#39;bar&#39; |       |</span>
<span class="go">+---------+-------+-------+</span>
<span class="go">| &#39;##nnn&#39; | 1     |       |</span>
<span class="go">+---------+-------+-------+</span>
<span class="go">| &#39;a&#39;     | 1     |       |</span>
<span class="go">+---------+-------+-------+</span>
<span class="go">| &#39;b&#39;     | 2     |       |</span>
<span class="go">+---------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">skipcomments</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;##&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+--------+-------+</span>
<span class="go">| &#39;#foo&#39; | &#39;bar&#39; |</span>
<span class="go">+========+=======+</span>
<span class="go">| &#39;a&#39;    | 1     |</span>
<span class="go">+--------+-------+</span>
<span class="go">| &#39;b&#39;    | 2     |</span>
<span class="go">+--------+-------+</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 0.4.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.rowslice">
<tt class="descclassname">petl.</tt><tt class="descname">rowslice</tt><big>(</big><em>table</em>, <em>*sliceargs</em><big>)</big><a class="headerlink" href="#petl.rowslice" title="Permalink to this definition">¶</a></dt>
<dd><p>Choose a subsequence of data rows. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rowslice</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 5     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;d&#39;   | 7     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;f&#39;   | 42    |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">rowslice</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">rowslice</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 5     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;d&#39;   | 7     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span> <span class="o">=</span> <span class="n">rowslice</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 5     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;f&#39;   | 42    |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.3.</span></p>
<p>Positional arguments can be used to slice the data rows. The <cite>sliceargs</cite> are 
passed to <a class="reference external" href="http://docs.python.org/library/itertools.html#itertools.islice" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">itertools.islice()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.head">
<tt class="descclassname">petl.</tt><tt class="descname">head</tt><big>(</big><em>table</em>, <em>n=10</em><big>)</big><a class="headerlink" href="#petl.head" title="Permalink to this definition">¶</a></dt>
<dd><p>Choose the first n data rows. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">head</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 5     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;d&#39;   | 7     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;f&#39;   | 42    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;f&#39;   | 3     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;h&#39;   | 90    |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">head</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>    
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 5     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;d&#39;   | 7     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Syntactic sugar, equivalent to <tt class="docutils literal"><span class="pre">rowslice(table,</span> <span class="pre">n)</span></tt>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.tail">
<tt class="descclassname">petl.</tt><tt class="descname">tail</tt><big>(</big><em>table</em>, <em>n=10</em><big>)</big><a class="headerlink" href="#petl.tail" title="Permalink to this definition">¶</a></dt>
<dd><p>Choose the last n data rows. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">tail</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 5     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;d&#39;   | 7     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;f&#39;   | 42    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;f&#39;   | 3     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;h&#39;   | 90    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;k&#39;   | 12    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;l&#39;   | 77    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;q&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">tail</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>    
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;h&#39;   | 90    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;k&#39;   | 12    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;l&#39;   | 77    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;q&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.cut">
<tt class="descclassname">petl.</tt><tt class="descname">cut</tt><big>(</big><em>table</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.cut" title="Permalink to this definition">¶</a></dt>
<dd><p>Choose and/or re-order columns. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">cut</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | 2.7   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     | 3.4   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 3     | 7.8   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 42    | 9.0   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;E&#39;   | 12    |       |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">cut</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 2.7   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 3.4   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 7.8   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 9.0   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;E&#39;   | None  |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># fields can also be specified by index, starting from zero</span>
<span class="gp">... </span><span class="n">table3</span> <span class="o">=</span> <span class="n">cut</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 2.7   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 3.4   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 7.8   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 9.0   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;E&#39;   | None  |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># field names and indices can be mixed</span>
<span class="gp">... </span><span class="n">table4</span> <span class="o">=</span> <span class="n">cut</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;bar&#39; | &#39;foo&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| 1     | &#39;A&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| 2     | &#39;B&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| 3     | &#39;B&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| 42    | &#39;D&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| 12    | &#39;E&#39;   |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># select a range of fields</span>
<span class="gp">... </span><span class="n">table5</span> <span class="o">=</span> <span class="n">cut</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="o">*</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table5</span><span class="p">)</span>    
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 3     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 42    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;E&#39;   | 12    |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Note that any short rows will be padded with <cite>None</cite> values (or whatever is
provided via the <cite>missing</cite> keyword argument).</p>
<p>See also <a class="reference internal" href="#petl.cutout" title="petl.cutout"><tt class="xref py py-func docutils literal"><span class="pre">cutout()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.cutout">
<tt class="descclassname">petl.</tt><tt class="descname">cutout</tt><big>(</big><em>table</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.cutout" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove fields. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">cutout</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | 2.7   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     | 3.4   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 3     | 7.8   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 42    | 9.0   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;E&#39;   | 12    |       |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">cutout</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 2.7   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 3.4   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 7.8   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 9.0   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;E&#39;   | None  |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#petl.cut" title="petl.cut"><tt class="xref py py-func docutils literal"><span class="pre">cut()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.3.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.select">
<tt class="descclassname">petl.</tt><tt class="descname">select</tt><big>(</big><em>table</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows meeting a condition. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">select</span><span class="p">,</span> <span class="n">look</span>     
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 4     | 9.3   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;a&#39;   | 2     | 88.2  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 1     | 23.3  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 8     | 42.0  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;d&#39;   | 7     | 100.9 |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |       |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># the second positional argument can be a function accepting a row</span>
<span class="gp">... </span><span class="n">table2</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">rec</span><span class="p">:</span> <span class="n">rec</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;a&#39;</span> <span class="ow">and</span> <span class="n">rec</span><span class="p">[</span><span class="s">&#39;baz&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">88.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 2     | 88.2  |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># the second positional argument can also be an expression string, which </span>
<span class="gp">... </span><span class="c"># will be converted to a function using expr()</span>
<span class="gp">... </span><span class="n">table3</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&quot;{foo} == &#39;a&#39; and {baz} &gt; 88.1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 2     | 88.2  |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># the condition can also be applied to a single field</span>
<span class="gp">... </span><span class="n">table4</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span> <span class="o">==</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 4     | 9.3   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;a&#39;   | 2     | 88.2  |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectop">
<tt class="descclassname">petl.</tt><tt class="descname">selectop</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>op</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectop" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the function <cite>op</cite> applied to the given field and the given 
value returns true.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selecteq">
<tt class="descclassname">petl.</tt><tt class="descname">selecteq</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selecteq" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field equals the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectne">
<tt class="descclassname">petl.</tt><tt class="descname">selectne</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectne" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field does not equal the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectlt">
<tt class="descclassname">petl.</tt><tt class="descname">selectlt</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectlt" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is less than the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectle">
<tt class="descclassname">petl.</tt><tt class="descname">selectle</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectle" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is less than or equal to the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectgt">
<tt class="descclassname">petl.</tt><tt class="descname">selectgt</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectgt" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is greater than the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectge">
<tt class="descclassname">petl.</tt><tt class="descname">selectge</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectge" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is greater than or equal to the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectrangeopen">
<tt class="descclassname">petl.</tt><tt class="descname">selectrangeopen</tt><big>(</big><em>table</em>, <em>field</em>, <em>minv</em>, <em>maxv</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectrangeopen" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is greater than or equal to <cite>minv</cite> and 
less than or equal to <cite>maxv</cite>.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectrangeopenleft">
<tt class="descclassname">petl.</tt><tt class="descname">selectrangeopenleft</tt><big>(</big><em>table</em>, <em>field</em>, <em>minv</em>, <em>maxv</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectrangeopenleft" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is greater than or equal to <cite>minv</cite> and 
less than <cite>maxv</cite>.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectrangeopenright">
<tt class="descclassname">petl.</tt><tt class="descname">selectrangeopenright</tt><big>(</big><em>table</em>, <em>field</em>, <em>minv</em>, <em>maxv</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectrangeopenright" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is greater than <cite>minv</cite> and 
less than or equal to <cite>maxv</cite>.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectrangeclosed">
<tt class="descclassname">petl.</tt><tt class="descname">selectrangeclosed</tt><big>(</big><em>table</em>, <em>field</em>, <em>minv</em>, <em>maxv</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectrangeclosed" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is greater than <cite>minv</cite> and 
less than <cite>maxv</cite>.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectcontains">
<tt class="descclassname">petl.</tt><tt class="descname">selectcontains</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectcontains" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field contains the given value.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.10.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.selectin">
<tt class="descclassname">petl.</tt><tt class="descname">selectin</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectin" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is a member of the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectnotin">
<tt class="descclassname">petl.</tt><tt class="descname">selectnotin</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectnotin" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is not a member of the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectis">
<tt class="descclassname">petl.</tt><tt class="descname">selectis</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectis" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field <cite>is</cite> the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectisnot">
<tt class="descclassname">petl.</tt><tt class="descname">selectisnot</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectisnot" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field <cite>is not</cite> the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectisinstance">
<tt class="descclassname">petl.</tt><tt class="descname">selectisinstance</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectisinstance" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is an instance of the given type.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectre">
<tt class="descclassname">petl.</tt><tt class="descname">selectre</tt><big>(</big><em>table</em>, <em>field</em>, <em>pattern</em>, <em>flags=0</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectre" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where a regular expression search using the given pattern on the
given field returns a match. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">selectre</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;aa&#39;  | 4     | 9.3   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;aaa&#39; | 2     | 88.2  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 1     | 23.3  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;ccc&#39; | 8     | 42.0  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;bb&#39;  | 7     | 100.9 |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |       |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">selectre</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;[ab]{2}&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;aa&#39;  | 4     | 9.3   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;aaa&#39; | 2     | 88.2  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;bb&#39;  | 7     | 100.9 |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>See also <a class="reference external" href="http://docs.python.org/library/re.html#re.search" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">re.search()</span></tt></a>.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.rowselect">
<tt class="descclassname">petl.</tt><tt class="descname">rowselect</tt><big>(</big><em>table</em>, <em>where</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.rowselect" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows matching a condition. The <cite>where</cite> argument should be a function
accepting a hybrid row object (supports accessing values either by 
position or by field name) as argument and returning True or False.</p>
<p class="deprecated">
<span class="versionmodified">Deprecated since version 0.10.</span></p>
<p>Use <a class="reference internal" href="#petl.select" title="petl.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a> instead, it supports the same signature.</p>
</dd></dl>

<dl class="function">
<dt id="petl.recordselect">
<tt class="descclassname">petl.</tt><tt class="descname">recordselect</tt><big>(</big><em>table</em>, <em>where</em>, <em>missing=None</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.recordselect" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows matching a condition. The <cite>where</cite> argument should be a function
accepting a record (row as dictionary of values indexed by field name) as 
argument and returning True or False.</p>
<p class="deprecated">
<span class="versionmodified">Deprecated since version 0.9.</span></p>
<p>Use <a class="reference internal" href="#petl.select" title="petl.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a> instead.</p>
</dd></dl>

<dl class="function">
<dt id="petl.rowlenselect">
<tt class="descclassname">petl.</tt><tt class="descname">rowlenselect</tt><big>(</big><em>table</em>, <em>n</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.rowlenselect" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows of length <cite>n</cite>.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.fieldselect">
<tt class="descclassname">petl.</tt><tt class="descname">fieldselect</tt><big>(</big><em>table</em>, <em>field</em>, <em>where</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.fieldselect" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows matching a condition. The <cite>where</cite> argument should be a function
accepting a single data value as argument and returning True or False.</p>
<p class="deprecated">
<span class="versionmodified">Deprecated since version 0.10.</span></p>
<p>Use <a class="reference internal" href="#petl.select" title="petl.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a> instead, it supports the same signature.</p>
</dd></dl>

<dl class="function">
<dt id="petl.facet">
<tt class="descclassname">petl.</tt><tt class="descname">facet</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.facet" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary mapping field values to tables. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">facet</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 4     | 9.3   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;a&#39;   | 2     | 88.2  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 1     | 23.3  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 8     | 42.0  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;d&#39;   | 7     | 100.9 |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |       |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span> <span class="o">=</span> <span class="n">facet</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;a&#39;, &#39;c&#39;, &#39;b&#39;, &#39;d&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">foo</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 4     | 9.3   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;a&#39;   | 2     | 88.2  |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">foo</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">])</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;c&#39;   | 8     | 42.0  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |       |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.rangefacet">
<tt class="descclassname">petl.</tt><tt class="descname">rangefacet</tt><big>(</big><em>table</em>, <em>field</em>, <em>width</em>, <em>minv=None</em>, <em>maxv=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.rangefacet" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary mapping ranges to tables. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rangefacet</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 3     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;a&#39;   | 7     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 9     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 4     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;d&#39;   | 3     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">rf</span> <span class="o">=</span> <span class="n">rangefacet</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rf</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[(1, 3), (3, 5), (5, 7), (7, 9)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">rf</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)])</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">rf</span><span class="p">[(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">)])</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 7     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 9     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Note that the last bin includes both edges.</p>
</dd></dl>

<dl class="function">
<dt id="petl.replace">
<tt class="descclassname">petl.</tt><tt class="descname">replace</tt><big>(</big><em>table</em>, <em>field</em>, <em>a</em>, <em>b</em><big>)</big><a class="headerlink" href="#petl.replace" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to replace all occurrences of <cite>a</cite> with <cite>b</cite> under the 
given field. See also <a class="reference internal" href="#petl.convert" title="petl.convert"><tt class="xref py py-func docutils literal"><span class="pre">convert()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.replaceall">
<tt class="descclassname">petl.</tt><tt class="descname">replaceall</tt><big>(</big><em>table</em>, <em>a</em>, <em>b</em><big>)</big><a class="headerlink" href="#petl.replaceall" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to replace all instances of <cite>a</cite> with <cite>b</cite> under all 
fields. See also <a class="reference internal" href="#petl.convertall" title="petl.convertall"><tt class="xref py py-func docutils literal"><span class="pre">convertall()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.convert">
<tt class="descclassname">petl.</tt><tt class="descname">convert</tt><big>(</big><em>table</em>, <em>field</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.convert" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform values under the given field via an arbitrary function or method
invocation. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">convert</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | &#39;2.4&#39; |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | &#39;5.7&#39; |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;C&#39;   | &#39;1.2&#39; |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | &#39;8.3&#39; |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># using the built-in float function:</span>
<span class="gp">... </span><span class="n">table2</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 2.4   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 5.7   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 1.2   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 8.3   |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># using a lambda function::</span>
<span class="gp">... </span><span class="n">table3</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">table2</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>    
<span class="go">+-------+-------------------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39;             |</span>
<span class="go">+=======+===================+</span>
<span class="go">| &#39;A&#39;   | 5.76              |</span>
<span class="go">+-------+-------------------+</span>
<span class="go">| &#39;B&#39;   | 32.49             |</span>
<span class="go">+-------+-------------------+</span>
<span class="go">| &#39;C&#39;   | 1.44              |</span>
<span class="go">+-------+-------------------+</span>
<span class="go">| &#39;D&#39;   | 68.89000000000001 |</span>
<span class="go">+-------+-------------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># a method of the data value can also be invoked by passing the method name</span>
<span class="gp">... </span><span class="n">table4</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;lower&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | &#39;2.4&#39; |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;5.7&#39; |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;1.2&#39; |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;d&#39;   | &#39;8.3&#39; |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># arguments to the method invocation can also be given</span>
<span class="gp">... </span><span class="n">table5</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">table4</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;replace&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;aa&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table5</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;aa&#39;  | &#39;2.4&#39; |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;5.7&#39; |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;1.2&#39; |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;d&#39;   | &#39;8.3&#39; |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># values can also be translated via a dictionary</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">table6</span><span class="p">)</span>
<span class="go">+----------+-------+</span>
<span class="go">| &#39;gender&#39; | &#39;age&#39; |</span>
<span class="go">+==========+=======+</span>
<span class="go">| &#39;M&#39;      | 12    |</span>
<span class="go">+----------+-------+</span>
<span class="go">| &#39;F&#39;      | 34    |</span>
<span class="go">+----------+-------+</span>
<span class="go">| &#39;-&#39;      | 56    |</span>
<span class="go">+----------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table7</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">table6</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;M&#39;</span><span class="p">:</span> <span class="s">&#39;male&#39;</span><span class="p">,</span> <span class="s">&#39;F&#39;</span><span class="p">:</span> <span class="s">&#39;female&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table7</span><span class="p">)</span>
<span class="go">+----------+-------+</span>
<span class="go">| &#39;gender&#39; | &#39;age&#39; |</span>
<span class="go">+==========+=======+</span>
<span class="go">| &#39;male&#39;   | 12    |</span>
<span class="go">+----------+-------+</span>
<span class="go">| &#39;female&#39; | 34    |</span>
<span class="go">+----------+-------+</span>
<span class="go">| &#39;-&#39;      | 56    |</span>
<span class="go">+----------+-------+</span>
</pre></div>
</div>
<p>Note that the <cite>field</cite> argument can be a list or tuple of fields, in which
case the conversion will be applied to all of the fields given.</p>
<p>Useful for, among other things, string manipulation, see also the methods
on the <a class="reference external" href="http://docs.python.org/library/stdtypes.html#string-methods">str</a> 
type.</p>
</dd></dl>

<dl class="function">
<dt id="petl.convertall">
<tt class="descclassname">petl.</tt><tt class="descname">convertall</tt><big>(</big><em>table</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.convertall" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to convert all fields in the table using a common 
function or mapping. See also <a class="reference internal" href="#petl.convert" title="petl.convert"><tt class="xref py py-func docutils literal"><span class="pre">convert()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.4.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.fieldconvert">
<tt class="descclassname">petl.</tt><tt class="descname">fieldconvert</tt><big>(</big><em>table</em>, <em>converters=None</em>, <em>failonerror=False</em>, <em>errorvalue=None</em><big>)</big><a class="headerlink" href="#petl.fieldconvert" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform values in one or more fields via functions or method invocations. 
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">fieldconvert</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+--------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39;  |</span>
<span class="go">+=======+========+</span>
<span class="go">| &#39;1&#39;   | &#39;2.4&#39;  |</span>
<span class="go">+-------+--------+</span>
<span class="go">| &#39;3&#39;   | &#39;7.9&#39;  |</span>
<span class="go">+-------+--------+</span>
<span class="go">| &#39;7&#39;   | &#39;2&#39;    |</span>
<span class="go">+-------+--------+</span>
<span class="go">| &#39;8.3&#39; | &#39;42.0&#39; |</span>
<span class="go">+-------+--------+</span>
<span class="go">| &#39;2&#39;   | &#39;abc&#39;  |</span>
<span class="go">+-------+--------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">fieldconvert</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| 1     | 2.4   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| 3     | 7.9   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| 7     | 2.0   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| None  | 42.0  |</span>
<span class="go">+-------+-------+</span>
<span class="go">| 2     | None  |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># converters can be added or updated using the suffix notation </span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+--------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39;  | &#39;baz&#39; |</span>
<span class="go">+=======+========+=======+</span>
<span class="go">| &#39;1&#39;   | &#39;2.4&#39;  | 14    |</span>
<span class="go">+-------+--------+-------+</span>
<span class="go">| &#39;3&#39;   | &#39;7.9&#39;  | 47    |</span>
<span class="go">+-------+--------+-------+</span>
<span class="go">| &#39;7&#39;   | &#39;2&#39;    | 11    |</span>
<span class="go">+-------+--------+-------+</span>
<span class="go">| &#39;8.3&#39; | &#39;42.0&#39; | 33    |</span>
<span class="go">+-------+--------+-------+</span>
<span class="go">| &#39;2&#39;   | &#39;abc&#39;  | &#39;xyz&#39; |</span>
<span class="go">+-------+--------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span> <span class="o">=</span> <span class="n">fieldconvert</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span><span class="p">[</span><span class="s">&#39;baz&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| 1     | 2.4   | 196   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 3     | 7.9   | 2209  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 7     | 2.0   | 121   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| None  | 42.0  | 1089  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 2     | None  | None  |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># converters can be functions, method names, or method names with arguments</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">table5</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;2&#39;   | &#39;A&#39;   | &#39;x&#39;   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;5&#39;   | &#39;B&#39;   | &#39;y&#39;   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;1&#39;   | &#39;C&#39;   | &#39;y&#39;   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;8.3&#39; | &#39;D&#39;   | &#39;z&#39;   |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table6</span> <span class="o">=</span> <span class="n">fieldconvert</span><span class="p">(</span><span class="n">table5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table6</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table6</span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;lower&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table6</span><span class="p">[</span><span class="s">&#39;baz&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;replace&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;yy&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table6</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| 2     | &#39;a&#39;   | &#39;x&#39;   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 5     | &#39;b&#39;   | &#39;yy&#39;  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 1     | &#39;c&#39;   | &#39;yy&#39;  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| None  | &#39;d&#39;   | &#39;z&#39;   |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>Converters can also be dictionaries, which will be used to translate values
under the specified field.</p>
</dd></dl>

<dl class="function">
<dt id="petl.convertnumbers">
<tt class="descclassname">petl.</tt><tt class="descname">convertnumbers</tt><big>(</big><em>table</em><big>)</big><a class="headerlink" href="#petl.convertnumbers" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to convert all field values to numbers where possible. 
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">convertnumbers</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+--------+--------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39;  | &#39;quux&#39; |</span>
<span class="go">+=======+=======+========+========+</span>
<span class="go">| &#39;1&#39;   | &#39;3.0&#39; | &#39;9+3j&#39; | &#39;aaa&#39;  |</span>
<span class="go">+-------+-------+--------+--------+</span>
<span class="go">| &#39;2&#39;   | &#39;1.3&#39; | &#39;7+2j&#39; | None   |</span>
<span class="go">+-------+-------+--------+--------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">convertnumbers</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+--------+--------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39;  | &#39;quux&#39; |</span>
<span class="go">+=======+=======+========+========+</span>
<span class="go">| 1     | 3.0   | (9+3j) | &#39;aaa&#39;  |</span>
<span class="go">+-------+-------+--------+--------+</span>
<span class="go">| 2     | 1.3   | (7+2j) | None   |</span>
<span class="go">+-------+-------+--------+--------+</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 0.4.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.search">
<tt class="descclassname">petl.</tt><tt class="descname">search</tt><big>(</big><em>table</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a regular expression search, returning rows that match a given
pattern, either anywhere in the row or within a specific field. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">search</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+------------+-------+--------------------------+</span>
<span class="go">| &#39;foo&#39;      | &#39;bar&#39; | &#39;baz&#39;                    |</span>
<span class="go">+============+=======+==========================+</span>
<span class="go">| &#39;orange&#39;   | 12    | &#39;oranges are nice fruit&#39; |</span>
<span class="go">+------------+-------+--------------------------+</span>
<span class="go">| &#39;mango&#39;    | 42    | &#39;I like them&#39;            |</span>
<span class="go">+------------+-------+--------------------------+</span>
<span class="go">| &#39;banana&#39;   | 74    | &#39;lovely too&#39;             |</span>
<span class="go">+------------+-------+--------------------------+</span>
<span class="go">| &#39;cucumber&#39; | 41    | &#39;better than mango&#39;      |</span>
<span class="go">+------------+-------+--------------------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># search any field</span>
<span class="gp">... </span><span class="n">table2</span> <span class="o">=</span> <span class="n">search</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;.g.&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+------------+-------+--------------------------+</span>
<span class="go">| &#39;foo&#39;      | &#39;bar&#39; | &#39;baz&#39;                    |</span>
<span class="go">+============+=======+==========================+</span>
<span class="go">| &#39;orange&#39;   | 12    | &#39;oranges are nice fruit&#39; |</span>
<span class="go">+------------+-------+--------------------------+</span>
<span class="go">| &#39;mango&#39;    | 42    | &#39;I like them&#39;            |</span>
<span class="go">+------------+-------+--------------------------+</span>
<span class="go">| &#39;cucumber&#39; | 41    | &#39;better than mango&#39;      |</span>
<span class="go">+------------+-------+--------------------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># search a specific field</span>
<span class="gp">... </span><span class="n">table3</span> <span class="o">=</span> <span class="n">search</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;.g.&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+----------+-------+--------------------------+</span>
<span class="go">| &#39;foo&#39;    | &#39;bar&#39; | &#39;baz&#39;                    |</span>
<span class="go">+==========+=======+==========================+</span>
<span class="go">| &#39;orange&#39; | 12    | &#39;oranges are nice fruit&#39; |</span>
<span class="go">+----------+-------+--------------------------+</span>
<span class="go">| &#39;mango&#39;  | 42    | &#39;I like them&#39;            |</span>
<span class="go">+----------+-------+--------------------------+</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 0.10.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.sub">
<tt class="descclassname">petl.</tt><tt class="descname">sub</tt><big>(</big><em>table</em>, <em>field</em>, <em>pattern</em>, <em>repl</em>, <em>count=0</em>, <em>flags=0</em><big>)</big><a class="headerlink" href="#petl.sub" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to convert values under the given field using a 
regular expression substitution. See also <a class="reference external" href="http://docs.python.org/library/re.html#re.sub" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">re.sub()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.10.</span></p>
<p>Renamed &#8216;resub&#8217; to &#8216;sub&#8217;.</p>
</dd></dl>

<dl class="function">
<dt id="petl.split">
<tt class="descclassname">petl.</tt><tt class="descname">split</tt><big>(</big><em>table</em>, <em>field</em>, <em>pattern</em>, <em>newfields=None</em>, <em>include_original=False</em>, <em>maxsplit=0</em>, <em>flags=0</em><big>)</big><a class="headerlink" href="#petl.split" title="Permalink to this definition">¶</a></dt>
<dd><p>Extend the table with one or more new fields with values generated by 
splitting an existing value around occurrences of a regular expression. 
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">split</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| &#39;id&#39; | &#39;variable&#39; | &#39;value&#39; |</span>
<span class="go">+======+============+=========+</span>
<span class="go">| &#39;1&#39;  | &#39;parad1&#39;   | &#39;12&#39;    |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| &#39;2&#39;  | &#39;parad2&#39;   | &#39;15&#39;    |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| &#39;3&#39;  | &#39;tempd1&#39;   | &#39;18&#39;    |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| &#39;4&#39;  | &#39;tempd2&#39;   | &#39;19&#39;    |</span>
<span class="go">+------+------------+---------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">split</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;variable&#39;</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;variable&#39;</span><span class="p">,</span> <span class="s">&#39;day&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+------+---------+------------+-------+</span>
<span class="go">| &#39;id&#39; | &#39;value&#39; | &#39;variable&#39; | &#39;day&#39; |</span>
<span class="go">+======+=========+============+=======+</span>
<span class="go">| &#39;1&#39;  | &#39;12&#39;    | &#39;para&#39;     | &#39;1&#39;   |</span>
<span class="go">+------+---------+------------+-------+</span>
<span class="go">| &#39;2&#39;  | &#39;15&#39;    | &#39;para&#39;     | &#39;2&#39;   |</span>
<span class="go">+------+---------+------------+-------+</span>
<span class="go">| &#39;3&#39;  | &#39;18&#39;    | &#39;temp&#39;     | &#39;1&#39;   |</span>
<span class="go">+------+---------+------------+-------+</span>
<span class="go">| &#39;4&#39;  | &#39;19&#39;    | &#39;temp&#39;     | &#39;2&#39;   |</span>
<span class="go">+------+---------+------------+-------+</span>
</pre></div>
</div>
<p>See also <a class="reference external" href="http://docs.python.org/library/re.html#re.split" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">re.split()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.capture">
<tt class="descclassname">petl.</tt><tt class="descname">capture</tt><big>(</big><em>table</em>, <em>field</em>, <em>pattern</em>, <em>newfields=None</em>, <em>include_original=False</em>, <em>flags=0</em><big>)</big><a class="headerlink" href="#petl.capture" title="Permalink to this definition">¶</a></dt>
<dd><p>Extend the table with one or more new fields with values captured from an
existing field searched via a regular expression.</p>
<p>By default the field on which the capture is performed is omitted. It can
be included using the <cite>include_original</cite> argument.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">capture</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| &#39;id&#39; | &#39;variable&#39; | &#39;value&#39; |</span>
<span class="go">+======+============+=========+</span>
<span class="go">| &#39;1&#39;  | &#39;A1&#39;       | &#39;12&#39;    |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| &#39;2&#39;  | &#39;A2&#39;       | &#39;15&#39;    |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| &#39;3&#39;  | &#39;B1&#39;       | &#39;18&#39;    |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| &#39;4&#39;  | &#39;C12&#39;      | &#39;19&#39;    |</span>
<span class="go">+------+------------+---------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">capture</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;variable&#39;</span><span class="p">,</span> <span class="s">&#39;(\w)(\d+)&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;treat&#39;</span><span class="p">,</span> <span class="s">&#39;time&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+------+---------+---------+--------+</span>
<span class="go">| &#39;id&#39; | &#39;value&#39; | &#39;treat&#39; | &#39;time&#39; |</span>
<span class="go">+======+=========+=========+========+</span>
<span class="go">| &#39;1&#39;  | &#39;12&#39;    | &#39;A&#39;     | &#39;1&#39;    |</span>
<span class="go">+------+---------+---------+--------+</span>
<span class="go">| &#39;2&#39;  | &#39;15&#39;    | &#39;A&#39;     | &#39;2&#39;    |</span>
<span class="go">+------+---------+---------+--------+</span>
<span class="go">| &#39;3&#39;  | &#39;18&#39;    | &#39;B&#39;     | &#39;1&#39;    |</span>
<span class="go">+------+---------+---------+--------+</span>
<span class="go">| &#39;4&#39;  | &#39;19&#39;    | &#39;C&#39;     | &#39;12&#39;   |</span>
<span class="go">+------+---------+---------+--------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># using the include_original argument</span>
<span class="gp">... </span><span class="n">table3</span> <span class="o">=</span> <span class="n">capture</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;variable&#39;</span><span class="p">,</span> <span class="s">&#39;(\w)(\d+)&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;treat&#39;</span><span class="p">,</span> <span class="s">&#39;time&#39;</span><span class="p">],</span> <span class="n">include_original</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+------+------------+---------+---------+--------+</span>
<span class="go">| &#39;id&#39; | &#39;variable&#39; | &#39;value&#39; | &#39;treat&#39; | &#39;time&#39; |</span>
<span class="go">+======+============+=========+=========+========+</span>
<span class="go">| &#39;1&#39;  | &#39;A1&#39;       | &#39;12&#39;    | &#39;A&#39;     | &#39;1&#39;    |</span>
<span class="go">+------+------------+---------+---------+--------+</span>
<span class="go">| &#39;2&#39;  | &#39;A2&#39;       | &#39;15&#39;    | &#39;A&#39;     | &#39;2&#39;    |</span>
<span class="go">+------+------------+---------+---------+--------+</span>
<span class="go">| &#39;3&#39;  | &#39;B1&#39;       | &#39;18&#39;    | &#39;B&#39;     | &#39;1&#39;    |</span>
<span class="go">+------+------------+---------+---------+--------+</span>
<span class="go">| &#39;4&#39;  | &#39;C12&#39;      | &#39;19&#39;    | &#39;C&#39;     | &#39;12&#39;   |</span>
<span class="go">+------+------------+---------+---------+--------+</span>
</pre></div>
</div>
<p>See also <a class="reference external" href="http://docs.python.org/library/re.html#re.search" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">re.search()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.unpack">
<tt class="descclassname">petl.</tt><tt class="descname">unpack</tt><big>(</big><em>table</em>, <em>field</em>, <em>newfields=None</em>, <em>maxunpack=None</em>, <em>include_original=False</em><big>)</big><a class="headerlink" href="#petl.unpack" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpack data values that are lists or tuples. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">unpack</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+------------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39;      |</span>
<span class="go">+=======+============+</span>
<span class="go">| 1     | [&#39;a&#39;, &#39;b&#39;] |</span>
<span class="go">+-------+------------+</span>
<span class="go">| 2     | [&#39;c&#39;, &#39;d&#39;] |</span>
<span class="go">+-------+------------+</span>
<span class="go">| 3     | [&#39;e&#39;, &#39;f&#39;] |</span>
<span class="go">+-------+------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="s">&#39;quux&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;foo&#39; | &#39;baz&#39; | &#39;quux&#39; |</span>
<span class="go">+=======+=======+========+</span>
<span class="go">| 1     | &#39;a&#39;   | &#39;b&#39;    |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| 2     | &#39;c&#39;   | &#39;d&#39;    |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| 3     | &#39;e&#39;   | &#39;f&#39;    |</span>
<span class="go">+-------+-------+--------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.unpackdict">
<tt class="descclassname">petl.</tt><tt class="descname">unpackdict</tt><big>(</big><em>table</em>, <em>field</em>, <em>keys=None</em>, <em>includeoriginal=False</em>, <em>samplesize=1000</em>, <em>missing=None</em><big>)</big><a class="headerlink" href="#petl.unpackdict" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpack dictionary values into separate fields. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">unpackdict</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+---------------------------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39;                     |</span>
<span class="go">+=======+===========================+</span>
<span class="go">| 1     | {&#39;quux&#39;: &#39;b&#39;, &#39;baz&#39;: &#39;a&#39;} |</span>
<span class="go">+-------+---------------------------+</span>
<span class="go">| 2     | {&#39;quux&#39;: &#39;d&#39;, &#39;baz&#39;: &#39;c&#39;} |</span>
<span class="go">+-------+---------------------------+</span>
<span class="go">| 3     | {&#39;quux&#39;: &#39;f&#39;, &#39;baz&#39;: &#39;e&#39;} |</span>
<span class="go">+-------+---------------------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">unpackdict</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;foo&#39; | &#39;baz&#39; | &#39;quux&#39; |</span>
<span class="go">+=======+=======+========+</span>
<span class="go">| 1     | &#39;a&#39;   | &#39;b&#39;    |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| 2     | &#39;c&#39;   | &#39;d&#39;    |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| 3     | &#39;e&#39;   | &#39;f&#39;    |</span>
<span class="go">+-------+-------+--------+</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 0.10.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.fieldmap">
<tt class="descclassname">petl.</tt><tt class="descname">fieldmap</tt><big>(</big><em>table</em>, <em>mappings=None</em>, <em>failonerror=False</em>, <em>errorvalue=None</em><big>)</big><a class="headerlink" href="#petl.fieldmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform a table, mapping fields arbitrarily between input and output. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">fieldmap</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+------+----------+-------+----------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;sex&#39;    | &#39;age&#39; | &#39;height&#39; | &#39;weight&#39; |</span>
<span class="go">+======+==========+=======+==========+==========+</span>
<span class="go">| 1    | &#39;male&#39;   | 16    | 1.45     | 62.0     |</span>
<span class="go">+------+----------+-------+----------+----------+</span>
<span class="go">| 2    | &#39;female&#39; | 19    | 1.34     | 55.4     |</span>
<span class="go">+------+----------+-------+----------+----------+</span>
<span class="go">| 3    | &#39;female&#39; | 17    | 1.78     | 74.4     |</span>
<span class="go">+------+----------+-------+----------+----------+</span>
<span class="go">| 4    | &#39;male&#39;   | 21    | 1.33     | 45.2     |</span>
<span class="go">+------+----------+-------+----------+----------+</span>
<span class="go">| 5    | &#39;-&#39;      | 25    | 1.65     | 51.9     |</span>
<span class="go">+------+----------+-------+----------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mappings</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># rename a field</span>
<span class="gp">... </span><span class="n">mappings</span><span class="p">[</span><span class="s">&#39;subject_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;id&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># translate a field</span>
<span class="gp">... </span><span class="n">mappings</span><span class="p">[</span><span class="s">&#39;gender&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;sex&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;male&#39;</span><span class="p">:</span> <span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;female&#39;</span><span class="p">:</span> <span class="s">&#39;F&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># apply a calculation to a field</span>
<span class="gp">... </span><span class="n">mappings</span><span class="p">[</span><span class="s">&#39;age_months&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span> <span class="o">*</span> <span class="mi">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># apply a calculation to a combination of fields</span>
<span class="gp">... </span><span class="n">mappings</span><span class="p">[</span><span class="s">&#39;bmi&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">rec</span><span class="p">:</span> <span class="n">rec</span><span class="p">[</span><span class="s">&#39;weight&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">rec</span><span class="p">[</span><span class="s">&#39;height&#39;</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="c"># transform and inspect the output</span>
<span class="gp">... </span><span class="n">table2</span> <span class="o">=</span> <span class="n">fieldmap</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">mappings</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| &#39;subject_id&#39; | &#39;gender&#39; | &#39;age_months&#39; | &#39;bmi&#39;              |</span>
<span class="go">+==============+==========+==============+====================+</span>
<span class="go">| 1            | &#39;M&#39;      | 192          | 29.48870392390012  |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 2            | &#39;F&#39;      | 228          | 30.8531967030519   |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 3            | &#39;F&#39;      | 204          | 23.481883600555488 |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 4            | &#39;M&#39;      | 252          | 25.55260331279326  |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 5            | &#39;-&#39;      | 300          | 19.0633608815427   |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># field mappings can also be added and/or updated after the table is created </span>
<span class="gp">... </span><span class="c"># via the suffix notation</span>
<span class="gp">... </span><span class="n">table3</span> <span class="o">=</span> <span class="n">fieldmap</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span><span class="p">[</span><span class="s">&#39;subject_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;id&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span><span class="p">[</span><span class="s">&#39;gender&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;sex&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;male&#39;</span><span class="p">:</span> <span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;female&#39;</span><span class="p">:</span> <span class="s">&#39;F&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span><span class="p">[</span><span class="s">&#39;age_months&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span> <span class="o">*</span> <span class="mi">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># use an expression string this time</span>
<span class="gp">... </span><span class="n">table3</span><span class="p">[</span><span class="s">&#39;bmi&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;{weight} / {height}**2&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| &#39;subject_id&#39; | &#39;gender&#39; | &#39;age_months&#39; | &#39;bmi&#39;              |</span>
<span class="go">+==============+==========+==============+====================+</span>
<span class="go">| 1            | &#39;M&#39;      | 192          | 29.48870392390012  |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 2            | &#39;F&#39;      | 228          | 30.8531967030519   |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 3            | &#39;F&#39;      | 204          | 23.481883600555488 |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 4            | &#39;M&#39;      | 252          | 25.55260331279326  |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 5            | &#39;-&#39;      | 300          | 19.0633608815427   |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
</pre></div>
</div>
<p>Note also that the mapping value can be an expression string, which will be 
converted to a lambda function via <a class="reference internal" href="#petl.expr" title="petl.expr"><tt class="xref py py-func docutils literal"><span class="pre">expr()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.rowmap">
<tt class="descclassname">petl.</tt><tt class="descname">rowmap</tt><big>(</big><em>table</em>, <em>rowmapper</em>, <em>fields</em>, <em>failonerror=False</em>, <em>missing=None</em><big>)</big><a class="headerlink" href="#petl.rowmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform rows via an arbitrary function. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rowmap</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+------+----------+-------+----------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;sex&#39;    | &#39;age&#39; | &#39;height&#39; | &#39;weight&#39; |</span>
<span class="go">+======+==========+=======+==========+==========+</span>
<span class="go">| 1    | &#39;male&#39;   | 16    | 1.45     | 62.0     |</span>
<span class="go">+------+----------+-------+----------+----------+</span>
<span class="go">| 2    | &#39;female&#39; | 19    | 1.34     | 55.4     |</span>
<span class="go">+------+----------+-------+----------+----------+</span>
<span class="go">| 3    | &#39;female&#39; | 17    | 1.78     | 74.4     |</span>
<span class="go">+------+----------+-------+----------+----------+</span>
<span class="go">| 4    | &#39;male&#39;   | 21    | 1.33     | 45.2     |</span>
<span class="go">+------+----------+-------+----------+----------+</span>
<span class="go">| 5    | &#39;-&#39;      | 25    | 1.65     | 51.9     |</span>
<span class="go">+------+----------+-------+----------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">rowmapper</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">transmf</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;male&#39;</span><span class="p">:</span> <span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;female&#39;</span><span class="p">:</span> <span class="s">&#39;F&#39;</span><span class="p">}</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">transmf</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">transmf</span> <span class="k">else</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="mi">12</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">/</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">rowmap</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">rowmapper</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;subject_id&#39;</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;age_months&#39;</span><span class="p">,</span> <span class="s">&#39;bmi&#39;</span><span class="p">])</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>    
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| &#39;subject_id&#39; | &#39;gender&#39; | &#39;age_months&#39; | &#39;bmi&#39;              |</span>
<span class="go">+==============+==========+==============+====================+</span>
<span class="go">| 1            | &#39;M&#39;      | 192          | 29.48870392390012  |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 2            | &#39;F&#39;      | 228          | 30.8531967030519   |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 3            | &#39;F&#39;      | 204          | 23.481883600555488 |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 4            | &#39;M&#39;      | 252          | 25.55260331279326  |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 5            | &#39;-&#39;      | 300          | 19.0633608815427   |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
</pre></div>
</div>
<p>The <cite>rowmapper</cite> function should return a single row (list or tuple).</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.9.</span></p>
<p>Hybrid row objects supporting data value access by either position or by 
field name are now passed to the <cite>rowmapper</cite> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.recordmap">
<tt class="descclassname">petl.</tt><tt class="descname">recordmap</tt><big>(</big><em>table</em>, <em>recmapper</em>, <em>fields</em>, <em>failonerror=False</em><big>)</big><a class="headerlink" href="#petl.recordmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform records via an arbitrary function.</p>
<p class="deprecated">
<span class="versionmodified">Deprecated since version 0.9.</span></p>
<p>Use <a class="reference internal" href="#petl.rowmap" title="petl.rowmap"><tt class="xref py py-func docutils literal"><span class="pre">rowmap()</span></tt></a> insteand.</p>
</dd></dl>

<dl class="function">
<dt id="petl.rowmapmany">
<tt class="descclassname">petl.</tt><tt class="descname">rowmapmany</tt><big>(</big><em>table</em>, <em>rowgenerator</em>, <em>fields</em>, <em>failonerror=False</em>, <em>missing=None</em><big>)</big><a class="headerlink" href="#petl.rowmapmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Map each input row to any number of output rows via an arbitrary function.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rowmapmany</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+------+----------+-------+----------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;sex&#39;    | &#39;age&#39; | &#39;height&#39; | &#39;weight&#39; |</span>
<span class="go">+======+==========+=======+==========+==========+</span>
<span class="go">| 1    | &#39;male&#39;   | 16    | 1.45     | 62.0     |</span>
<span class="go">+------+----------+-------+----------+----------+</span>
<span class="go">| 2    | &#39;female&#39; | 19    | 1.34     | 55.4     |</span>
<span class="go">+------+----------+-------+----------+----------+</span>
<span class="go">| 3    | &#39;-&#39;      | 17    | 1.78     | 74.4     |</span>
<span class="go">+------+----------+-------+----------+----------+</span>
<span class="go">| 4    | &#39;male&#39;   | 21    | 1.33     |          |</span>
<span class="go">+------+----------+-------+----------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">rowgenerator</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">transmf</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;male&#39;</span><span class="p">:</span> <span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;female&#39;</span><span class="p">:</span> <span class="s">&#39;F&#39;</span><span class="p">}</span>
<span class="gp">... </span>    <span class="k">yield</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="n">transmf</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">transmf</span> <span class="k">else</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
<span class="gp">... </span>    <span class="k">yield</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&#39;age_months&#39;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="mi">12</span><span class="p">]</span>
<span class="gp">... </span>    <span class="k">yield</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&#39;bmi&#39;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">/</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">rowmapmany</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">rowgenerator</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;subject_id&#39;</span><span class="p">,</span> <span class="s">&#39;variable&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">])</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| &#39;subject_id&#39; | &#39;variable&#39;   | &#39;value&#39;            |</span>
<span class="go">+==============+==============+====================+</span>
<span class="go">| 1            | &#39;gender&#39;     | &#39;M&#39;                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 1            | &#39;age_months&#39; | 192                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 1            | &#39;bmi&#39;        | 29.48870392390012  |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 2            | &#39;gender&#39;     | &#39;F&#39;                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 2            | &#39;age_months&#39; | 228                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 2            | &#39;bmi&#39;        | 30.8531967030519   |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 3            | &#39;gender&#39;     | &#39;-&#39;                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 3            | &#39;age_months&#39; | 204                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 3            | &#39;bmi&#39;        | 23.481883600555488 |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 4            | &#39;gender&#39;     | &#39;M&#39;                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
</pre></div>
</div>
<p>The <cite>rowgenerator</cite> function should yield zero or more rows (lists or tuples).</p>
<p>See also the <a class="reference internal" href="#petl.melt" title="petl.melt"><tt class="xref py py-func docutils literal"><span class="pre">melt()</span></tt></a> function.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.9.</span></p>
<p>Hybrid row objects supporting data value access by either position or by 
field name are now passed to the <cite>rowgenerator</cite> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.recordmapmany">
<tt class="descclassname">petl.</tt><tt class="descname">recordmapmany</tt><big>(</big><em>table</em>, <em>rowgenerator</em>, <em>fields</em>, <em>failonerror=False</em><big>)</big><a class="headerlink" href="#petl.recordmapmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Map each input row (as a record) to any number of output rows via an 
arbitrary function.</p>
<p class="deprecated">
<span class="versionmodified">Deprecated since version 0.9.</span></p>
<p>Use <a class="reference internal" href="#petl.rowmapmany" title="petl.rowmapmany"><tt class="xref py py-func docutils literal"><span class="pre">rowmapmany()</span></tt></a> instead.</p>
</dd></dl>

<dl class="function">
<dt id="petl.cat">
<tt class="descclassname">petl.</tt><tt class="descname">cat</tt><big>(</big><em>*tables</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.cat" title="Permalink to this definition">¶</a></dt>
<dd><p>Concatenate data from two or more tables. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">cat</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| 1     | &#39;A&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| 2     | &#39;B&#39;   |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;C&#39;   | True  |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | False |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">cat</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| 1     | &#39;A&#39;   | None  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 2     | &#39;B&#39;   | None  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| None  | &#39;C&#39;   | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| None  | &#39;D&#39;   | False |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># can also be used to square up a single table with uneven rows</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+-------+-------+--------+------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39;  |      |</span>
<span class="go">+=======+=======+========+======+</span>
<span class="go">| &#39;A&#39;   | 1     | 2      |      |</span>
<span class="go">+-------+-------+--------+------+</span>
<span class="go">| &#39;B&#39;   | &#39;2&#39;   | &#39;3.4&#39;  |      |</span>
<span class="go">+-------+-------+--------+------+</span>
<span class="go">| u&#39;B&#39;  | u&#39;3&#39;  | u&#39;7.8&#39; | True |</span>
<span class="go">+-------+-------+--------+------+</span>
<span class="go">| &#39;D&#39;   | &#39;xyz&#39; | 9.0    |      |</span>
<span class="go">+-------+-------+--------+------+</span>
<span class="go">| &#39;E&#39;   | None  |        |      |</span>
<span class="go">+-------+-------+--------+------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">cat</span><span class="p">(</span><span class="n">table4</span><span class="p">))</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39;  |</span>
<span class="go">+=======+=======+========+</span>
<span class="go">| &#39;A&#39;   | 1     | 2      |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;B&#39;   | &#39;2&#39;   | &#39;3.4&#39;  |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| u&#39;B&#39;  | u&#39;3&#39;  | u&#39;7.8&#39; |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;D&#39;   | &#39;xyz&#39; | 9.0    |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;E&#39;   | None  | None   |</span>
<span class="go">+-------+-------+--------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># use the header keyword argument to specify a fixed set of fields </span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">table5</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;bar&#39; | &#39;foo&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table6</span> <span class="o">=</span> <span class="n">cat</span><span class="p">(</span><span class="n">table5</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table6</span><span class="p">)</span>
<span class="go">+------+-------+------+-------+------+</span>
<span class="go">| &#39;A&#39;  | &#39;foo&#39; | &#39;B&#39;  | &#39;bar&#39; | &#39;C&#39;  |</span>
<span class="go">+======+=======+======+=======+======+</span>
<span class="go">| None | 1     | None | &#39;A&#39;   | None |</span>
<span class="go">+------+-------+------+-------+------+</span>
<span class="go">| None | 2     | None | &#39;B&#39;   | None |</span>
<span class="go">+------+-------+------+-------+------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># using the header keyword argument with two input tables</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">table7</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;bar&#39; | &#39;foo&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table8</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;C&#39;   | True  |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | False |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table9</span> <span class="o">=</span> <span class="n">cat</span><span class="p">(</span><span class="n">table7</span><span class="p">,</span> <span class="n">table8</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table9</span><span class="p">)</span>
<span class="go">+------+-------+------+-------+------+</span>
<span class="go">| &#39;A&#39;  | &#39;foo&#39; | &#39;B&#39;  | &#39;bar&#39; | &#39;C&#39;  |</span>
<span class="go">+======+=======+======+=======+======+</span>
<span class="go">| None | 1     | None | &#39;A&#39;   | None |</span>
<span class="go">+------+-------+------+-------+------+</span>
<span class="go">| None | 2     | None | &#39;B&#39;   | None |</span>
<span class="go">+------+-------+------+-------+------+</span>
<span class="go">| None | None  | None | &#39;C&#39;   | None |</span>
<span class="go">+------+-------+------+-------+------+</span>
<span class="go">| None | None  | None | &#39;D&#39;   | None |</span>
<span class="go">+------+-------+------+-------+------+    </span>
</pre></div>
</div>
<p>Note that the tables do not need to share exactly the same fields, any 
missing fields will be padded with <cite>None</cite> or whatever is provided via the 
<cite>missing</cite> keyword argument.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.5.</span></p>
<p>By default, the fields for the output table will be determined as the 
union of all fields found in the input tables. Use the <cite>header</cite> keyword 
argument to override this behaviour and specify a fixed set of fields for 
the output table.</p>
</dd></dl>

<dl class="function">
<dt id="petl.duplicates">
<tt class="descclassname">petl.</tt><tt class="descname">duplicates</tt><big>(</big><em>table</em>, <em>key</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.duplicates" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows with duplicate values under a given key. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">duplicates</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | 2.0   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     | 3.4   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 6     | 9.3   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 3     | 7.8   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     | 12.3  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;E&#39;   | None  | 1.3   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 4     | 14.5  |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">duplicates</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;B&#39;   | 2     | 3.4   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 3     | 7.8   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     | 12.3  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 6     | 9.3   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 4     | 14.5  |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># compound keys are supported</span>
<span class="gp">... </span><span class="n">table3</span> <span class="o">=</span> <span class="n">duplicates</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;B&#39;   | 2     | 3.4   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     | 12.3  |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.unique">
<tt class="descclassname">petl.</tt><tt class="descname">unique</tt><big>(</big><em>table</em>, <em>key</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows with unique values under a given key. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">unique</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39;  |</span>
<span class="go">+=======+=======+========+</span>
<span class="go">| &#39;A&#39;   | 1     | 2      |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;B&#39;   | &#39;2&#39;   | &#39;3.4&#39;  |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;D&#39;   | &#39;xyz&#39; | 9.0    |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;B&#39;   | u&#39;3&#39;  | u&#39;7.8&#39; |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;B&#39;   | &#39;2&#39;   | 42     |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;E&#39;   | None  | None   |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;D&#39;   | 4     | 12.3   |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;F&#39;   | 7     | 2.3    |</span>
<span class="go">+-------+-------+--------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">unique</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | 2     |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;E&#39;   | None  | None  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 7     | 2.3   |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.10.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.conflicts">
<tt class="descclassname">petl.</tt><tt class="descname">conflicts</tt><big>(</big><em>table</em>, <em>key</em>, <em>missing=None</em>, <em>include=None</em>, <em>exclude=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.conflicts" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows with the same key value but differing in some other field. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">conflicts</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | 2.7   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     | None  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 3     | 9.4   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | None  | 7.8   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;E&#39;   | None  |       |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 3     | 12.3  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;A&#39;   | 2     | None  |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">conflicts</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | 2.7   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;A&#39;   | 2     | None  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 3     | 9.4   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 3     | 12.3  |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>Missing values are not considered conflicts. By default, <cite>None</cite> is treated
as the missing value, this can be changed via the <cite>missing</cite> keyword 
argument.</p>
<p>One or more fields can be ignored when determining conflicts by providing
the <cite>exclude</cite> keyword argument. Alternatively, fields to use when determining
conflicts can be specified explicitly with the <cite>include</cite> keyword argument.</p>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.8.</span></p>
<p>Added the <cite>include</cite> and <cite>exclude</cite> keyword arguments. The <cite>exclude</cite> keyword 
argument replaces the <cite>ignore</cite> keyword argument in previous versions.</p>
</dd></dl>

<dl class="function">
<dt id="petl.sort">
<tt class="descclassname">petl.</tt><tt class="descname">sort</tt><big>(</big><em>table</em>, <em>key=None</em>, <em>reverse=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the table. Field names or indices (from zero) can be used to specify 
the key. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">sort</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;C&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;A&#39;   | 9     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;A&#39;   | 6     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 10    |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">sort</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 9     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;A&#39;   | 6     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 10    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># sorting by compound key is supported</span>
<span class="gp">... </span><span class="n">table3</span> <span class="o">=</span> <span class="n">sort</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 6     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;A&#39;   | 9     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 10    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># if no key is specified, the default is a lexical sort</span>
<span class="gp">... </span><span class="n">table4</span> <span class="o">=</span> <span class="n">sort</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 6     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;A&#39;   | 9     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 10    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>The <cite>buffersize</cite> argument should be an <cite>int</cite> or <cite>None</cite>.</p>
<p>If the number of rows in the table is less than <cite>buffersize</cite>, the table
will be sorted in memory. Otherwise, the table is sorted in chunks of
no more than <cite>buffersize</cite> rows, each chunk is written to a temporary file, 
and then a merge sort is performed on the temporary files.</p>
<p>If <cite>buffersize</cite> is <cite>None</cite>, the value of <cite>petl.transform.defaultbuffersize</cite> 
will be used. By default this is set to 100000 rows, but can be changed, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">petl.transform</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">petl</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">defaultbuffersize</span> <span class="o">=</span> <span class="mi">500000</span>
</pre></div>
</div>
<p>If <cite>petl.transform.defaultbuffersize</cite> is set to <cite>None</cite>, this forces all
sorting to be done entirely in memory.</p>
</dd></dl>

<dl class="function">
<dt id="petl.join">
<tt class="descclassname">petl.</tt><tt class="descname">join</tt><big>(</big><em>left</em>, <em>right</em>, <em>key=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.join" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform an equi-join on the given tables. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">join</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; |</span>
<span class="go">+======+==========+</span>
<span class="go">| 1    | &#39;blue&#39;   |</span>
<span class="go">+------+----------+</span>
<span class="go">| 2    | &#39;red&#39;    |</span>
<span class="go">+------+----------+</span>
<span class="go">| 3    | &#39;purple&#39; |</span>
<span class="go">+------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+------+-----------+</span>
<span class="go">| &#39;id&#39; | &#39;shape&#39;   |</span>
<span class="go">+======+===========+</span>
<span class="go">| 1    | &#39;circle&#39;  |</span>
<span class="go">+------+-----------+</span>
<span class="go">| 3    | &#39;square&#39;  |</span>
<span class="go">+------+-----------+</span>
<span class="go">| 4    | &#39;ellipse&#39; |</span>
<span class="go">+------+-----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+------+----------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; | &#39;shape&#39;  |</span>
<span class="go">+======+==========+==========+</span>
<span class="go">| 1    | &#39;blue&#39;   | &#39;circle&#39; |</span>
<span class="go">+------+----------+----------+</span>
<span class="go">| 3    | &#39;purple&#39; | &#39;square&#39; |</span>
<span class="go">+------+----------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># if no key is given, a natural join is tried</span>
<span class="gp">... </span><span class="n">table4</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+------+----------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; | &#39;shape&#39;  |</span>
<span class="go">+======+==========+==========+</span>
<span class="go">| 1    | &#39;blue&#39;   | &#39;circle&#39; |</span>
<span class="go">+------+----------+----------+</span>
<span class="go">| 3    | &#39;purple&#39; | &#39;square&#39; |</span>
<span class="go">+------+----------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># note behaviour if the key is not unique in either or both tables</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">table5</span><span class="p">)</span>
<span class="go">+------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; |</span>
<span class="go">+======+==========+</span>
<span class="go">| 1    | &#39;blue&#39;   |</span>
<span class="go">+------+----------+</span>
<span class="go">| 1    | &#39;red&#39;    |</span>
<span class="go">+------+----------+</span>
<span class="go">| 2    | &#39;purple&#39; |</span>
<span class="go">+------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table6</span><span class="p">)</span>
<span class="go">+------+-----------+</span>
<span class="go">| &#39;id&#39; | &#39;shape&#39;   |</span>
<span class="go">+======+===========+</span>
<span class="go">| 1    | &#39;circle&#39;  |</span>
<span class="go">+------+-----------+</span>
<span class="go">| 1    | &#39;square&#39;  |</span>
<span class="go">+------+-----------+</span>
<span class="go">| 2    | &#39;ellipse&#39; |</span>
<span class="go">+------+-----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table7</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">table5</span><span class="p">,</span> <span class="n">table6</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table7</span><span class="p">)</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; | &#39;shape&#39;   |</span>
<span class="go">+======+==========+===========+</span>
<span class="go">| 1    | &#39;blue&#39;   | &#39;circle&#39;  |</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| 1    | &#39;blue&#39;   | &#39;square&#39;  |</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| 1    | &#39;red&#39;    | &#39;circle&#39;  |</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| 1    | &#39;red&#39;    | &#39;square&#39;  |</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| 2    | &#39;purple&#39; | &#39;ellipse&#39; |</span>
<span class="go">+------+----------+-----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># compound keys are supported</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">table8</span><span class="p">)</span>
<span class="go">+------+--------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;time&#39; | &#39;height&#39; |</span>
<span class="go">+======+========+==========+</span>
<span class="go">| 1    | 1      | 12.3     |</span>
<span class="go">+------+--------+----------+</span>
<span class="go">| 1    | 2      | 34.5     |</span>
<span class="go">+------+--------+----------+</span>
<span class="go">| 2    | 1      | 56.7     |</span>
<span class="go">+------+--------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table9</span><span class="p">)</span>
<span class="go">+------+--------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;time&#39; | &#39;weight&#39; |</span>
<span class="go">+======+========+==========+</span>
<span class="go">| 1    | 2      | 4.5      |</span>
<span class="go">+------+--------+----------+</span>
<span class="go">| 2    | 1      | 6.7      |</span>
<span class="go">+------+--------+----------+</span>
<span class="go">| 2    | 2      | 8.9      |</span>
<span class="go">+------+--------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table10</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">table8</span><span class="p">,</span> <span class="n">table9</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;time&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table10</span><span class="p">)</span>
<span class="go">+------+--------+----------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;time&#39; | &#39;height&#39; | &#39;weight&#39; |</span>
<span class="go">+======+========+==========+==========+</span>
<span class="go">| 1    | 2      | 34.5     | 4.5      |</span>
<span class="go">+------+--------+----------+----------+</span>
<span class="go">| 2    | 1      | 56.7     | 6.7      |</span>
<span class="go">+------+--------+----------+----------+</span>
</pre></div>
</div>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.leftjoin">
<tt class="descclassname">petl.</tt><tt class="descname">leftjoin</tt><big>(</big><em>left</em>, <em>right</em>, <em>key=None</em>, <em>missing=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.leftjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a left outer join on the given tables. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">leftjoin</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; |</span>
<span class="go">+======+==========+</span>
<span class="go">| 1    | &#39;blue&#39;   |</span>
<span class="go">+------+----------+</span>
<span class="go">| 2    | &#39;red&#39;    |</span>
<span class="go">+------+----------+</span>
<span class="go">| 3    | &#39;purple&#39; |</span>
<span class="go">+------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+------+-----------+</span>
<span class="go">| &#39;id&#39; | &#39;shape&#39;   |</span>
<span class="go">+======+===========+</span>
<span class="go">| 1    | &#39;circle&#39;  |</span>
<span class="go">+------+-----------+</span>
<span class="go">| 3    | &#39;square&#39;  |</span>
<span class="go">+------+-----------+</span>
<span class="go">| 4    | &#39;ellipse&#39; |</span>
<span class="go">+------+-----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">leftjoin</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+------+----------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; | &#39;shape&#39;  |</span>
<span class="go">+======+==========+==========+</span>
<span class="go">| 1    | &#39;blue&#39;   | &#39;circle&#39; |</span>
<span class="go">+------+----------+----------+</span>
<span class="go">| 2    | &#39;red&#39;    | None     |</span>
<span class="go">+------+----------+----------+</span>
<span class="go">| 3    | &#39;purple&#39; | &#39;square&#39; |</span>
<span class="go">+------+----------+----------+</span>
</pre></div>
</div>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.rightjoin">
<tt class="descclassname">petl.</tt><tt class="descname">rightjoin</tt><big>(</big><em>left</em>, <em>right</em>, <em>key=None</em>, <em>missing=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.rightjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a right outer join on the given tables. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rightjoin</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; |</span>
<span class="go">+======+==========+</span>
<span class="go">| 1    | &#39;blue&#39;   |</span>
<span class="go">+------+----------+</span>
<span class="go">| 2    | &#39;red&#39;    |</span>
<span class="go">+------+----------+</span>
<span class="go">| 3    | &#39;purple&#39; |</span>
<span class="go">+------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+------+-----------+</span>
<span class="go">| &#39;id&#39; | &#39;shape&#39;   |</span>
<span class="go">+======+===========+</span>
<span class="go">| 1    | &#39;circle&#39;  |</span>
<span class="go">+------+-----------+</span>
<span class="go">| 3    | &#39;square&#39;  |</span>
<span class="go">+------+-----------+</span>
<span class="go">| 4    | &#39;ellipse&#39; |</span>
<span class="go">+------+-----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">rightjoin</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; | &#39;shape&#39;   |</span>
<span class="go">+======+==========+===========+</span>
<span class="go">| 1    | &#39;blue&#39;   | &#39;circle&#39;  |</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| 3    | &#39;purple&#39; | &#39;square&#39;  |</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| 4    | None     | &#39;ellipse&#39; |</span>
<span class="go">+------+----------+-----------+</span>
</pre></div>
</div>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.outerjoin">
<tt class="descclassname">petl.</tt><tt class="descname">outerjoin</tt><big>(</big><em>left</em>, <em>right</em>, <em>key=None</em>, <em>missing=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.outerjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a full outer join on the given tables. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">outerjoin</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; |</span>
<span class="go">+======+==========+</span>
<span class="go">| 1    | &#39;blue&#39;   |</span>
<span class="go">+------+----------+</span>
<span class="go">| 2    | &#39;red&#39;    |</span>
<span class="go">+------+----------+</span>
<span class="go">| 3    | &#39;purple&#39; |</span>
<span class="go">+------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+------+-----------+</span>
<span class="go">| &#39;id&#39; | &#39;shape&#39;   |</span>
<span class="go">+======+===========+</span>
<span class="go">| 1    | &#39;circle&#39;  |</span>
<span class="go">+------+-----------+</span>
<span class="go">| 3    | &#39;square&#39;  |</span>
<span class="go">+------+-----------+</span>
<span class="go">| 4    | &#39;ellipse&#39; |</span>
<span class="go">+------+-----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">outerjoin</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; | &#39;shape&#39;   |</span>
<span class="go">+======+==========+===========+</span>
<span class="go">| 1    | &#39;blue&#39;   | &#39;circle&#39;  |</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| 2    | &#39;red&#39;    | None      |</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| 3    | &#39;purple&#39; | &#39;square&#39;  |</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| 4    | None     | &#39;ellipse&#39; |</span>
<span class="go">+------+----------+-----------+</span>
</pre></div>
</div>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.crossjoin">
<tt class="descclassname">petl.</tt><tt class="descname">crossjoin</tt><big>(</big><em>*tables</em><big>)</big><a class="headerlink" href="#petl.crossjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Form the cartesian product of the given tables. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">crossjoin</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; |</span>
<span class="go">+======+==========+</span>
<span class="go">| 1    | &#39;blue&#39;   |</span>
<span class="go">+------+----------+</span>
<span class="go">| 2    | &#39;red&#39;    |</span>
<span class="go">+------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;shape&#39;  |</span>
<span class="go">+======+==========+</span>
<span class="go">| 1    | &#39;circle&#39; |</span>
<span class="go">+------+----------+</span>
<span class="go">| 3    | &#39;square&#39; |</span>
<span class="go">+------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">crossjoin</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+------+----------+------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; | &#39;id&#39; | &#39;shape&#39;  |</span>
<span class="go">+======+==========+======+==========+</span>
<span class="go">| 1    | &#39;blue&#39;   | 1    | &#39;circle&#39; |</span>
<span class="go">+------+----------+------+----------+</span>
<span class="go">| 1    | &#39;blue&#39;   | 3    | &#39;square&#39; |</span>
<span class="go">+------+----------+------+----------+</span>
<span class="go">| 2    | &#39;red&#39;    | 1    | &#39;circle&#39; |</span>
<span class="go">+------+----------+------+----------+</span>
<span class="go">| 2    | &#39;red&#39;    | 3    | &#39;square&#39; |</span>
<span class="go">+------+----------+------+----------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.antijoin">
<tt class="descclassname">petl.</tt><tt class="descname">antijoin</tt><big>(</big><em>left</em>, <em>right</em>, <em>key=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.antijoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return rows from the <cite>left</cite> table where the key value does not occur in the
<cite>right</cite> table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">antijoin</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; |</span>
<span class="go">+======+==========+</span>
<span class="go">| 0    | &#39;black&#39;  |</span>
<span class="go">+------+----------+</span>
<span class="go">| 1    | &#39;blue&#39;   |</span>
<span class="go">+------+----------+</span>
<span class="go">| 2    | &#39;red&#39;    |</span>
<span class="go">+------+----------+</span>
<span class="go">| 4    | &#39;yellow&#39; |</span>
<span class="go">+------+----------+</span>
<span class="go">| 5    | &#39;white&#39;  |</span>
<span class="go">+------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;shape&#39;  |</span>
<span class="go">+======+==========+</span>
<span class="go">| 1    | &#39;circle&#39; |</span>
<span class="go">+------+----------+</span>
<span class="go">| 3    | &#39;square&#39; |</span>
<span class="go">+------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">antijoin</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; |</span>
<span class="go">+======+==========+</span>
<span class="go">| 0    | &#39;black&#39;  |</span>
<span class="go">+------+----------+</span>
<span class="go">| 2    | &#39;red&#39;    |</span>
<span class="go">+------+----------+</span>
<span class="go">| 4    | &#39;yellow&#39; |</span>
<span class="go">+------+----------+</span>
<span class="go">| 5    | &#39;white&#39;  |</span>
<span class="go">+------+----------+</span>
</pre></div>
</div>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.complement">
<tt class="descclassname">petl.</tt><tt class="descname">complement</tt><big>(</big><em>a</em>, <em>b</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.complement" title="Permalink to this definition">¶</a></dt>
<dd><p>Return rows in <cite>a</cite> that are not in <cite>b</cite>. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">complement</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 7     | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 9     | True  |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;x&#39; | &#39;y&#39; | &#39;z&#39;   |</span>
<span class="go">+=====+=====+=======+</span>
<span class="go">| &#39;B&#39; | 2   | False |</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;A&#39; | 9   | False |</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;B&#39; | 3   | True  |</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;C&#39; | 9   | True  |</span>
<span class="go">+-----+-----+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">aminusb</span> <span class="o">=</span> <span class="n">complement</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">aminusb</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 7     | False |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">bminusa</span> <span class="o">=</span> <span class="n">complement</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">bminusa</span><span class="p">)</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;x&#39; | &#39;y&#39; | &#39;z&#39;   |</span>
<span class="go">+=====+=====+=======+</span>
<span class="go">| &#39;A&#39; | 9   | False |</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;B&#39; | 3   | True  |</span>
<span class="go">+-----+-----+-------+</span>
</pre></div>
</div>
<p>Note that the field names of each table are ignored - rows are simply compared
following a lexical sort. See also the <a class="reference internal" href="#petl.recordcomplement" title="petl.recordcomplement"><tt class="xref py py-func docutils literal"><span class="pre">recordcomplement()</span></tt></a> function.</p>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.diff">
<tt class="descclassname">petl.</tt><tt class="descname">diff</tt><big>(</big><em>a</em>, <em>b</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the difference between rows in two tables. Returns a pair of tables. 
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">diff</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 7     | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 9     | True  |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;x&#39; | &#39;y&#39; | &#39;z&#39;   |</span>
<span class="go">+=====+=====+=======+</span>
<span class="go">| &#39;B&#39; | 2   | False |</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;A&#39; | 9   | False |</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;B&#39; | 3   | True  |</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;C&#39; | 9   | True  |</span>
<span class="go">+-----+-----+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">added</span><span class="p">,</span> <span class="n">subtracted</span> <span class="o">=</span> <span class="n">diff</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># rows in b not in a</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">added</span><span class="p">)</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;x&#39; | &#39;y&#39; | &#39;z&#39;   |</span>
<span class="go">+=====+=====+=======+</span>
<span class="go">| &#39;A&#39; | 9   | False |</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;B&#39; | 3   | True  |</span>
<span class="go">+-----+-----+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># rows in a not in b</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">subtracted</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 7     | False |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>Convenient shorthand for <tt class="docutils literal"><span class="pre">(complement(b,</span> <span class="pre">a),</span> <span class="pre">complement(a,</span> <span class="pre">b))</span></tt>. See also
<a class="reference internal" href="#petl.complement" title="petl.complement"><tt class="xref py py-func docutils literal"><span class="pre">complement()</span></tt></a>.</p>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.recordcomplement">
<tt class="descclassname">petl.</tt><tt class="descname">recordcomplement</tt><big>(</big><em>a</em>, <em>b</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.recordcomplement" title="Permalink to this definition">¶</a></dt>
<dd><p>Find records in <cite>a</cite> that are not in <cite>b</cite>. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">recordcomplement</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 7     | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 9     | True  |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;bar&#39; | &#39;foo&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| 2     | &#39;B&#39;   | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 9     | &#39;A&#39;   | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 3     | &#39;B&#39;   | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 9     | &#39;C&#39;   | True  |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">aminusb</span> <span class="o">=</span> <span class="n">recordcomplement</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">aminusb</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 7     | False |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">bminusa</span> <span class="o">=</span> <span class="n">recordcomplement</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">bminusa</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;bar&#39; | &#39;foo&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| 3     | &#39;B&#39;   | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 9     | &#39;A&#39;   | False |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>Note that both tables must have the same set of fields, but that the order
of the fields does not matter. See also the <a class="reference internal" href="#petl.complement" title="petl.complement"><tt class="xref py py-func docutils literal"><span class="pre">complement()</span></tt></a> function.</p>
<p>See also the discussion of the <cite>buffersize</cite> argument under the <a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> 
function.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.3.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.recorddiff">
<tt class="descclassname">petl.</tt><tt class="descname">recorddiff</tt><big>(</big><em>a</em>, <em>b</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.recorddiff" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the difference between records in two tables. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">recorddiff</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 7     | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 9     | True  |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;bar&#39; | &#39;foo&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| 2     | &#39;B&#39;   | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 9     | &#39;A&#39;   | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 3     | &#39;B&#39;   | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 9     | &#39;C&#39;   | True  |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">added</span><span class="p">,</span> <span class="n">subtracted</span> <span class="o">=</span> <span class="n">recorddiff</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">added</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;bar&#39; | &#39;foo&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| 3     | &#39;B&#39;   | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 9     | &#39;A&#39;   | False |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">subtracted</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 7     | False |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>Convenient shorthand for <tt class="docutils literal"><span class="pre">(recordcomplement(b,</span> <span class="pre">a),</span> <span class="pre">recordcomplement(a,</span> <span class="pre">b))</span></tt>. 
See also <a class="reference internal" href="#petl.recordcomplement" title="petl.recordcomplement"><tt class="xref py py-func docutils literal"><span class="pre">recordcomplement()</span></tt></a>.</p>
<p>See also the discussion of the <cite>buffersize</cite> argument under the <a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> 
function.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.3.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.intersection">
<tt class="descclassname">petl.</tt><tt class="descname">intersection</tt><big>(</big><em>a</em>, <em>b</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.intersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return rows in <cite>a</cite> that are also in <cite>b</cite>. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">intersection</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 7     | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 9     | True  |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;x&#39; | &#39;y&#39; | &#39;z&#39;   |</span>
<span class="go">+=====+=====+=======+</span>
<span class="go">| &#39;B&#39; | 2   | False |</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;A&#39; | 9   | False |</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;B&#39; | 3   | True  |</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;C&#39; | 9   | True  |</span>
<span class="go">+-----+-----+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">intersection</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;B&#39;   | 2     | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 9     | True  |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.aggregate">
<tt class="descclassname">petl.</tt><tt class="descname">aggregate</tt><big>(</big><em>table</em>, <em>key</em>, <em>aggregation=None</em>, <em>value=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.aggregate" title="Permalink to this definition">¶</a></dt>
<dd><p>Group rows under the given key then apply aggregation functions.</p>
<p>E.g., applying an aggregation function to whole rows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">aggregate</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 3     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;a&#39;   | 7     | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 9     | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 4     | True  |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># aggregate whole rows</span>
<span class="gp">... </span><span class="n">table2</span> <span class="o">=</span> <span class="n">aggregate</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+---------+</span>
<span class="go">| &#39;key&#39; | &#39;value&#39; |</span>
<span class="go">+=======+=========+</span>
<span class="go">| &#39;a&#39;   | 2       |</span>
<span class="go">+-------+---------+</span>
<span class="go">| &#39;b&#39;   | 3       |</span>
<span class="go">+-------+---------+</span>
<span class="go">| &#39;c&#39;   | 1       |</span>
<span class="go">+-------+---------+</span>
</pre></div>
</div>
<p>E.g., aggregating single fields:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># aggregate single field</span>
<span class="gp">... </span><span class="n">table3</span> <span class="o">=</span> <span class="n">aggregate</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="nb">sum</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+---------+</span>
<span class="go">| &#39;key&#39; | &#39;value&#39; |</span>
<span class="go">+=======+=========+</span>
<span class="go">| &#39;a&#39;   | 10      |</span>
<span class="go">+-------+---------+</span>
<span class="go">| &#39;b&#39;   | 13      |</span>
<span class="go">+-------+---------+</span>
<span class="go">| &#39;c&#39;   | 4       |</span>
<span class="go">+-------+---------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># alternative signature for single field aggregation using keyword args</span>
<span class="gp">... </span><span class="n">table4</span> <span class="o">=</span> <span class="n">aggregate</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">),</span> <span class="n">aggregation</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+----------+-------------------------+</span>
<span class="go">| &#39;key&#39;    | &#39;value&#39;                 |</span>
<span class="go">+==========+=========================+</span>
<span class="go">| (&#39;a&#39;, 3) | [(3, True)]             |</span>
<span class="go">+----------+-------------------------+</span>
<span class="go">| (&#39;a&#39;, 7) | [(7, False)]            |</span>
<span class="go">+----------+-------------------------+</span>
<span class="go">| (&#39;b&#39;, 2) | [(2, True), (2, False)] |</span>
<span class="go">+----------+-------------------------+</span>
<span class="go">| (&#39;b&#39;, 9) | [(9, False)]            |</span>
<span class="go">+----------+-------------------------+</span>
<span class="go">| (&#39;c&#39;, 4) | [(4, True)]             |</span>
<span class="go">+----------+-------------------------+</span>
</pre></div>
</div>
<p>E.g., multiple aggregations:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># aggregate multiple fields</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">strjoin</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aggregation</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aggregation</span><span class="p">[</span><span class="s">&#39;count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aggregation</span><span class="p">[</span><span class="s">&#39;minbar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">min</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aggregation</span><span class="p">[</span><span class="s">&#39;maxbar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">max</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aggregation</span><span class="p">[</span><span class="s">&#39;sumbar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">sum</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aggregation</span><span class="p">[</span><span class="s">&#39;listbar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span> <span class="c"># default aggregation function is list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aggregation</span><span class="p">[</span><span class="s">&#39;bars&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">strjoin</span><span class="p">(</span><span class="s">&#39;, &#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table5</span> <span class="o">=</span> <span class="n">aggregate</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">aggregation</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table5</span><span class="p">)</span>
<span class="go">+-------+---------+----------+----------+----------+-----------+-----------+</span>
<span class="go">| &#39;key&#39; | &#39;count&#39; | &#39;minbar&#39; | &#39;maxbar&#39; | &#39;sumbar&#39; | &#39;listbar&#39; | &#39;bars&#39;    |</span>
<span class="go">+=======+=========+==========+==========+==========+===========+===========+</span>
<span class="go">| &#39;a&#39;   | 2       | 3        | 7        | 10       | [3, 7]    | &#39;3, 7&#39;    |</span>
<span class="go">+-------+---------+----------+----------+----------+-----------+-----------+</span>
<span class="go">| &#39;b&#39;   | 3       | 2        | 9        | 13       | [2, 2, 9] | &#39;2, 2, 9&#39; |</span>
<span class="go">+-------+---------+----------+----------+----------+-----------+-----------+</span>
<span class="go">| &#39;c&#39;   | 1       | 4        | 4        | 4        | [4]       | &#39;4&#39;       |</span>
<span class="go">+-------+---------+----------+----------+----------+-----------+-----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># can also use list or tuple to specify multiple field aggregation</span>
<span class="gp">... </span><span class="n">aggregation</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;count&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">),</span>
<span class="gp">... </span>               <span class="p">(</span><span class="s">&#39;minbar&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="p">),</span>
<span class="gp">... </span>               <span class="p">(</span><span class="s">&#39;maxbar&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">max</span><span class="p">),</span>
<span class="gp">... </span>               <span class="p">(</span><span class="s">&#39;sumbar&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">sum</span><span class="p">),</span>
<span class="gp">... </span>               <span class="p">(</span><span class="s">&#39;listbar&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">),</span> <span class="c"># default aggregation function is list</span>
<span class="gp">... </span>               <span class="p">(</span><span class="s">&#39;bars&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">strjoin</span><span class="p">(</span><span class="s">&#39;, &#39;</span><span class="p">))]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table6</span> <span class="o">=</span> <span class="n">aggregate</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">aggregation</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table6</span><span class="p">)</span>
<span class="go">+-------+---------+----------+----------+----------+-----------+-----------+</span>
<span class="go">| &#39;key&#39; | &#39;count&#39; | &#39;minbar&#39; | &#39;maxbar&#39; | &#39;sumbar&#39; | &#39;listbar&#39; | &#39;bars&#39;    |</span>
<span class="go">+=======+=========+==========+==========+==========+===========+===========+</span>
<span class="go">| &#39;a&#39;   | 2       | 3        | 7        | 10       | [3, 7]    | &#39;3, 7&#39;    |</span>
<span class="go">+-------+---------+----------+----------+----------+-----------+-----------+</span>
<span class="go">| &#39;b&#39;   | 3       | 2        | 9        | 13       | [2, 2, 9] | &#39;2, 2, 9&#39; |</span>
<span class="go">+-------+---------+----------+----------+----------+-----------+-----------+</span>
<span class="go">| &#39;c&#39;   | 1       | 4        | 4        | 4        | [4]       | &#39;4&#39;       |</span>
<span class="go">+-------+---------+----------+----------+----------+-----------+-----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># can also use suffix notation</span>
<span class="gp">... </span><span class="n">table7</span> <span class="o">=</span> <span class="n">aggregate</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table7</span><span class="p">[</span><span class="s">&#39;count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table7</span><span class="p">[</span><span class="s">&#39;minbar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">min</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table7</span><span class="p">[</span><span class="s">&#39;maxbar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">max</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table7</span><span class="p">[</span><span class="s">&#39;sumbar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">sum</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table7</span><span class="p">[</span><span class="s">&#39;listbar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span> <span class="c"># default aggregation function is list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table7</span><span class="p">[</span><span class="s">&#39;bars&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">strjoin</span><span class="p">(</span><span class="s">&#39;, &#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table7</span><span class="p">)</span>
<span class="go">+-------+---------+----------+----------+----------+-----------+-----------+</span>
<span class="go">| &#39;key&#39; | &#39;count&#39; | &#39;minbar&#39; | &#39;maxbar&#39; | &#39;sumbar&#39; | &#39;listbar&#39; | &#39;bars&#39;    |</span>
<span class="go">+=======+=========+==========+==========+==========+===========+===========+</span>
<span class="go">| &#39;a&#39;   | 2       | 3        | 7        | 10       | [3, 7]    | &#39;3, 7&#39;    |</span>
<span class="go">+-------+---------+----------+----------+----------+-----------+-----------+</span>
<span class="go">| &#39;b&#39;   | 3       | 2        | 9        | 13       | [2, 2, 9] | &#39;2, 2, 9&#39; |</span>
<span class="go">+-------+---------+----------+----------+----------+-----------+-----------+</span>
<span class="go">| &#39;c&#39;   | 1       | 4        | 4        | 4        | [4]       | &#39;4&#39;       |</span>
<span class="go">+-------+---------+----------+----------+----------+-----------+-----------+</span>
</pre></div>
</div>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.rangeaggregate">
<tt class="descclassname">petl.</tt><tt class="descname">rangeaggregate</tt><big>(</big><em>table</em>, <em>key</em>, <em>width</em>, <em>aggregators=None</em>, <em>minv=None</em>, <em>maxv=None</em>, <em>failonerror=False</em>, <em>errorvalue=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.rangeaggregate" title="Permalink to this definition">¶</a></dt>
<dd><p>Group rows into bins then apply aggregation functions. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rangeaggregate</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 3     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;a&#39;   | 7     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 9     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 4     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;d&#39;   | 3     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">rangeaggregate</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span><span class="p">[</span><span class="s">&#39;foocount&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="nb">len</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span><span class="p">[</span><span class="s">&#39;foolist&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;foo&#39;</span> <span class="c"># default is list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+---------+------------+-----------------+</span>
<span class="go">| &#39;bar&#39;   | &#39;foocount&#39; | &#39;foolist&#39;       |</span>
<span class="go">+=========+============+=================+</span>
<span class="go">| (1, 3)  | 2          | [&#39;b&#39;, &#39;b&#39;]      |</span>
<span class="go">+---------+------------+-----------------+</span>
<span class="go">| (3, 5)  | 3          | [&#39;a&#39;, &#39;d&#39;, &#39;c&#39;] |</span>
<span class="go">+---------+------------+-----------------+</span>
<span class="go">| (5, 7)  | 0          | []              |</span>
<span class="go">+---------+------------+-----------------+</span>
<span class="go">| (7, 9)  | 1          | [&#39;a&#39;]           |</span>
<span class="go">+---------+------------+-----------------+</span>
<span class="go">| (9, 11) | 1          | [&#39;b&#39;]           |</span>
<span class="go">+---------+------------+-----------------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.rangecounts">
<tt class="descclassname">petl.</tt><tt class="descname">rangecounts</tt><big>(</big><em>table</em>, <em>key</em>, <em>width</em>, <em>minv=None</em>, <em>maxv=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.rangecounts" title="Permalink to this definition">¶</a></dt>
<dd><p>Group rows into bins then count the number of rows in each bin. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rangecounts</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 3     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;a&#39;   | 7     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 9     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 4     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;d&#39;   | 3     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">rangecounts</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+---------+---------+</span>
<span class="go">| &#39;range&#39; | &#39;count&#39; |</span>
<span class="go">+=========+=========+</span>
<span class="go">| (1, 3)  | 2       |</span>
<span class="go">+---------+---------+</span>
<span class="go">| (3, 5)  | 3       |</span>
<span class="go">+---------+---------+</span>
<span class="go">| (5, 7)  | 0       |</span>
<span class="go">+---------+---------+</span>
<span class="go">| (7, 9)  | 1       |</span>
<span class="go">+---------+---------+</span>
<span class="go">| (9, 11) | 1       |</span>
<span class="go">+---------+---------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.rowreduce">
<tt class="descclassname">petl.</tt><tt class="descname">rowreduce</tt><big>(</big><em>table</em>, <em>key</em>, <em>reducer</em>, <em>fields=None</em>, <em>missing=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.rowreduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce rows grouped under the given key via an arbitrary function.</p>
<p class="deprecated">
<span class="versionmodified">Deprecated since version 0.10.</span></p>
<p>Use <a class="reference internal" href="#petl.aggregate" title="petl.aggregate"><tt class="xref py py-func docutils literal"><span class="pre">aggregate()</span></tt></a> instead.</p>
</dd></dl>

<dl class="function">
<dt id="petl.recordreduce">
<tt class="descclassname">petl.</tt><tt class="descname">recordreduce</tt><big>(</big><em>table</em>, <em>key</em>, <em>reducer</em>, <em>fields=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.recordreduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce records grouped under the given key via an arbitrary function.</p>
<p class="deprecated">
<span class="versionmodified">Deprecated since version 0.9.</span></p>
<p>Use <a class="reference internal" href="#petl.aggregate" title="petl.aggregate"><tt class="xref py py-func docutils literal"><span class="pre">aggregate()</span></tt></a> instead.</p>
</dd></dl>

<dl class="function">
<dt id="petl.rangerowreduce">
<tt class="descclassname">petl.</tt><tt class="descname">rangerowreduce</tt><big>(</big><em>table</em>, <em>key</em>, <em>width</em>, <em>reducer</em>, <em>fields=None</em>, <em>minv=None</em>, <em>maxv=None</em>, <em>missing=None</em>, <em>failonerror=False</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.rangerowreduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce rows grouped into bins under the given key via an arbitrary function.</p>
<p class="deprecated">
<span class="versionmodified">Deprecated since version 0.10.</span></p>
<p>Use <a class="reference internal" href="#petl.rangeaggregate" title="petl.rangeaggregate"><tt class="xref py py-func docutils literal"><span class="pre">rangeaggregate()</span></tt></a> instead.</p>
</dd></dl>

<dl class="function">
<dt id="petl.rangerecordreduce">
<tt class="descclassname">petl.</tt><tt class="descname">rangerecordreduce</tt><big>(</big><em>table</em>, <em>key</em>, <em>width</em>, <em>reducer</em>, <em>fields=None</em>, <em>minv=None</em>, <em>maxv=None</em>, <em>failonerror=False</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.rangerecordreduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce records grouped into bins under the given key via an arbitrary function.</p>
<p class="deprecated">
<span class="versionmodified">Deprecated since version 0.9.</span></p>
<p>Use <a class="reference internal" href="#petl.rangeaggregate" title="petl.rangeaggregate"><tt class="xref py py-func docutils literal"><span class="pre">rangeaggregate()</span></tt></a> instead.</p>
</dd></dl>

<dl class="function">
<dt id="petl.mergeduplicates">
<tt class="descclassname">petl.</tt><tt class="descname">mergeduplicates</tt><big>(</big><em>table</em>, <em>key</em>, <em>missing=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.mergeduplicates" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge duplicate rows under the given key. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">mergeduplicates</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | 2.7   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     | None  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 3     | 9.4   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | None  | 7.8   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;E&#39;   | None  | 42.0  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 3     | 12.3  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;A&#39;   | 2     | None  |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">mergeduplicates</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+------------------+-----------------------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39;            | &#39;baz&#39;                 |</span>
<span class="go">+=======+==================+=======================+</span>
<span class="go">| &#39;A&#39;   | Conflict([1, 2]) | 2.7                   |</span>
<span class="go">+-------+------------------+-----------------------+</span>
<span class="go">| &#39;B&#39;   | 2                | 7.8                   |</span>
<span class="go">+-------+------------------+-----------------------+</span>
<span class="go">| &#39;D&#39;   | 3                | Conflict([9.4, 12.3]) |</span>
<span class="go">+-------+------------------+-----------------------+</span>
<span class="go">| &#39;E&#39;   | None             | 42.0                  |</span>
<span class="go">+-------+------------------+-----------------------+</span>
</pre></div>
</div>
<p>Missing values are overridden by non-missing values. Conflicting values are
reported as an instance of the Conflict class (sub-class of frozenset).</p>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.3.</span></p>
<p>Previously conflicts were reported as a list, this is changed to a tuple in 
version 0.3.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.10.</span></p>
<p>Renamed from &#8216;mergereduce&#8217; to &#8216;mergeduplicates&#8217;. Conflicts now reported as
instance of Conflict.</p>
</dd></dl>

<dl class="function">
<dt id="petl.mergesort">
<tt class="descclassname">petl.</tt><tt class="descname">mergesort</tt><big>(</big><em>*tables</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.mergesort" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine multiple input tables into one sorted output table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">mergesort</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 9     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 10    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;A&#39;   | 6     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;B&#39;   | 3     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 10    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;A&#39;   | 10    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 4     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">mergesort</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 9     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;A&#39;   | 6     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;A&#39;   | 10    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 3     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 10    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 10    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 4     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>If the input tables are already sorted by the given key, give <tt class="docutils literal"><span class="pre">presorted=True</span></tt>
as a keyword argument.</p>
<p>This function is equivalent to concatenating the input tables using <a class="reference internal" href="#petl.cat" title="petl.cat"><tt class="xref py py-func docutils literal"><span class="pre">cat()</span></tt></a> 
then sorting, however this function will typically be more efficient, 
especially if the input tables are presorted.</p>
<p>Keyword arguments:</p>
<blockquote>
<div><ul class="simple">
<li><cite>key</cite> - field name or tuple of fields to sort by (defaults to <cite>None</cite> - lexical sort)</li>
<li><cite>reverse</cite> - <cite>True</cite> if sort in reverse (descending) order (defaults to <cite>False</cite>)</li>
<li><cite>presorted</cite> - <cite>True</cite> if inputs are already sorted by the given key (defaults to <cite>False</cite>)</li>
<li><cite>missing</cite> - value to fill with when input tables have different fields (defaults to <cite>None</cite>)</li>
<li><cite>header</cite> - specify a fixed header for the output table</li>
<li><cite>buffersize</cite> - limit the number of rows in memory per input table when inputs are not presorted</li>
</ul>
</div></blockquote>
<p class="versionadded">
<span class="versionmodified">New in version 0.9.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.merge">
<tt class="descclassname">petl.</tt><tt class="descname">merge</tt><big>(</big><em>*tables</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to combine multiple tables (via <a class="reference internal" href="#petl.mergesort" title="petl.mergesort"><tt class="xref py py-func docutils literal"><span class="pre">mergesort()</span></tt></a>) then 
combine duplicate rows by merging under the given key (via <a class="reference internal" href="#petl.mergeduplicates" title="petl.mergeduplicates"><tt class="xref py py-func docutils literal"><span class="pre">mergeduplicates()</span></tt></a>). E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">merge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| 1     | &#39;A&#39;   | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 2     | &#39;B&#39;   | None  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 4     | &#39;C&#39;   | True  |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;bar&#39; | &#39;baz&#39; | &#39;quux&#39; |</span>
<span class="go">+=======+=======+========+</span>
<span class="go">| &#39;A&#39;   | True  | 42.0   |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;B&#39;   | False | 79.3   |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;C&#39;   | False | 12.4   |</span>
<span class="go">+-------+-------+--------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">merge</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+---------------+--------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39;         | &#39;quux&#39; |</span>
<span class="go">+=======+=======+===============+========+</span>
<span class="go">| 1     | &#39;A&#39;   | True          | 42.0   |</span>
<span class="go">+-------+-------+---------------+--------+</span>
<span class="go">| 2     | &#39;B&#39;   | False         | 79.3   |</span>
<span class="go">+-------+-------+---------------+--------+</span>
<span class="go">| 4     | &#39;C&#39;   | (True, False) | 12.4   |</span>
<span class="go">+-------+-------+---------------+--------+</span>
</pre></div>
</div>
<p>Keyword arguments are the same as for <a class="reference internal" href="#petl.mergesort" title="petl.mergesort"><tt class="xref py py-func docutils literal"><span class="pre">mergesort()</span></tt></a>, except <cite>key</cite> is
required.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.9.</span></p>
<p>Now uses <a class="reference internal" href="#petl.mergesort" title="petl.mergesort"><tt class="xref py py-func docutils literal"><span class="pre">mergesort()</span></tt></a>, should be more efficient for presorted inputs.</p>
</dd></dl>

<dl class="function">
<dt id="petl.melt">
<tt class="descclassname">petl.</tt><tt class="descname">melt</tt><big>(</big><em>table</em>, <em>key=None</em>, <em>variables=None</em>, <em>variablefield='variable'</em>, <em>valuefield='value'</em><big>)</big><a class="headerlink" href="#petl.melt" title="Permalink to this definition">¶</a></dt>
<dd><p>Reshape a table, melting fields into data. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">melt</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+------+----------+-------+</span>
<span class="go">| &#39;id&#39; | &#39;gender&#39; | &#39;age&#39; |</span>
<span class="go">+======+==========+=======+</span>
<span class="go">| 1    | &#39;F&#39;      | 12    |</span>
<span class="go">+------+----------+-------+</span>
<span class="go">| 2    | &#39;M&#39;      | 17    |</span>
<span class="go">+------+----------+-------+</span>
<span class="go">| 3    | &#39;M&#39;      | 16    |</span>
<span class="go">+------+----------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">melt</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| &#39;id&#39; | &#39;variable&#39; | &#39;value&#39; |</span>
<span class="go">+======+============+=========+</span>
<span class="go">| 1    | &#39;gender&#39;   | &#39;F&#39;     |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| 1    | &#39;age&#39;      | 12      |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| 2    | &#39;gender&#39;   | &#39;M&#39;     |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| 2    | &#39;age&#39;      | 17      |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| 3    | &#39;gender&#39;   | &#39;M&#39;     |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| 3    | &#39;age&#39;      | 16      |</span>
<span class="go">+------+------------+---------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># compound keys are supported</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+------+--------+----------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;time&#39; | &#39;height&#39; | &#39;weight&#39; |</span>
<span class="go">+======+========+==========+==========+</span>
<span class="go">| 1    | 11     | 66.4     | 12.2     |</span>
<span class="go">+------+--------+----------+----------+</span>
<span class="go">| 2    | 16     | 53.2     | 17.3     |</span>
<span class="go">+------+--------+----------+----------+</span>
<span class="go">| 3    | 12     | 34.5     | 9.4      |</span>
<span class="go">+------+--------+----------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span> <span class="o">=</span> <span class="n">melt</span><span class="p">(</span><span class="n">table3</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;time&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| &#39;id&#39; | &#39;time&#39; | &#39;variable&#39; | &#39;value&#39; |</span>
<span class="go">+======+========+============+=========+</span>
<span class="go">| 1    | 11     | &#39;height&#39;   | 66.4    |</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| 1    | 11     | &#39;weight&#39;   | 12.2    |</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| 2    | 16     | &#39;height&#39;   | 53.2    |</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| 2    | 16     | &#39;weight&#39;   | 17.3    |</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| 3    | 12     | &#39;height&#39;   | 34.5    |</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| 3    | 12     | &#39;weight&#39;   | 9.4     |</span>
<span class="go">+------+--------+------------+---------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># a subset of variable fields can be selected</span>
<span class="gp">... </span><span class="n">table5</span> <span class="o">=</span> <span class="n">melt</span><span class="p">(</span><span class="n">table3</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;time&#39;</span><span class="p">],</span> <span class="n">variables</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;height&#39;</span><span class="p">])</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table5</span><span class="p">)</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| &#39;id&#39; | &#39;time&#39; | &#39;variable&#39; | &#39;value&#39; |</span>
<span class="go">+======+========+============+=========+</span>
<span class="go">| 1    | 11     | &#39;height&#39;   | 66.4    |</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| 2    | 16     | &#39;height&#39;   | 53.2    |</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| 3    | 12     | &#39;height&#39;   | 34.5    |</span>
<span class="go">+------+--------+------------+---------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.recast">
<tt class="descclassname">petl.</tt><tt class="descname">recast</tt><big>(</big><em>table</em>, <em>key=None</em>, <em>variablefield='variable'</em>, <em>valuefield='value'</em>, <em>samplesize=1000</em>, <em>reducers=None</em>, <em>missing=None</em><big>)</big><a class="headerlink" href="#petl.recast" title="Permalink to this definition">¶</a></dt>
<dd><p>Recast molten data. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">recast</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| &#39;id&#39; | &#39;variable&#39; | &#39;value&#39; |</span>
<span class="go">+======+============+=========+</span>
<span class="go">| 3    | &#39;age&#39;      | 16      |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| 1    | &#39;gender&#39;   | &#39;F&#39;     |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| 2    | &#39;gender&#39;   | &#39;M&#39;     |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| 2    | &#39;age&#39;      | 17      |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| 1    | &#39;age&#39;      | 12      |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| 3    | &#39;gender&#39;   | &#39;M&#39;     |</span>
<span class="go">+------+------------+---------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">recast</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+------+-------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;age&#39; | &#39;gender&#39; |</span>
<span class="go">+======+=======+==========+</span>
<span class="go">| 1    | 12    | &#39;F&#39;      |</span>
<span class="go">+------+-------+----------+</span>
<span class="go">| 2    | 17    | &#39;M&#39;      |</span>
<span class="go">+------+-------+----------+</span>
<span class="go">| 3    | 16    | &#39;M&#39;      |</span>
<span class="go">+------+-------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># specifying variable and value fields</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+------+----------+--------+</span>
<span class="go">| &#39;id&#39; | &#39;vars&#39;   | &#39;vals&#39; |</span>
<span class="go">+======+==========+========+</span>
<span class="go">| 3    | &#39;age&#39;    | 16     |</span>
<span class="go">+------+----------+--------+</span>
<span class="go">| 1    | &#39;gender&#39; | &#39;F&#39;    |</span>
<span class="go">+------+----------+--------+</span>
<span class="go">| 2    | &#39;gender&#39; | &#39;M&#39;    |</span>
<span class="go">+------+----------+--------+</span>
<span class="go">| 2    | &#39;age&#39;    | 17     |</span>
<span class="go">+------+----------+--------+</span>
<span class="go">| 1    | &#39;age&#39;    | 12     |</span>
<span class="go">+------+----------+--------+</span>
<span class="go">| 3    | &#39;gender&#39; | &#39;M&#39;    |</span>
<span class="go">+------+----------+--------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span> <span class="o">=</span> <span class="n">recast</span><span class="p">(</span><span class="n">table3</span><span class="p">,</span> <span class="n">variablefield</span><span class="o">=</span><span class="s">&#39;vars&#39;</span><span class="p">,</span> <span class="n">valuefield</span><span class="o">=</span><span class="s">&#39;vals&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+------+-------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;age&#39; | &#39;gender&#39; |</span>
<span class="go">+======+=======+==========+</span>
<span class="go">| 1    | 12    | &#39;F&#39;      |</span>
<span class="go">+------+-------+----------+</span>
<span class="go">| 2    | 17    | &#39;M&#39;      |</span>
<span class="go">+------+-------+----------+</span>
<span class="go">| 3    | 16    | &#39;M&#39;      |</span>
<span class="go">+------+-------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># if there are multiple values for each key/variable pair, and no reducers</span>
<span class="gp">... </span><span class="c"># function is provided, then all values will be listed</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">table6</span><span class="p">)</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| &#39;id&#39; | &#39;time&#39; | &#39;variable&#39; | &#39;value&#39; |</span>
<span class="go">+======+========+============+=========+</span>
<span class="go">| 1    | 11     | &#39;weight&#39;   | 66.4    |</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| 1    | 14     | &#39;weight&#39;   | 55.2    |</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| 2    | 12     | &#39;weight&#39;   | 53.2    |</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| 2    | 16     | &#39;weight&#39;   | 43.3    |</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| 3    | 12     | &#39;weight&#39;   | 34.5    |</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| 3    | 17     | &#39;weight&#39;   | 49.4    |</span>
<span class="go">+------+--------+------------+---------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table7</span> <span class="o">=</span> <span class="n">recast</span><span class="p">(</span><span class="n">table6</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table7</span><span class="p">)</span>
<span class="go">+------+--------------+</span>
<span class="go">| &#39;id&#39; | &#39;weight&#39;     |</span>
<span class="go">+======+==============+</span>
<span class="go">| 1    | [66.4, 55.2] |</span>
<span class="go">+------+--------------+</span>
<span class="go">| 2    | [53.2, 43.3] |</span>
<span class="go">+------+--------------+</span>
<span class="go">| 3    | [34.5, 49.4] |</span>
<span class="go">+------+--------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># multiple values can be reduced via an aggregation function</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">mean</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">values</span><span class="p">))</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table8</span> <span class="o">=</span> <span class="n">recast</span><span class="p">(</span><span class="n">table6</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">reducers</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;weight&#39;</span><span class="p">:</span> <span class="n">mean</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table8</span><span class="p">)</span>    
<span class="go">+------+--------------------+</span>
<span class="go">| &#39;id&#39; | &#39;weight&#39;           |</span>
<span class="go">+======+====================+</span>
<span class="go">| 1    | 60.800000000000004 |</span>
<span class="go">+------+--------------------+</span>
<span class="go">| 2    | 48.25              |</span>
<span class="go">+------+--------------------+</span>
<span class="go">| 3    | 41.95              |</span>
<span class="go">+------+--------------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># missing values are padded with whatever is provided via the missing </span>
<span class="gp">... </span><span class="c"># keyword argument (None by default)</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">table9</span><span class="p">)</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| &#39;id&#39; | &#39;variable&#39; | &#39;value&#39; |</span>
<span class="go">+======+============+=========+</span>
<span class="go">| 1    | &#39;gender&#39;   | &#39;F&#39;     |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| 2    | &#39;age&#39;      | 17      |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| 1    | &#39;age&#39;      | 12      |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| 3    | &#39;gender&#39;   | &#39;M&#39;     |</span>
<span class="go">+------+------------+---------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table10</span> <span class="o">=</span> <span class="n">recast</span><span class="p">(</span><span class="n">table9</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table10</span><span class="p">)</span>
<span class="go">+------+-------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;age&#39; | &#39;gender&#39; |</span>
<span class="go">+======+=======+==========+</span>
<span class="go">| 1    | 12    | &#39;F&#39;      |</span>
<span class="go">+------+-------+----------+</span>
<span class="go">| 2    | 17    | None     |</span>
<span class="go">+------+-------+----------+</span>
<span class="go">| 3    | None  | &#39;M&#39;      |</span>
<span class="go">+------+-------+----------+</span>
</pre></div>
</div>
<p>Note that the table is scanned once to discover variables, then a second
time to reshape the data and recast variables as fields. How many rows are
scanned in the first pass is determined by the <cite>samplesize</cite> argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.transpose">
<tt class="descclassname">petl.</tt><tt class="descname">transpose</tt><big>(</big><em>table</em><big>)</big><a class="headerlink" href="#petl.transpose" title="Permalink to this definition">¶</a></dt>
<dd><p>Transpose rows into columns. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">transpose</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; |</span>
<span class="go">+======+==========+</span>
<span class="go">| 1    | &#39;blue&#39;   |</span>
<span class="go">+------+----------+</span>
<span class="go">| 2    | &#39;red&#39;    |</span>
<span class="go">+------+----------+</span>
<span class="go">| 3    | &#39;purple&#39; |</span>
<span class="go">+------+----------+</span>
<span class="go">| 5    | &#39;yellow&#39; |</span>
<span class="go">+------+----------+</span>
<span class="go">| 7    | &#39;orange&#39; |</span>
<span class="go">+------+----------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">transpose</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+----------+--------+-------+----------+----------+----------+</span>
<span class="go">| &#39;id&#39;     | 1      | 2     | 3        | 5        | 7        |</span>
<span class="go">+==========+========+=======+==========+==========+==========+</span>
<span class="go">| &#39;colour&#39; | &#39;blue&#39; | &#39;red&#39; | &#39;purple&#39; | &#39;yellow&#39; | &#39;orange&#39; |</span>
<span class="go">+----------+--------+-------+----------+----------+----------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.pivot">
<tt class="descclassname">petl.</tt><tt class="descname">pivot</tt><big>(</big><em>table</em>, <em>f1</em>, <em>f2</em>, <em>f3</em>, <em>aggfun</em>, <em>presorted=False</em>, <em>buffersize=None</em>, <em>missing=None</em><big>)</big><a class="headerlink" href="#petl.pivot" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a pivot table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">pivot</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+----------+----------+---------+---------+</span>
<span class="go">| &#39;region&#39; | &#39;gender&#39; | &#39;style&#39; | &#39;units&#39; |</span>
<span class="go">+==========+==========+=========+=========+</span>
<span class="go">| &#39;east&#39;   | &#39;boy&#39;    | &#39;tee&#39;   | 12      |</span>
<span class="go">+----------+----------+---------+---------+</span>
<span class="go">| &#39;east&#39;   | &#39;boy&#39;    | &#39;golf&#39;  | 14      |</span>
<span class="go">+----------+----------+---------+---------+</span>
<span class="go">| &#39;east&#39;   | &#39;boy&#39;    | &#39;fancy&#39; | 7       |</span>
<span class="go">+----------+----------+---------+---------+</span>
<span class="go">| &#39;east&#39;   | &#39;girl&#39;   | &#39;tee&#39;   | 3       |</span>
<span class="go">+----------+----------+---------+---------+</span>
<span class="go">| &#39;east&#39;   | &#39;girl&#39;   | &#39;golf&#39;  | 8       |</span>
<span class="go">+----------+----------+---------+---------+</span>
<span class="go">| &#39;east&#39;   | &#39;girl&#39;   | &#39;fancy&#39; | 18      |</span>
<span class="go">+----------+----------+---------+---------+</span>
<span class="go">| &#39;west&#39;   | &#39;boy&#39;    | &#39;tee&#39;   | 12      |</span>
<span class="go">+----------+----------+---------+---------+</span>
<span class="go">| &#39;west&#39;   | &#39;boy&#39;    | &#39;golf&#39;  | 15      |</span>
<span class="go">+----------+----------+---------+---------+</span>
<span class="go">| &#39;west&#39;   | &#39;boy&#39;    | &#39;fancy&#39; | 8       |</span>
<span class="go">+----------+----------+---------+---------+</span>
<span class="go">| &#39;west&#39;   | &#39;girl&#39;   | &#39;tee&#39;   | 6       |</span>
<span class="go">+----------+----------+---------+---------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">pivot</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;region&#39;</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;units&#39;</span><span class="p">,</span> <span class="nb">sum</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+----------+-------+--------+</span>
<span class="go">| &#39;region&#39; | &#39;boy&#39; | &#39;girl&#39; |</span>
<span class="go">+==========+=======+========+</span>
<span class="go">| &#39;east&#39;   | 33    | 29     |</span>
<span class="go">+----------+-------+--------+</span>
<span class="go">| &#39;west&#39;   | 35    | 23     |</span>
<span class="go">+----------+-------+--------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">pivot</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;region&#39;</span><span class="p">,</span> <span class="s">&#39;style&#39;</span><span class="p">,</span> <span class="s">&#39;units&#39;</span><span class="p">,</span> <span class="nb">sum</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+----------+---------+--------+-------+</span>
<span class="go">| &#39;region&#39; | &#39;fancy&#39; | &#39;golf&#39; | &#39;tee&#39; |</span>
<span class="go">+==========+=========+========+=======+</span>
<span class="go">| &#39;east&#39;   | 25      | 22     | 15    |</span>
<span class="go">+----------+---------+--------+-------+</span>
<span class="go">| &#39;west&#39;   | 9       | 31     | 18    |</span>
<span class="go">+----------+---------+--------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span> <span class="o">=</span> <span class="n">pivot</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;style&#39;</span><span class="p">,</span> <span class="s">&#39;units&#39;</span><span class="p">,</span> <span class="nb">sum</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+----------+---------+--------+-------+</span>
<span class="go">| &#39;gender&#39; | &#39;fancy&#39; | &#39;golf&#39; | &#39;tee&#39; |</span>
<span class="go">+==========+=========+========+=======+</span>
<span class="go">| &#39;boy&#39;    | 15      | 29     | 24    |</span>
<span class="go">+----------+---------+--------+-------+</span>
<span class="go">| &#39;girl&#39;   | 19      | 24     | 9     |</span>
<span class="go">+----------+---------+--------+-------+</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#petl.recast" title="petl.recast"><tt class="xref py py-func docutils literal"><span class="pre">recast()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.hashjoin">
<tt class="descclassname">petl.</tt><tt class="descname">hashjoin</tt><big>(</big><em>left</em>, <em>right</em>, <em>key=None</em><big>)</big><a class="headerlink" href="#petl.hashjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative implementation of <a class="reference internal" href="#petl.join" title="petl.join"><tt class="xref py py-func docutils literal"><span class="pre">join()</span></tt></a>, where the join is executed
by constructing an in-memory lookup for the right hand table, then iterating over rows 
from the left hand table.</p>
<p>May be faster and/or more resource efficient where the right table is small
and the left table is large.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.hashleftjoin">
<tt class="descclassname">petl.</tt><tt class="descname">hashleftjoin</tt><big>(</big><em>left</em>, <em>right</em>, <em>key=None</em>, <em>missing=None</em><big>)</big><a class="headerlink" href="#petl.hashleftjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative implementation of <a class="reference internal" href="#petl.leftjoin" title="petl.leftjoin"><tt class="xref py py-func docutils literal"><span class="pre">leftjoin()</span></tt></a>, where the join is executed
by constructing an in-memory lookup for the right hand table, then iterating over rows 
from the left hand table.</p>
<p>May be faster and/or more resource efficient where the right table is small
and the left table is large.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.hashrightjoin">
<tt class="descclassname">petl.</tt><tt class="descname">hashrightjoin</tt><big>(</big><em>left</em>, <em>right</em>, <em>key=None</em>, <em>missing=None</em><big>)</big><a class="headerlink" href="#petl.hashrightjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative implementation of <a class="reference internal" href="#petl.rightjoin" title="petl.rightjoin"><tt class="xref py py-func docutils literal"><span class="pre">rightjoin()</span></tt></a>, where the join is executed
by constructing an in-memory lookup for the left hand table, then iterating over rows 
from the right hand table.</p>
<p>May be faster and/or more resource efficient where the left table is small
and the right table is large.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.hashantijoin">
<tt class="descclassname">petl.</tt><tt class="descname">hashantijoin</tt><big>(</big><em>left</em>, <em>right</em>, <em>key=None</em><big>)</big><a class="headerlink" href="#petl.hashantijoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative implementation of <a class="reference internal" href="#petl.antijoin" title="petl.antijoin"><tt class="xref py py-func docutils literal"><span class="pre">antijoin()</span></tt></a>, where the join is executed
by constructing an in-memory set for all keys found in the right hand table, then 
iterating over rows from the left hand table.</p>
<p>May be faster and/or more resource efficient where the right table is small
and the left table is large.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.hashcomplement">
<tt class="descclassname">petl.</tt><tt class="descname">hashcomplement</tt><big>(</big><em>a</em>, <em>b</em><big>)</big><a class="headerlink" href="#petl.hashcomplement" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative implementation of <a class="reference internal" href="#petl.complement" title="petl.complement"><tt class="xref py py-func docutils literal"><span class="pre">complement()</span></tt></a>, where the complement is executed
by constructing an in-memory set for all rows found in the right hand table, then 
iterating over rows from the left hand table.</p>
<p>May be faster and/or more resource efficient where the right table is small
and the left table is large.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.hashintersection">
<tt class="descclassname">petl.</tt><tt class="descname">hashintersection</tt><big>(</big><em>a</em>, <em>b</em><big>)</big><a class="headerlink" href="#petl.hashintersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative implementation of <a class="reference internal" href="#petl.intersection" title="petl.intersection"><tt class="xref py py-func docutils literal"><span class="pre">intersection()</span></tt></a>, where the intersection is executed
by constructing an in-memory set for all rows found in the right hand table, then 
iterating over rows from the left hand table.</p>
<p>May be faster and/or more resource efficient where the right table is small
and the left table is large.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.flatten">
<tt class="descclassname">petl.</tt><tt class="descname">flatten</tt><big>(</big><em>table</em><big>)</big><a class="headerlink" href="#petl.flatten" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a table to a sequence of values in row-major order. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">flatten</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 7     | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 9     | True  |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">flatten</span><span class="p">(</span><span class="n">table1</span><span class="p">))</span>
<span class="go">[&#39;A&#39;, 1, True, &#39;C&#39;, 7, False, &#39;B&#39;, 2, False, &#39;C&#39;, 9, True]</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#petl.unflatten" title="petl.unflatten"><tt class="xref py py-func docutils literal"><span class="pre">unflatten()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.7.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.unflatten">
<tt class="descclassname">petl.</tt><tt class="descname">unflatten</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.unflatten" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a sequence of values in row-major order into a table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">unflatten</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">input</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">unflatten</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">+------+------+-------+</span>
<span class="go">| &#39;f0&#39; | &#39;f1&#39; | &#39;f2&#39;  |</span>
<span class="go">+======+======+=======+</span>
<span class="go">| &#39;A&#39;  | 1    | True  |</span>
<span class="go">+------+------+-------+</span>
<span class="go">| &#39;C&#39;  | 7    | False |</span>
<span class="go">+------+------+-------+</span>
<span class="go">| &#39;B&#39;  | 2    | False |</span>
<span class="go">+------+------+-------+</span>
<span class="go">| &#39;C&#39;  | 9    | None  |</span>
<span class="go">+------+------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># a table and field name can also be provided as arguments</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+---------+</span>
<span class="go">| &#39;lines&#39; |</span>
<span class="go">+=========+</span>
<span class="go">| &#39;A&#39;     |</span>
<span class="go">+---------+</span>
<span class="go">| 1       |</span>
<span class="go">+---------+</span>
<span class="go">| True    |</span>
<span class="go">+---------+</span>
<span class="go">| &#39;C&#39;     |</span>
<span class="go">+---------+</span>
<span class="go">| 7       |</span>
<span class="go">+---------+</span>
<span class="go">| False   |</span>
<span class="go">+---------+</span>
<span class="go">| &#39;B&#39;     |</span>
<span class="go">+---------+</span>
<span class="go">| 2       |</span>
<span class="go">+---------+</span>
<span class="go">| False   |</span>
<span class="go">+---------+</span>
<span class="go">| &#39;C&#39;     |</span>
<span class="go">+---------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">unflatten</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;lines&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+------+------+-------+</span>
<span class="go">| &#39;f0&#39; | &#39;f1&#39; | &#39;f2&#39;  |</span>
<span class="go">+======+======+=======+</span>
<span class="go">| &#39;A&#39;  | 1    | True  |</span>
<span class="go">+------+------+-------+</span>
<span class="go">| &#39;C&#39;  | 7    | False |</span>
<span class="go">+------+------+-------+</span>
<span class="go">| &#39;B&#39;  | 2    | False |</span>
<span class="go">+------+------+-------+</span>
<span class="go">| &#39;C&#39;  | 9    | None  |</span>
<span class="go">+------+------+-------+</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#petl.flatten" title="petl.flatten"><tt class="xref py py-func docutils literal"><span class="pre">flatten()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.7.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.annex">
<tt class="descclassname">petl.</tt><tt class="descname">annex</tt><big>(</big><em>*tables</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.annex" title="Permalink to this definition">¶</a></dt>
<dd><p>Join two or more tables by row order. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">annex</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 9     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;B&#39;   | 3     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 10    |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">annex</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>    
<span class="go">+-------+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;foo&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 9     | &#39;B&#39;   | 3     |</span>
<span class="go">+-------+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 2     | &#39;D&#39;   | 10    |</span>
<span class="go">+-------+-------+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 1     | None  | None  |</span>
<span class="go">+-------+-------+-------+-------+</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 0.10.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.fold">
<tt class="descclassname">petl.</tt><tt class="descname">fold</tt><big>(</big><em>table</em>, <em>key</em>, <em>f</em>, <em>value=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.fold" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce rows. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">fold</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+------+---------+</span>
<span class="go">| &#39;id&#39; | &#39;count&#39; |</span>
<span class="go">+======+=========+</span>
<span class="go">| 1    | 3       |</span>
<span class="go">+------+---------+</span>
<span class="go">| 1    | 5       |</span>
<span class="go">+------+---------+</span>
<span class="go">| 2    | 4       |</span>
<span class="go">+------+---------+</span>
<span class="go">| 2    | 8       |</span>
<span class="go">+------+---------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">operator</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">fold</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="s">&#39;count&#39;</span><span class="p">,</span> <span class="n">presorted</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+---------+</span>
<span class="go">| &#39;key&#39; | &#39;value&#39; |</span>
<span class="go">+=======+=========+</span>
<span class="go">| 1     | 8       |</span>
<span class="go">+-------+---------+</span>
<span class="go">| 2     | 12      |</span>
<span class="go">+-------+---------+</span>
</pre></div>
</div>
<p>See also the Python standard <a class="reference external" href="http://docs.python.org/library/functions.html#reduce" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">reduce()</span></tt></a> function.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.10.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.addrownumbers">
<tt class="descclassname">petl.</tt><tt class="descname">addrownumbers</tt><big>(</big><em>table</em>, <em>start=1</em>, <em>step=1</em><big>)</big><a class="headerlink" href="#petl.addrownumbers" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a field of row numbers. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">addrownumbers</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 9     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">addrownumbers</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;row&#39; | &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| 1     | &#39;A&#39;   | 9     |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 2     | &#39;C&#39;   | 2     |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 3     | &#39;F&#39;   | 1     |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 0.10.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.addcolumn">
<tt class="descclassname">petl.</tt><tt class="descname">addcolumn</tt><big>(</big><em>table</em>, <em>field</em>, <em>col</em>, <em>index=None</em>, <em>missing=None</em><big>)</big><a class="headerlink" href="#petl.addcolumn" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a column of data to the table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">addcolumn</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">col</span> <span class="o">=</span> <span class="p">[</span><span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">addcolumn</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     | False |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 0.10.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.addfield">
<tt class="descclassname">petl.</tt><tt class="descname">addfield</tt><big>(</big><em>table</em>, <em>field</em>, <em>value=None</em>, <em>index=None</em><big>)</big><a class="headerlink" href="#petl.addfield" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a field with a fixed or calculated value. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">addfield</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;M&#39;   | 12    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 34    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;-&#39;   | 56    |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># using a fixed value</span>
<span class="gp">... </span><span class="n">table2</span> <span class="o">=</span> <span class="n">addfield</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;M&#39;   | 12    | 42    |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 34    | 42    |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;-&#39;   | 56    | 42    |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># calculating the value</span>
<span class="gp">... </span><span class="n">table2</span> <span class="o">=</span> <span class="n">addfield</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">rec</span><span class="p">:</span> <span class="n">rec</span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;M&#39;   | 12    | 24    |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 34    | 68    |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;-&#39;   | 56    | 112   |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># an expression string can also be used via expr</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">expr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">addfield</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="p">(</span><span class="s">&#39;{bar} * 2&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;M&#39;   | 12    | 24    |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 34    | 68    |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;-&#39;   | 56    | 112   |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.10.</span></p>
<p>Renamed &#8216;extend&#8217; to &#8216;addfield&#8217;.</p>
</dd></dl>

</div>
<div class="section" id="load-writing-tables-to-files-and-databases">
<h2>Load - writing tables to files and databases<a class="headerlink" href="#load-writing-tables-to-files-and-databases" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="petl.tocsv">
<tt class="descclassname">petl.</tt><tt class="descname">tocsv</tt><big>(</big><em>table</em>, <em>source=None</em>, <em>dialect=&lt;class csv.excel at 0xb22fb0c&gt;</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.tocsv" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the table to a CSV file. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">tocsv</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">tocsv</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;test.csv&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># look what it did</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">fromcsv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">fromcsv</span><span class="p">(</span><span class="s">&#39;test.csv&#39;</span><span class="p">))</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | &#39;1&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>The <cite>filename</cite> argument is the path of the delimited file, all other keyword
arguments are passed to <a class="reference external" href="http://docs.python.org/library/csv.html#csv.writer" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">csv.writer()</span></tt></a>. So, e.g., to override the delimiter
from the default CSV dialect, provide the <cite>delimiter</cite> keyword argument.</p>
<p>Note that if a file already exists at the given location, it will be overwritten.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.9.</span></p>
<p>Now supports transparent handling of gzipped files (any file name ending in 
&#8216;.gz&#8217;).</p>
</dd></dl>

<dl class="function">
<dt id="petl.appendcsv">
<tt class="descclassname">petl.</tt><tt class="descname">appendcsv</tt><big>(</big><em>table</em>, <em>source=None</em>, <em>dialect=&lt;class csv.excel at 0xb22fb0c&gt;</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.appendcsv" title="Permalink to this definition">¶</a></dt>
<dd><p>Append data rows to an existing CSV file. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># look at an existing CSV file</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">fromcsv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">testcsv</span> <span class="o">=</span> <span class="n">fromcsv</span><span class="p">(</span><span class="s">&#39;test.csv&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">testcsv</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | &#39;1&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># append some data</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;d&#39;   | 7     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;e&#39;   | 42    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;f&#39;   | 12    |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">appendcsv</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">appendcsv</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;test.csv&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># look what it did</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">testcsv</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | &#39;1&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;d&#39;   | &#39;7&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;e&#39;   | &#39;42&#39;  |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;f&#39;   | &#39;12&#39;  |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>The <cite>filename</cite> argument is the path of the delimited file, all other keyword
arguments are passed to <a class="reference external" href="http://docs.python.org/library/csv.html#csv.writer" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">csv.writer()</span></tt></a>. So, e.g., to override the delimiter
from the default CSV dialect, provide the <cite>delimiter</cite> keyword argument.</p>
<p>Note that no attempt is made to check that the fields or row lengths are 
consistent with the existing data, the data rows from the table are simply
appended to the file. See also the <a class="reference internal" href="#petl.cat" title="petl.cat"><tt class="xref py py-func docutils literal"><span class="pre">cat()</span></tt></a> function.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.9.</span></p>
<p>Now supports transparent handling of gzipped files (any file name ending in 
&#8216;.gz&#8217;).</p>
</dd></dl>

<dl class="function">
<dt id="petl.totsv">
<tt class="descclassname">petl.</tt><tt class="descname">totsv</tt><big>(</big><em>table</em>, <em>source=None</em>, <em>dialect=&lt;class csv.excel_tab at 0xb22fb3c&gt;</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.totsv" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function, as <a class="reference internal" href="#petl.tocsv" title="petl.tocsv"><tt class="xref py py-func docutils literal"><span class="pre">tocsv()</span></tt></a> but with different default dialect
(tab delimited).</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.9.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.appendtsv">
<tt class="descclassname">petl.</tt><tt class="descname">appendtsv</tt><big>(</big><em>table</em>, <em>source=None</em>, <em>dialect=&lt;class csv.excel_tab at 0xb22fb3c&gt;</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.appendtsv" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function, as <a class="reference internal" href="#petl.appendcsv" title="petl.appendcsv"><tt class="xref py py-func docutils literal"><span class="pre">appendcsv()</span></tt></a> but with different default dialect
(tab delimited).</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.9.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.topickle">
<tt class="descclassname">petl.</tt><tt class="descname">topickle</tt><big>(</big><em>table</em>, <em>source=None</em>, <em>protocol=-1</em><big>)</big><a class="headerlink" href="#petl.topickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the table to a pickle file. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">topickle</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">topickle</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;test.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># look what it did</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">frompickle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">frompickle</span><span class="p">(</span><span class="s">&#39;test.dat&#39;</span><span class="p">))</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Note that if a file already exists at the given location, it will be overwritten.</p>
<p>The pickle file format preserves type information, i.e., reading and writing 
is round-trippable.</p>
</dd></dl>

<dl class="function">
<dt id="petl.appendpickle">
<tt class="descclassname">petl.</tt><tt class="descname">appendpickle</tt><big>(</big><em>table</em>, <em>source=None</em>, <em>protocol=-1</em><big>)</big><a class="headerlink" href="#petl.appendpickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Append data to an existing pickle file. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">frompickle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># inspect an existing pickle file</span>
<span class="gp">... </span><span class="n">testdat</span> <span class="o">=</span> <span class="n">frompickle</span><span class="p">(</span><span class="s">&#39;test.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">testdat</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># append some data</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">appendpickle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;d&#39;   | 7     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;e&#39;   | 42    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;f&#39;   | 12    |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">appendpickle</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;test.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># look what it did</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">testdat</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;d&#39;   | 7     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;e&#39;   | 42    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;f&#39;   | 12    |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Note that no attempt is made to check that the fields or row lengths are 
consistent with the existing data, the data rows from the table are simply
appended to the file. See also the <a class="reference internal" href="#petl.cat" title="petl.cat"><tt class="xref py py-func docutils literal"><span class="pre">cat()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.tosqlite3">
<tt class="descclassname">petl.</tt><tt class="descname">tosqlite3</tt><big>(</big><em>table</em>, <em>filename</em>, <em>tablename</em>, <em>create=True</em><big>)</big><a class="headerlink" href="#petl.tosqlite3" title="Permalink to this definition">¶</a></dt>
<dd><p>Load data into a table in an <a class="reference external" href="http://docs.python.org/library/sqlite3.html#sqlite3" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">sqlite3</span></tt></a> database. Note that if
the database table exists, it will be truncated, i.e., all
existing rows will be deleted prior to inserting the new
data. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">tosqlite3</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># by default, if the table does not already exist, it will be created</span>
<span class="gp">... </span><span class="n">tosqlite3</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;test.db&#39;</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># look what it did</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">fromsqlite3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">fromsqlite3</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="p">,</span> <span class="s">&#39;select * from foobar&#39;</span><span class="p">))</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| u&#39;a&#39;  | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| u&#39;b&#39;  | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| u&#39;c&#39;  | 2     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.appendsqlite3">
<tt class="descclassname">petl.</tt><tt class="descname">appendsqlite3</tt><big>(</big><em>table</em>, <em>filename</em>, <em>tablename</em><big>)</big><a class="headerlink" href="#petl.appendsqlite3" title="Permalink to this definition">¶</a></dt>
<dd><p>Load data into an existing table in an <a class="reference external" href="http://docs.python.org/library/sqlite3.html#sqlite3" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">sqlite3</span></tt></a>
database. Note that the database table will be appended, i.e., the
new data will be inserted into the table, and any existing rows
will remain. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">appendsqlite3</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">moredata</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;d&#39;   | 7     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;e&#39;   | 9     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;f&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">appendsqlite3</span><span class="p">(</span><span class="n">moredata</span><span class="p">,</span> <span class="s">&#39;test.db&#39;</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">)</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="c"># look what it did</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">fromsqlite3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">fromsqlite3</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="p">,</span> <span class="s">&#39;select * from foobar&#39;</span><span class="p">))</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| u&#39;a&#39;  | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| u&#39;b&#39;  | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| u&#39;c&#39;  | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| u&#39;d&#39;  | 7     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| u&#39;e&#39;  | 9     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| u&#39;f&#39;  | 1     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.todb">
<tt class="descclassname">petl.</tt><tt class="descname">todb</tt><big>(</big><em>table</em>, <em>connection</em>, <em>tablename</em>, <em>commit=True</em><big>)</big><a class="headerlink" href="#petl.todb" title="Permalink to this definition">¶</a></dt>
<dd><p>Load data into an existing database table via a DB-API 2.0
connection. Note that the database table will be truncated, i.e.,
all existing rows will be deleted prior to inserting the new data.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">todb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>... using <a class="reference external" href="http://docs.python.org/library/sqlite3.html#sqlite3" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">sqlite3</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># assuming table &quot;foobar&quot; already exists in the database</span>
<span class="gp">... </span><span class="n">todb</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">)</span>    
</pre></div>
</div>
<p>... using <tt class="xref py py-mod docutils literal"><span class="pre">psycopg2</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psycopg2</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;dbname=test user=postgres&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># assuming table &quot;foobar&quot; already exists in the database</span>
<span class="gp">... </span><span class="n">todb</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">)</span>    
</pre></div>
</div>
<p>... using <tt class="xref py py-mod docutils literal"><span class="pre">MySQLdb</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">MySQLdb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">MySQLdb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">passwd</span><span class="o">=</span><span class="s">&quot;moonpie&quot;</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="s">&quot;thangs&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># assuming table &quot;foobar&quot; already exists in the database</span>
<span class="gp">... </span><span class="n">todb</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">)</span>    
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.appenddb">
<tt class="descclassname">petl.</tt><tt class="descname">appenddb</tt><big>(</big><em>table</em>, <em>connection</em>, <em>tablename</em>, <em>commit=True</em><big>)</big><a class="headerlink" href="#petl.appenddb" title="Permalink to this definition">¶</a></dt>
<dd><p>Load data into an existing database table via a DB-API 2.0
connection. Note that the database table will be appended, i.e.,
the new data will be inserted into the table, and any existing
rows will remain.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">appenddb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>... using <a class="reference external" href="http://docs.python.org/library/sqlite3.html#sqlite3" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">sqlite3</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># assuming table &quot;foobar&quot; already exists in the database</span>
<span class="gp">... </span><span class="n">appenddb</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">)</span>    
</pre></div>
</div>
<p>... using <tt class="xref py py-mod docutils literal"><span class="pre">psycopg2</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psycopg2</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;dbname=test user=postgres&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># assuming table &quot;foobar&quot; already exists in the database</span>
<span class="gp">... </span><span class="n">appenddb</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">)</span>    
</pre></div>
</div>
<p>... using <tt class="xref py py-mod docutils literal"><span class="pre">MySQLdb</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">MySQLdb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">MySQLdb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">passwd</span><span class="o">=</span><span class="s">&quot;moonpie&quot;</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="s">&quot;thangs&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># assuming table &quot;foobar&quot; already exists in the database</span>
<span class="gp">... </span><span class="n">appenddb</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">)</span>    
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.totext">
<tt class="descclassname">petl.</tt><tt class="descname">totext</tt><big>(</big><em>table</em>, <em>source=None</em>, <em>template=None</em>, <em>prologue=None</em>, <em>epilogue=None</em><big>)</big><a class="headerlink" href="#petl.totext" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the table to a text file. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">totext</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">prologue</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{| class=&quot;wikitable&quot;</span>
<span class="gp">... </span><span class="s">|-</span>
<span class="gp">... </span><span class="s">! foo</span>
<span class="gp">... </span><span class="s">! bar</span>
<span class="gp">... </span><span class="s">&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;|-</span>
<span class="gp">... </span><span class="s">| {foo}</span>
<span class="gp">... </span><span class="s">| {bar}</span>
<span class="gp">... </span><span class="s">&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">epilogue</span> <span class="o">=</span> <span class="s">&quot;|}&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">totext</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;test.txt&#39;</span><span class="p">,</span> <span class="n">template</span><span class="p">,</span> <span class="n">prologue</span><span class="p">,</span> <span class="n">epilogue</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># see what we did</span>
<span class="gp">... </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;test.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">... </span>    
<span class="go">{| class=&quot;wikitable&quot;</span>
<span class="go">|-</span>
<span class="go">! foo</span>
<span class="go">! bar</span>
<span class="go">|-</span>
<span class="go">| a</span>
<span class="go">| 1</span>
<span class="go">|-</span>
<span class="go">| b</span>
<span class="go">| 2</span>
<span class="go">|-</span>
<span class="go">| c</span>
<span class="go">| 2</span>
<span class="go">|}</span>
</pre></div>
</div>
<p>The <cite>template</cite> will be used to format each row via <a class="reference external" href="http://docs.python.org/library/stdtypes.html#str.format">str.format</a>.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.9.</span></p>
<p>Now supports transparent handling of gzipped files (any file name ending in 
&#8216;.gz&#8217;).</p>
</dd></dl>

<dl class="function">
<dt id="petl.appendtext">
<tt class="descclassname">petl.</tt><tt class="descname">appendtext</tt><big>(</big><em>table</em>, <em>source=None</em>, <em>template=None</em>, <em>prologue=None</em>, <em>epilogue=None</em><big>)</big><a class="headerlink" href="#petl.appendtext" title="Permalink to this definition">¶</a></dt>
<dd><p>As <a class="reference internal" href="#petl.totext" title="petl.totext"><tt class="xref py py-func docutils literal"><span class="pre">totext()</span></tt></a> but the file is opened in append mode.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.9.</span></p>
<p>Now supports transparent handling of gzipped files (any file name ending in 
&#8216;.gz&#8217;).</p>
</dd></dl>

<dl class="function">
<dt id="petl.tojson">
<tt class="descclassname">petl.</tt><tt class="descname">tojson</tt><big>(</big><em>table</em>, <em>source=None</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.tojson" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a table in JSON format. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">tojson</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">tojson</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;example.json&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># check what it did</span>
<span class="gp">... </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;example.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">... </span>
<span class="go">[{u&#39;foo&#39;: u&#39;a&#39;, u&#39;bar&#39;: 1}, {u&#39;foo&#39;: u&#39;b&#39;, u&#39;bar&#39;: 2}, {u&#39;foo&#39;: u&#39;c&#39;, u&#39;bar&#39;: 2}]</span>
</pre></div>
</div>
<p>Note that this is currently not streaming, all data is loaded into memory
before being written to the file.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

</div>
<div class="section" id="utility-functions">
<h2>Utility functions<a class="headerlink" href="#utility-functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="petl.header">
<tt class="descclassname">petl.</tt><tt class="descname">header</tt><big>(</big><em>table</em><big>)</big><a class="headerlink" href="#petl.header" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the header row for the given table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">header</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">[&#39;foo&#39;, &#39;bar&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.data">
<tt class="descclassname">petl.</tt><tt class="descname">data</tt><big>(</big><em>table</em>, <em>*sliceargs</em><big>)</big><a class="headerlink" href="#petl.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a container supporting iteration over data rows in a given 
table. I.e., like <tt class="xref py py-func docutils literal"><span class="pre">iterdata()</span></tt> only a container is returned so you 
can iterate over it multiple times.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.10.</span></p>
<p>Now returns a container, previously returned an iterator. See also 
<tt class="xref py py-func docutils literal"><span class="pre">iterdata()</span></tt>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.dataslice">
<tt class="descclassname">petl.</tt><tt class="descname">dataslice</tt><big>(</big><em>table</em>, <em>*args</em><big>)</big><a class="headerlink" href="#petl.dataslice" title="Permalink to this definition">¶</a></dt>
<dd><p class="deprecated">
<span class="versionmodified">Deprecated since version 0.3.</span></p>
<p>Use <a class="reference internal" href="#petl.data" title="petl.data"><tt class="xref py py-func docutils literal"><span class="pre">data()</span></tt></a> instead, it supports slice arguments.</p>
</dd></dl>

<dl class="function">
<dt id="petl.records">
<tt class="descclassname">petl.</tt><tt class="descname">records</tt><big>(</big><em>table</em>, <em>missing=None</em><big>)</big><a class="headerlink" href="#petl.records" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterator over the data in the table, yielding each row as a 
dictionary of values indexed by field name. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">records</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span> <span class="o">=</span> <span class="n">records</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">{&#39;foo&#39;: &#39;a&#39;, &#39;bar&#39;: 1}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">{&#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 2}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">StopIteration</span>
</pre></div>
</div>
<p>Short rows are padded, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span> <span class="o">=</span> <span class="n">records</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">{&#39;foo&#39;: &#39;a&#39;, &#39;bar&#39;: 1}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">{&#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: None}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">StopIteration</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.fieldnames">
<tt class="descclassname">petl.</tt><tt class="descname">fieldnames</tt><big>(</big><em>table</em><big>)</big><a class="headerlink" href="#petl.fieldnames" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the string values of all fields for the given table. If the fields
are strings, then this function is equivalent to <a class="reference internal" href="#petl.header" title="petl.header"><tt class="xref py py-func docutils literal"><span class="pre">header()</span></tt></a>, i.e.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">header</span><span class="p">,</span> <span class="n">fieldnames</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">[&#39;foo&#39;, &#39;bar&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fieldnames</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">[&#39;foo&#39;, &#39;bar&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span> <span class="o">==</span> <span class="n">fieldnames</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Allows for custom field objects, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">CustomField</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">description</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">id</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s">&#39;CustomField(</span><span class="si">%r</span><span class="s">, </span><span class="si">%r</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="n">CustomField</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;Get some foo.&#39;</span><span class="p">),</span> <span class="n">CustomField</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;A lot of bar.&#39;</span><span class="p">)],</span> 
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> 
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">[CustomField(&#39;foo&#39;, &#39;Get some foo.&#39;), CustomField(&#39;bar&#39;, &#39;A lot of bar.&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fieldnames</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>    
<span class="go">[&#39;foo&#39;, &#39;bar&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.rowcount">
<tt class="descclassname">petl.</tt><tt class="descname">rowcount</tt><big>(</big><em>table</em><big>)</big><a class="headerlink" href="#petl.rowcount" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of data rows in a table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rowcount</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rowcount</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.10.</span></p>
<p>Renamed from &#8216;rowcount&#8217; to &#8216;nrows&#8217;.</p>
</dd></dl>

<dl class="function">
<dt id="petl.look">
<tt class="descclassname">petl.</tt><tt class="descname">look</tt><big>(</big><em>table</em>, <em>*sliceargs</em><big>)</big><a class="headerlink" href="#petl.look" title="Permalink to this definition">¶</a></dt>
<dd><p>Format a portion of the table as text for inspection in an interactive
session. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Any irregularities in the length of header and/or data rows will appear as
blank cells, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">True</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">+-------+-------+------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |      |</span>
<span class="go">+=======+=======+======+</span>
<span class="go">| &#39;a&#39;   |       |      |</span>
<span class="go">+-------+-------+------+</span>
<span class="go">| &#39;b&#39;   | 2     | True |</span>
<span class="go">+-------+-------+------+</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.3.</span></p>
<p>Positional arguments can be used to slice the data rows. The <cite>sliceargs</cite> are 
passed to <a class="reference external" href="http://docs.python.org/library/itertools.html#itertools.islice" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">itertools.islice()</span></tt></a>.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.8.</span></p>
<p>The properties <cite>n</cite> and <cite>p</cite> can be used to look at the next and previous rows
respectively. I.e., try <tt class="docutils literal"><span class="pre">&gt;&gt;&gt;</span> <span class="pre">look(table)</span></tt> then <tt class="docutils literal"><span class="pre">&gt;&gt;&gt;</span> <span class="pre">_.n`</span></tt> then <tt class="docutils literal"><span class="pre">&gt;&gt;&gt;</span> <span class="pre">_.p</span></tt>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.lookall">
<tt class="descclassname">petl.</tt><tt class="descname">lookall</tt><big>(</big><em>table</em><big>)</big><a class="headerlink" href="#petl.lookall" title="Permalink to this definition">¶</a></dt>
<dd><p>Format the entire table as text for inspection in an interactive session.</p>
<p>N.B., this will load the entire table into memory.</p>
</dd></dl>

<dl class="function">
<dt id="petl.see">
<tt class="descclassname">petl.</tt><tt class="descname">see</tt><big>(</big><em>table</em>, <em>*sliceargs</em><big>)</big><a class="headerlink" href="#petl.see" title="Permalink to this definition">¶</a></dt>
<dd><p>Format a portion of a table as text in a column-oriented layout for 
inspection in an interactive session. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">see</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">see</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">&#39;foo&#39;: &#39;a&#39;, &#39;b&#39;</span>
<span class="go">&#39;bar&#39;: 1, 2</span>
</pre></div>
</div>
<p>Useful for tables with a larger number of fields.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.3.</span></p>
<p>Positional arguments can be used to slice the data rows. The <cite>sliceargs</cite> are 
passed to <a class="reference external" href="http://docs.python.org/library/itertools.html#itertools.islice" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">itertools.islice()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.itervalues">
<tt class="descclassname">petl.</tt><tt class="descname">itervalues</tt><big>(</big><em>table</em>, <em>field</em>, <em>*sliceargs</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.itervalues" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterator over values in a given field or fields. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">itervalues</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span> <span class="o">=</span> <span class="n">itervalues</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">&#39;a&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">&#39;b&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">&#39;b&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">&#39;c&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">StopIteration</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a single field name or index (starting from zero)
or a tuple of field names and/or indexes.</p>
<p>If rows are uneven, the value of the keyword argument <cite>missing</cite> is returned.</p>
<p>More than one field can be selected, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;bb&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foobaz</span> <span class="o">=</span> <span class="n">itervalues</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foobaz</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">(1, True)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foobaz</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">(2, True)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foobaz</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">(3, False)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foobaz</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">StopIteration</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.3.</span></p>
<p>Positional arguments can be used to slice the data rows. The <cite>sliceargs</cite> are 
passed to <a class="reference external" href="http://docs.python.org/library/itertools.html#itertools.islice" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">itertools.islice()</span></tt></a>.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.7.</span></p>
<p>In previous releases this function was known as &#8216;values&#8217;. Also in this release
the behaviour with short rows is changed. Now for any value missing due to a 
short row, <tt class="xref docutils literal"><span class="pre">None</span></tt> is returned by default, or whatever is given by the
<cite>missing</cite> keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.values">
<tt class="descclassname">petl.</tt><tt class="descname">values</tt><big>(</big><em>table</em>, <em>field</em>, <em>*sliceargs</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.values" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a container supporting iteration over values in a given field or 
fields. I.e., like <a class="reference internal" href="#petl.itervalues" title="petl.itervalues"><tt class="xref py py-func docutils literal"><span class="pre">itervalues()</span></tt></a> only a container is returned so you 
can iterate over it multiple times.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.7.</span></p>
<p>Now returns a container, previously returned an iterator. See also 
<a class="reference internal" href="#petl.itervalues" title="petl.itervalues"><tt class="xref py py-func docutils literal"><span class="pre">itervalues()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.valueset">
<tt class="descclassname">petl.</tt><tt class="descname">valueset</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.valueset" title="Permalink to this definition">¶</a></dt>
<dd><p class="deprecated">
<span class="versionmodified">Deprecated since version 0.3.</span></p>
<p>Use <tt class="docutils literal"><span class="pre">set(values(table,</span> <span class="pre">*fields))</span></tt> instead, see also <a class="reference internal" href="#petl.values" title="petl.values"><tt class="xref py py-func docutils literal"><span class="pre">values()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.valuecount">
<tt class="descclassname">petl.</tt><tt class="descname">valuecount</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em><big>)</big><a class="headerlink" href="#petl.valuecount" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of occurrences of <cite>value</cite> under the given field. Returns
the absolute count and relative frequency as a pair. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">valuecount</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">((</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">valuecount</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span>
<span class="go">0.6666666666666666</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a single field name or index (starting from zero)
or a tuple of field names and/or indexes.</p>
</dd></dl>

<dl class="function">
<dt id="petl.valuecounts">
<tt class="descclassname">petl.</tt><tt class="descname">valuecounts</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.valuecounts" title="Permalink to this definition">¶</a></dt>
<dd><p>Find distinct values for the given field and count the number and relative
frequency of occurrences. Returns a table mapping values to counts, with most common 
values first. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">valuecounts</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">valuecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">))</span>
<span class="go">+---------+---------+-------------+</span>
<span class="go">| &#39;value&#39; | &#39;count&#39; | &#39;frequency&#39; |</span>
<span class="go">+=========+=========+=============+</span>
<span class="go">| &#39;b&#39;     | 2       | 0.5         |</span>
<span class="go">+---------+---------+-------------+</span>
<span class="go">| &#39;a&#39;     | 1       | 0.25        |</span>
<span class="go">+---------+---------+-------------+</span>
<span class="go">| &#39;c&#39;     | 1       | 0.25        |</span>
<span class="go">+---------+---------+-------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">valuecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">))</span>
<span class="go">+---------+---------+--------------------+</span>
<span class="go">| &#39;value&#39; | &#39;count&#39; | &#39;frequency&#39;        |</span>
<span class="go">+=========+=========+====================+</span>
<span class="go">| True    | 2       | 0.6666666666666666 |</span>
<span class="go">+---------+---------+--------------------+</span>
<span class="go">| False   | 1       | 0.3333333333333333 |</span>
<span class="go">+---------+---------+--------------------+</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a single field name or index (starting from zero)
or a tuple of field names and/or indexes.</p>
</dd></dl>

<dl class="function">
<dt id="petl.valuecounter">
<tt class="descclassname">petl.</tt><tt class="descname">valuecounter</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.valuecounter" title="Permalink to this definition">¶</a></dt>
<dd><p>Find distinct values for the given field and count the number of 
occurrences. Returns a <a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></a> mapping values to counts. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">valuecounter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">valuecounter</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span>
<span class="go">Counter({&#39;b&#39;: 2, &#39;a&#39;: 1, &#39;c&#39;: 1})</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a single field name or index (starting from zero)
or a tuple of field names and/or indexes.</p>
</dd></dl>

<dl class="function">
<dt id="petl.columns">
<tt class="descclassname">petl.</tt><tt class="descname">columns</tt><big>(</big><em>table</em>, <em>missing=None</em><big>)</big><a class="headerlink" href="#petl.columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a <a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></a> mapping field names to lists of values. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">columns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cols</span> <span class="o">=</span> <span class="n">columns</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cols</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">]</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, &#39;b&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cols</span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">]</span>    
<span class="go">[1, 2, 3]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.facetcolumns">
<tt class="descclassname">petl.</tt><tt class="descname">facetcolumns</tt><big>(</big><em>table</em>, <em>key</em>, <em>missing=None</em><big>)</big><a class="headerlink" href="#petl.facetcolumns" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#petl.columns" title="petl.columns"><tt class="xref py py-func docutils literal"><span class="pre">columns()</span></tt></a> but stratified by values of the given key field. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">facetcolumns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span> 
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> 
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> 
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span> <span class="o">=</span> <span class="n">facetcolumns</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">{&#39;baz&#39;: [True], &#39;foo&#39;: [&#39;a&#39;], &#39;bar&#39;: [1]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">{&#39;baz&#39;: [True, None], &#39;foo&#39;: [&#39;b&#39;, &#39;b&#39;], &#39;bar&#39;: [2, 3]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">KeyError</span>: <span class="n">&#39;c&#39;</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 0.8.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.isunique">
<tt class="descclassname">petl.</tt><tt class="descname">isunique</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.isunique" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if there are no duplicate values for the given field(s), otherwise
False. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">isunique</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">True</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isunique</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isunique</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a single field name or index (starting from zero)
or a tuple of field names and/or indexes.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.10.</span></p>
<p>Renamed from &#8220;unique&#8221;. See also <a class="reference internal" href="#petl.unique" title="petl.unique"><tt class="xref py py-func docutils literal"><span class="pre">petl.unique()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.isordered">
<tt class="descclassname">petl.</tt><tt class="descname">isordered</tt><big>(</big><em>table</em>, <em>key=None</em>, <em>reverse=False</em>, <em>strict=False</em><big>)</big><a class="headerlink" href="#petl.isordered" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the table is ordered (i.e., sorted) by the given key. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">isordered</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 3     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |       |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">isordered</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isordered</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isordered</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 0.10.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.limits">
<tt class="descclassname">petl.</tt><tt class="descname">limits</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.limits" title="Permalink to this definition">¶</a></dt>
<dd><p>Find minimum and maximum values under the given field. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">limits</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">minv</span><span class="p">,</span> <span class="n">maxv</span> <span class="o">=</span> <span class="n">limits</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">minv</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maxv</span>
<span class="go">3</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a field name or index (starting from zero).</p>
</dd></dl>

<dl class="function">
<dt id="petl.stats">
<tt class="descclassname">petl.</tt><tt class="descname">stats</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate basic descriptive statistics on a given field. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">stats</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3.4&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">u&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;3&#39;</span><span class="p">,</span> <span class="s">u&#39;7.8&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;xyz&#39;</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>    
<span class="go">{&#39;count&#39;: 3, &#39;errors&#39;: 2, &#39;min&#39;: 1.0, &#39;max&#39;: 3.0, &#39;sum&#39;: 6.0, &#39;mean&#39;: 2.0}</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a field name or index (starting from zero).</p>
</dd></dl>

<dl class="function">
<dt id="petl.lenstats">
<tt class="descclassname">petl.</tt><tt class="descname">lenstats</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="reference internal" href="_modules/petl.html#lenstats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#petl.lenstats" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to report statistics on value lengths under the given
field. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">lenstats</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;aaa&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;aa&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;aaa&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;aaaaaaaaaaa&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lenstats</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="go">{&#39;count&#39;: 5, &#39;errors&#39;: 0, &#39;min&#39;: 1.0, &#39;max&#39;: 11.0, &#39;sum&#39;: 20.0, &#39;mean&#39;: 4.0}</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.stringpatterns">
<tt class="descclassname">petl.</tt><tt class="descname">stringpatterns</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.stringpatterns" title="Permalink to this definition">¶</a></dt>
<dd><p>Profile string patterns in the given field, returning a table of patterns,
counts and frequencies. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">stringpatterns</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;Mr. Foo&#39;</span><span class="p">,</span> <span class="s">&#39;123-1254&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;Mrs. Bar&#39;</span><span class="p">,</span> <span class="s">&#39;234-1123&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;Mr. Spo&#39;</span><span class="p">,</span> <span class="s">&#39;123-1254&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">u&#39;Mr. Baz&#39;</span><span class="p">,</span> <span class="s">u&#39;321 1434&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">u&#39;Mrs. Baz&#39;</span><span class="p">,</span> <span class="s">u&#39;321 1434&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;Mr. Quux&#39;</span><span class="p">,</span> <span class="s">&#39;123-1254-XX&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foopats</span> <span class="o">=</span> <span class="n">stringpatterns</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">foopats</span><span class="p">)</span>
<span class="go">+------------+---------+---------------------+</span>
<span class="go">| &#39;pattern&#39;  | &#39;count&#39; | &#39;frequency&#39;         |</span>
<span class="go">+============+=========+=====================+</span>
<span class="go">| &#39;Aa. Aaa&#39;  | 3       | 0.5                 |</span>
<span class="go">+------------+---------+---------------------+</span>
<span class="go">| &#39;Aaa. Aaa&#39; | 2       | 0.3333333333333333  |</span>
<span class="go">+------------+---------+---------------------+</span>
<span class="go">| &#39;Aa. Aaaa&#39; | 1       | 0.16666666666666666 |</span>
<span class="go">+------------+---------+---------------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">barpats</span> <span class="o">=</span> <span class="n">stringpatterns</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">barpats</span><span class="p">)</span>
<span class="go">+---------------+---------+---------------------+</span>
<span class="go">| &#39;pattern&#39;     | &#39;count&#39; | &#39;frequency&#39;         |</span>
<span class="go">+===============+=========+=====================+</span>
<span class="go">| &#39;999-9999&#39;    | 3       | 0.5                 |</span>
<span class="go">+---------------+---------+---------------------+</span>
<span class="go">| &#39;999 9999&#39;    | 2       | 0.3333333333333333  |</span>
<span class="go">+---------------+---------+---------------------+</span>
<span class="go">| &#39;999-9999-AA&#39; | 1       | 0.16666666666666666 |</span>
<span class="go">+---------------+---------+---------------------+</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.stringpatterncounter">
<tt class="descclassname">petl.</tt><tt class="descname">stringpatterncounter</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.stringpatterncounter" title="Permalink to this definition">¶</a></dt>
<dd><p>Profile string patterns in the given field, returning a <a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></a> 
mapping patterns to counts.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.rowlengths">
<tt class="descclassname">petl.</tt><tt class="descname">rowlengths</tt><big>(</big><em>table</em><big>)</big><a class="headerlink" href="#petl.rowlengths" title="Permalink to this definition">¶</a></dt>
<dd><p>Report on row lengths found in the table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">rowlengths</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3.4&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">u&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;3&#39;</span><span class="p">,</span> <span class="s">u&#39;7.8&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;xyz&#39;</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;F&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">rowlengths</span><span class="p">(</span><span class="n">table</span><span class="p">))</span>
<span class="go">+----------+---------+</span>
<span class="go">| &#39;length&#39; | &#39;count&#39; |</span>
<span class="go">+==========+=========+</span>
<span class="go">| 3        | 3       |</span>
<span class="go">+----------+---------+</span>
<span class="go">| 2        | 2       |</span>
<span class="go">+----------+---------+</span>
<span class="go">| 4        | 1       |</span>
<span class="go">+----------+---------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.typecounts">
<tt class="descclassname">petl.</tt><tt class="descname">typecounts</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.typecounts" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of values found for each Python type and return a table
mapping class names to counts and frequencies. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">typecounts</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3.4&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">u&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;3&#39;</span><span class="p">,</span> <span class="s">u&#39;7.8&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">u&#39;xyz&#39;</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">typecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">))</span>
<span class="go">+-----------+---------+-------------+</span>
<span class="go">| &#39;type&#39;    | &#39;count&#39; | &#39;frequency&#39; |</span>
<span class="go">+===========+=========+=============+</span>
<span class="go">| &#39;str&#39;     | 4       | 0.8         |</span>
<span class="go">+-----------+---------+-------------+</span>
<span class="go">| &#39;unicode&#39; | 1       | 0.2         |</span>
<span class="go">+-----------+---------+-------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">typecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">))</span>
<span class="go">+-----------+---------+-------------+</span>
<span class="go">| &#39;type&#39;    | &#39;count&#39; | &#39;frequency&#39; |</span>
<span class="go">+===========+=========+=============+</span>
<span class="go">| &#39;unicode&#39; | 3       | 0.6         |</span>
<span class="go">+-----------+---------+-------------+</span>
<span class="go">| &#39;int&#39;     | 2       | 0.4         |</span>
<span class="go">+-----------+---------+-------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">typecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">))</span>
<span class="go">+-----------+---------+-------------+</span>
<span class="go">| &#39;type&#39;    | &#39;count&#39; | &#39;frequency&#39; |</span>
<span class="go">+===========+=========+=============+</span>
<span class="go">| &#39;int&#39;     | 1       | 0.25        |</span>
<span class="go">+-----------+---------+-------------+</span>
<span class="go">| &#39;float&#39;   | 1       | 0.25        |</span>
<span class="go">+-----------+---------+-------------+</span>
<span class="go">| &#39;unicode&#39; | 1       | 0.25        |</span>
<span class="go">+-----------+---------+-------------+</span>
<span class="go">| &#39;str&#39;     | 1       | 0.25        |</span>
<span class="go">+-----------+---------+-------------+</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a field name or index (starting from zero).</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.6.</span></p>
<p>Added frequency.</p>
</dd></dl>

<dl class="function">
<dt id="petl.typecounter">
<tt class="descclassname">petl.</tt><tt class="descname">typecounter</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.typecounter" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of values found for each Python type. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">typecounter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3.4&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">u&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;3&#39;</span><span class="p">,</span> <span class="s">u&#39;7.8&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">u&#39;xyz&#39;</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">typecounter</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="go">Counter({&#39;str&#39;: 4, &#39;unicode&#39;: 1})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">typecounter</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="go">Counter({&#39;unicode&#39;: 3, &#39;int&#39;: 2})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">typecounter</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">)</span>
<span class="go">Counter({&#39;int&#39;: 1, &#39;float&#39;: 1, &#39;unicode&#39;: 1, &#39;str&#39;: 1})</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a field name or index (starting from zero).</p>
</dd></dl>

<dl class="function">
<dt id="petl.typeset">
<tt class="descclassname">petl.</tt><tt class="descname">typeset</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.typeset" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a set containing all Python types found for values in the given field.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">typeset</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3.4&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">u&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;3&#39;</span><span class="p">,</span> <span class="s">&#39;7.8&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">u&#39;xyz&#39;</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">typeset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span> 
<span class="go">set([&lt;type &#39;str&#39;&gt;, &lt;type &#39;unicode&#39;&gt;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">typeset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span> 
<span class="go">set([&lt;type &#39;int&#39;&gt;, &lt;type &#39;unicode&#39;&gt;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">typeset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">)</span> 
<span class="go">set([&lt;type &#39;float&#39;&gt;, &lt;type &#39;str&#39;&gt;])</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a field name or index (starting from zero).</p>
</dd></dl>

<dl class="function">
<dt id="petl.parsecounts">
<tt class="descclassname">petl.</tt><tt class="descname">parsecounts</tt><big>(</big><em>table</em>, <em>field</em>, <em>parsers={'int': &lt;type 'int'&gt;</em>, <em>'float': &lt;type 'float'&gt;}</em><big>)</big><a class="headerlink" href="#petl.parsecounts" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of <cite>str</cite> or <cite>unicode</cite> values that can be parsed as ints, 
floats or via custom parser functions. Return a table mapping parser names
to the number of values successfully parsed and the number of errors. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">parsecounts</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;aaa&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3.4&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">u&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;3&#39;</span><span class="p">,</span> <span class="s">u&#39;7.8&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;3.7&#39;</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">parsecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">))</span>
<span class="go">+---------+---------+----------+</span>
<span class="go">| &#39;type&#39;  | &#39;count&#39; | &#39;errors&#39; |</span>
<span class="go">+=========+=========+==========+</span>
<span class="go">| &#39;float&#39; | 3       | 1        |</span>
<span class="go">+---------+---------+----------+</span>
<span class="go">| &#39;int&#39;   | 2       | 2        |</span>
<span class="go">+---------+---------+----------+</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a field name or index (starting from zero).</p>
</dd></dl>

<dl class="function">
<dt id="petl.parsecounter">
<tt class="descclassname">petl.</tt><tt class="descname">parsecounter</tt><big>(</big><em>table</em>, <em>field</em>, <em>parsers={'int': &lt;type 'int'&gt;</em>, <em>'float': &lt;type 'float'&gt;}</em><big>)</big><a class="headerlink" href="#petl.parsecounter" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of <cite>str</cite> or <cite>unicode</cite> values under the given fields that can 
be parsed as ints, floats or via custom parser functions. Return a pair of 
<cite>Counter</cite> objects, the first mapping parser names to the number of strings 
successfully parsed, the second mapping parser names to the number of errors. 
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">parsecounter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;aaa&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3.4&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">u&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;3&#39;</span><span class="p">,</span> <span class="s">u&#39;7.8&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;3.7&#39;</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span><span class="p">,</span> <span class="n">errors</span> <span class="o">=</span> <span class="n">parsecounter</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span>
<span class="go">Counter({&#39;float&#39;: 3, &#39;int&#39;: 2})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">errors</span>
<span class="go">Counter({&#39;int&#39;: 2, &#39;float&#39;: 1})</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a field name or index (starting from zero).</p>
</dd></dl>

<dl class="function">
<dt id="petl.dateparser">
<tt class="descclassname">petl.</tt><tt class="descname">dateparser</tt><big>(</big><em>fmt</em>, <em>strict=True</em><big>)</big><a class="headerlink" href="#petl.dateparser" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a function to parse strings as <a class="reference external" href="http://docs.python.org/library/datetime.html#datetime.date" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime.date</span></tt></a> objects using a given format.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">dateparser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isodate</span> <span class="o">=</span> <span class="n">dateparser</span><span class="p">(</span><span class="s">&#39;%Y-%m-</span><span class="si">%d</span><span class="s">&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isodate</span><span class="p">(</span><span class="s">&#39;2002-12-25&#39;</span><span class="p">)</span>
<span class="go">datetime.date(2002, 12, 25)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isodate</span><span class="p">(</span><span class="s">&#39;2002-02-30&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;petl/util.py&quot;</span>, line <span class="m">1032</span>, in <span class="n">parser</span>
    <span class="k">return</span> <span class="n">parser</span>
  File <span class="nb">&quot;/usr/lib/python2.7/_strptime.py&quot;</span>, line <span class="m">440</span>, in <span class="n">_strptime</span>
    <span class="n">datetime_date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">toordinal</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span>
<span class="gr">ValueError</span>: <span class="n">day is out of range for month</span>
</pre></div>
</div>
<p>Can be used with <a class="reference internal" href="#petl.parsecounts" title="petl.parsecounts"><tt class="xref py py-func docutils literal"><span class="pre">parsecounts()</span></tt></a>, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">parsecounts</span><span class="p">,</span> <span class="n">dateparser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;when&#39;</span><span class="p">,</span> <span class="s">&#39;who&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;2002-12-25&#39;</span><span class="p">,</span> <span class="s">&#39;Alex&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;2004-09-12&#39;</span><span class="p">,</span> <span class="s">&#39;Gloria&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;2002-13-25&#39;</span><span class="p">,</span> <span class="s">&#39;Marty&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;2002-02-30&#39;</span><span class="p">,</span> <span class="s">&#39;Melman&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parsers</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;date&#39;</span><span class="p">:</span> <span class="n">dateparser</span><span class="p">(</span><span class="s">&#39;%Y-%m-</span><span class="si">%d</span><span class="s">&#39;</span><span class="p">)}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">parsecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;when&#39;</span><span class="p">,</span> <span class="n">parsers</span><span class="p">))</span>
<span class="go">+--------+---------+----------+</span>
<span class="go">| &#39;type&#39; | &#39;count&#39; | &#39;errors&#39; |</span>
<span class="go">+========+=========+==========+</span>
<span class="go">| &#39;date&#39; | 2       | 2        |</span>
<span class="go">+--------+---------+----------+</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.6.</span></p>
<p>Added <cite>strict</cite> keyword argument. If <tt class="docutils literal"><span class="pre">strict=False</span></tt> then if an error occurs
when parsing, the original value will be returned as-is, and no error will
be raised. Allows for, e.g., incremental parsing of mixed format fields.</p>
</dd></dl>

<dl class="function">
<dt id="petl.timeparser">
<tt class="descclassname">petl.</tt><tt class="descname">timeparser</tt><big>(</big><em>fmt</em>, <em>strict=True</em><big>)</big><a class="headerlink" href="#petl.timeparser" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a function to parse strings as <a class="reference external" href="http://docs.python.org/library/datetime.html#datetime.time" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime.time</span></tt></a> objects using a given format.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">timeparser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isotime</span> <span class="o">=</span> <span class="n">timeparser</span><span class="p">(</span><span class="s">&#39;%H:%M:%S&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isotime</span><span class="p">(</span><span class="s">&#39;00:00:00&#39;</span><span class="p">)</span>
<span class="go">datetime.time(0, 0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isotime</span><span class="p">(</span><span class="s">&#39;13:00:00&#39;</span><span class="p">)</span>
<span class="go">datetime.time(13, 0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isotime</span><span class="p">(</span><span class="s">&#39;12:00:99&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;petl/util.py&quot;</span>, line <span class="m">1046</span>, in <span class="n">parser</span>
 <span class="c">   </span>
  File <span class="nb">&quot;/usr/lib/python2.7/_strptime.py&quot;</span>, line <span class="m">328</span>, in <span class="n">_strptime</span>
    <span class="n">data_string</span><span class="p">[</span><span class="n">found</span><span class="o">.</span><span class="n">end</span><span class="p">():])</span>
<span class="gr">ValueError: unconverted data remains</span>: <span class="n">9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isotime</span><span class="p">(</span><span class="s">&#39;25:00:00&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;petl/util.py&quot;</span>, line <span class="m">1046</span>, in <span class="n">parser</span>
 <span class="c">   </span>
  File <span class="nb">&quot;/usr/lib/python2.7/_strptime.py&quot;</span>, line <span class="m">325</span>, in <span class="n">_strptime</span>
    <span class="p">(</span><span class="n">data_string</span><span class="p">,</span> <span class="n">format</span><span class="p">))</span>
<span class="gr">ValueError</span>: <span class="n">time data &#39;25:00:00&#39; does not match format &#39;%H:%M:%S&#39;</span>
</pre></div>
</div>
<p>Can be used with <a class="reference internal" href="#petl.parsecounts" title="petl.parsecounts"><tt class="xref py py-func docutils literal"><span class="pre">parsecounts()</span></tt></a>, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">parsecounts</span><span class="p">,</span> <span class="n">timeparser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;when&#39;</span><span class="p">,</span> <span class="s">&#39;who&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;00:00:00&#39;</span><span class="p">,</span> <span class="s">&#39;Alex&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;12:02:45&#39;</span><span class="p">,</span> <span class="s">&#39;Gloria&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;25:01:01&#39;</span><span class="p">,</span> <span class="s">&#39;Marty&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;09:70:00&#39;</span><span class="p">,</span> <span class="s">&#39;Melman&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parsers</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;time&#39;</span><span class="p">:</span> <span class="n">timeparser</span><span class="p">(</span><span class="s">&#39;%H:%M:%S&#39;</span><span class="p">)}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">parsecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;when&#39;</span><span class="p">,</span> <span class="n">parsers</span><span class="p">))</span>
<span class="go">+--------+---------+----------+</span>
<span class="go">| &#39;type&#39; | &#39;count&#39; | &#39;errors&#39; |</span>
<span class="go">+========+=========+==========+</span>
<span class="go">| &#39;time&#39; | 2       | 2        |</span>
<span class="go">+--------+---------+----------+</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.6.</span></p>
<p>Added <cite>strict</cite> keyword argument. If <tt class="docutils literal"><span class="pre">strict=False</span></tt> then if an error occurs
when parsing, the original value will be returned as-is, and no error will
be raised. Allows for, e.g., incremental parsing of mixed format fields.</p>
</dd></dl>

<dl class="function">
<dt id="petl.datetimeparser">
<tt class="descclassname">petl.</tt><tt class="descname">datetimeparser</tt><big>(</big><em>fmt</em>, <em>strict=True</em><big>)</big><a class="headerlink" href="#petl.datetimeparser" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a function to parse strings as <a class="reference external" href="http://docs.python.org/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></tt></a> objects using a given format.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">datetimeparser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isodatetime</span> <span class="o">=</span> <span class="n">datetimeparser</span><span class="p">(</span><span class="s">&#39;%Y-%m-</span><span class="si">%d</span><span class="s">T%H:%M:%S&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isodatetime</span><span class="p">(</span><span class="s">&#39;2002-12-25T00:00:00&#39;</span><span class="p">)</span>
<span class="go">datetime.datetime(2002, 12, 25, 0, 0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isodatetime</span><span class="p">(</span><span class="s">&#39;2002-12-25T00:00:99&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;petl/util.py&quot;</span>, line <span class="m">1018</span>, in <span class="n">parser</span>
    <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="n">format</span><span class="p">)</span>
  File <span class="nb">&quot;/usr/lib/python2.7/_strptime.py&quot;</span>, line <span class="m">328</span>, in <span class="n">_strptime</span>
    <span class="n">data_string</span><span class="p">[</span><span class="n">found</span><span class="o">.</span><span class="n">end</span><span class="p">():])</span>
<span class="gr">ValueError: unconverted data remains</span>: <span class="n">9</span>
</pre></div>
</div>
<p>Can be used with <a class="reference internal" href="#petl.parsecounts" title="petl.parsecounts"><tt class="xref py py-func docutils literal"><span class="pre">parsecounts()</span></tt></a>, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">parsecounts</span><span class="p">,</span> <span class="n">datetimeparser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;when&#39;</span><span class="p">,</span> <span class="s">&#39;who&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;2002-12-25T00:00:00&#39;</span><span class="p">,</span> <span class="s">&#39;Alex&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;2004-09-12T01:10:11&#39;</span><span class="p">,</span> <span class="s">&#39;Gloria&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;2002-13-25T00:00:00&#39;</span><span class="p">,</span> <span class="s">&#39;Marty&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;2002-02-30T07:09:00&#39;</span><span class="p">,</span> <span class="s">&#39;Melman&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parsers</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;datetime&#39;</span><span class="p">:</span> <span class="n">datetimeparser</span><span class="p">(</span><span class="s">&#39;%Y-%m-</span><span class="si">%d</span><span class="s">T%H:%M:%S&#39;</span><span class="p">)}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">parsecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;when&#39;</span><span class="p">,</span> <span class="n">parsers</span><span class="p">))</span>
<span class="go">+------------+---------+----------+</span>
<span class="go">| &#39;type&#39;     | &#39;count&#39; | &#39;errors&#39; |</span>
<span class="go">+============+=========+==========+</span>
<span class="go">| &#39;datetime&#39; | 2       | 2        |</span>
<span class="go">+------------+---------+----------+</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.6.</span></p>
<p>Added <cite>strict</cite> keyword argument. If <tt class="docutils literal"><span class="pre">strict=False</span></tt> then if an error occurs
when parsing, the original value will be returned as-is, and no error will
be raised. Allows for, e.g., incremental parsing of mixed format fields.</p>
</dd></dl>

<dl class="function">
<dt id="petl.boolparser">
<tt class="descclassname">petl.</tt><tt class="descname">boolparser</tt><big>(</big><em>true_strings=['true', 't', 'yes', 'y', '1'], false_strings=['false', 'f', 'no', 'n', '0'], case_sensitive=False, strict=True</em><big>)</big><a class="headerlink" href="#petl.boolparser" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a function to parse strings as <tt class="xref py py-class docutils literal"><span class="pre">bool</span></tt> objects using a given set of
string representations for <cite>True</cite> and <cite>False</cite>.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">boolparser</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">mybool</span> <span class="o">=</span> <span class="n">boolparser</span><span class="p">(</span><span class="n">true_strings</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;yes&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">],</span> <span class="n">false_strings</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;no&#39;</span><span class="p">,</span> <span class="s">&#39;n&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mybool</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mybool</span><span class="p">(</span><span class="s">&#39;Y&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mybool</span><span class="p">(</span><span class="s">&#39;yes&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mybool</span><span class="p">(</span><span class="s">&#39;No&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mybool</span><span class="p">(</span><span class="s">&#39;nO&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mybool</span><span class="p">(</span><span class="s">&#39;true&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;petl/util.py&quot;</span>, line <span class="m">1175</span>, in <span class="n">parser</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;value is not one of recognised boolean strings: </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">value</span><span class="p">)</span>
<span class="gr">ValueError: value is not one of recognised boolean strings</span>: <span class="n">&#39;true&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mybool</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;petl/util.py&quot;</span>, line <span class="m">1175</span>, in <span class="n">parser</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;value is not one of recognised boolean strings: </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">value</span><span class="p">)</span>
<span class="gr">ValueError: value is not one of recognised boolean strings</span>: <span class="n">&#39;foo&#39;</span>
</pre></div>
</div>
<p>Can be used with <a class="reference internal" href="#petl.parsecounts" title="petl.parsecounts"><tt class="xref py py-func docutils literal"><span class="pre">parsecounts()</span></tt></a>, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">parsecounts</span><span class="p">,</span> <span class="n">boolparser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;who&#39;</span><span class="p">,</span> <span class="s">&#39;vote&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;Alex&#39;</span><span class="p">,</span> <span class="s">&#39;yes&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;Gloria&#39;</span><span class="p">,</span> <span class="s">&#39;N&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;Marty&#39;</span><span class="p">,</span> <span class="s">&#39;hmmm&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;Melman&#39;</span><span class="p">,</span> <span class="s">&#39;nope&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mybool</span> <span class="o">=</span> <span class="n">boolparser</span><span class="p">(</span><span class="n">true_strings</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;yes&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">],</span> <span class="n">false_strings</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;no&#39;</span><span class="p">,</span> <span class="s">&#39;n&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parsers</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;bool&#39;</span><span class="p">:</span> <span class="n">mybool</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">parsecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;vote&#39;</span><span class="p">,</span> <span class="n">parsers</span><span class="p">))</span>
<span class="go">+--------+---------+----------+</span>
<span class="go">| &#39;type&#39; | &#39;count&#39; | &#39;errors&#39; |</span>
<span class="go">+========+=========+==========+</span>
<span class="go">| &#39;bool&#39; | 2       | 2        |</span>
<span class="go">+--------+---------+----------+</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.6.</span></p>
<p>Added <cite>strict</cite> keyword argument. If <tt class="docutils literal"><span class="pre">strict=False</span></tt> then if an error occurs
when parsing, the original value will be returned as-is, and no error will
be raised. Allows for, e.g., incremental parsing of mixed format fields.</p>
</dd></dl>

<dl class="function">
<dt id="petl.parsenumber">
<tt class="descclassname">petl.</tt><tt class="descname">parsenumber</tt><big>(</big><em>v</em>, <em>strict=False</em><big>)</big><a class="headerlink" href="#petl.parsenumber" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to parse the value as a number, trying <a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">int()</span></tt></a>, <a class="reference external" href="http://docs.python.org/library/functions.html#long" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">long()</span></tt></a>,
<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">float()</span></tt></a> and <a class="reference external" href="http://docs.python.org/library/functions.html#complex" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">complex()</span></tt></a> in that order. If all fail, return the
value as-is.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.4.</span></p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.7: </span>Set <tt class="docutils literal"><span class="pre">strict=True</span></tt> to get an exception if parsing fails.</p>
</dd></dl>

<dl class="function">
<dt id="petl.lookup">
<tt class="descclassname">petl.</tt><tt class="descname">lookup</tt><big>(</big><em>table</em>, <em>keyspec</em>, <em>valuespec=None</em>, <em>dictionary=None</em><big>)</big><a class="headerlink" href="#petl.lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a dictionary with data from the given table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">lookup</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">[1]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">[2, 3]</span>
</pre></div>
</div>
<p>If no <cite>valuespec</cite> argument is given, defaults to the whole
row (as a tuple), e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">[(&#39;a&#39;, 1)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">[(&#39;b&#39;, 2), (&#39;b&#39;, 3)]</span>
</pre></div>
</div>
<p>Compound keys are supported, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t2</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">False</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">),</span> <span class="s">&#39;baz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="go">[True]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<span class="go">[False]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="go">[True, False]</span>
</pre></div>
</div>
<p>Data can be loaded into an existing dictionary-like object, including
persistent dictionaries created via the <a class="reference external" href="http://docs.python.org/library/shelve.html#shelve" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">shelve</span></tt></a> module, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shelve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;mylookup.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">lkp</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">exit</span><span class="p">()</span>
<span class="go">$ python</span>
<span class="go">Python 2.7.1+ (r271:86832, Apr 11 2011, 18:05:24) </span>
<span class="go">[GCC 4.5.2] on linux2</span>
<span class="go">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shelve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;mylookup.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">[1]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">[2, 3]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.lookupone">
<tt class="descclassname">petl.</tt><tt class="descname">lookupone</tt><big>(</big><em>table</em>, <em>keyspec</em>, <em>valuespec=None</em>, <em>dictionary=None</em>, <em>strict=True</em><big>)</big><a class="headerlink" href="#petl.lookupone" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a dictionary with data from the given table, assuming there is
at most one value for each key. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">lookupone</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">lookupone</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">]</span>
<span class="go">2</span>
</pre></div>
</div>
<p>If the specified key is not unique, will raise DuplicateKeyError, e.g.:</p>
<div class="highlight-python"><pre>&gt;&gt;&gt; table = [['foo', 'bar'], ['a', 1], ['b', 2], ['b', 3]]
&gt;&gt;&gt; lkp = lookupone(table, 'foo')
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "petl/util.py", line 451, in lookupone
petl.util.DuplicateKeyError</pre>
</div>
<p>Unique checks can be overridden by providing <cite>strict=False</cite>, in which case
the last value wins, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">lookupone</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">3</span>
</pre></div>
</div>
<p>Compound keys are supported, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t2</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">True</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">lookupone</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">),</span> <span class="s">&#39;baz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Data can be loaded into an existing dictionary-like object, including
persistent dictionaries created via the <a class="reference external" href="http://docs.python.org/library/shelve.html#shelve" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">shelve</span></tt></a> module, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">lookupone</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shelve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;mylookupone.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">lookupone</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">dictionary</span><span class="o">=</span><span class="n">lkp</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">exit</span><span class="p">()</span>
<span class="go">$ python</span>
<span class="go">Python 2.7.1+ (r271:86832, Apr 11 2011, 18:05:24) </span>
<span class="go">[GCC 4.5.2] on linux2</span>
<span class="go">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shelve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;mylookupone.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">]</span>
<span class="go">2</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.recordlookup">
<tt class="descclassname">petl.</tt><tt class="descname">recordlookup</tt><big>(</big><em>table</em>, <em>keyspec</em>, <em>dictionary=None</em><big>)</big><a class="headerlink" href="#petl.recordlookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a dictionary with data from the given table, mapping to records. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">recordlookup</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">recordlookup</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">[{&#39;foo&#39;: &#39;a&#39;, &#39;bar&#39;: 1}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">[{&#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 2}, {&#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 3}]</span>
</pre></div>
</div>
<p>Compound keys are supported, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t2</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">False</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">recordlookup</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="go">[{&#39;baz&#39;: True, &#39;foo&#39;: &#39;a&#39;, &#39;bar&#39;: 1}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<span class="go">[{&#39;baz&#39;: False, &#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 2}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="go">[{&#39;baz&#39;: True, &#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 3}, {&#39;baz&#39;: False, &#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 3}]</span>
</pre></div>
</div>
<p>Data can be loaded into an existing dictionary-like object, including
persistent dictionaries created via the <a class="reference external" href="http://docs.python.org/library/shelve.html#shelve" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">shelve</span></tt></a> module, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shelve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;myrecordlookup.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">recordlookup</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">dictionary</span><span class="o">=</span><span class="n">lkp</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">exit</span><span class="p">()</span>
<span class="go">$ python</span>
<span class="go">Python 2.7.1+ (r271:86832, Apr 11 2011, 18:05:24) </span>
<span class="go">[GCC 4.5.2] on linux2</span>
<span class="go">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shelve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;myrecordlookup.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">[{&#39;foo&#39;: &#39;a&#39;, &#39;bar&#39;: 1}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">[{&#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 2}, {&#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 3}]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.recordlookupone">
<tt class="descclassname">petl.</tt><tt class="descname">recordlookupone</tt><big>(</big><em>table</em>, <em>keyspec</em>, <em>dictionary=None</em>, <em>strict=True</em><big>)</big><a class="headerlink" href="#petl.recordlookupone" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a dictionary with data from the given table, mapping to records,
assuming there is at most one record for each key. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">recordlookupone</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">recordlookupone</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">{&#39;foo&#39;: &#39;a&#39;, &#39;bar&#39;: 1}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">{&#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 2}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">]</span>
<span class="go">{&#39;foo&#39;: &#39;c&#39;, &#39;bar&#39;: 2}</span>
</pre></div>
</div>
<p>If the specified key is not unique, will raise DuplicateKeyError, e.g.:</p>
<div class="highlight-python"><pre>&gt;&gt;&gt; table = [['foo', 'bar'], ['a', 1], ['b', 2], ['b', 3]]
&gt;&gt;&gt; lkp = recordlookupone(table, 'foo')
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "petl/util.py", line 451, in lookupone
petl.util.DuplicateKeyError</pre>
</div>
<p>Unique checks can be overridden by providing <cite>strict=False</cite>, in which case
the last record wins, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">recordlookupone</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">{&#39;foo&#39;: &#39;a&#39;, &#39;bar&#39;: 1}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">{&#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 3}</span>
</pre></div>
</div>
<p>Compound keys are supported, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t2</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">True</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">recordlookupone</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">),</span> <span class="n">strict</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="go">{&#39;baz&#39;: True, &#39;foo&#39;: &#39;a&#39;, &#39;bar&#39;: 1}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<span class="go">{&#39;baz&#39;: False, &#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 2}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="go">{&#39;baz&#39;: True, &#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 3}</span>
</pre></div>
</div>
<p>Data can be loaded into an existing dictionary-like object, including
persistent dictionaries created via the <a class="reference external" href="http://docs.python.org/library/shelve.html#shelve" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">shelve</span></tt></a> module, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shelve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;myrecordlookupone.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">recordlookupone</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">dictionary</span><span class="o">=</span><span class="n">lkp</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">exit</span><span class="p">()</span>
<span class="go">$ python</span>
<span class="go">Python 2.7.1+ (r271:86832, Apr 11 2011, 18:05:24) </span>
<span class="go">[GCC 4.5.2] on linux2</span>
<span class="go">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shelve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;myrecordlookupone.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">{&#39;foo&#39;: &#39;a&#39;, &#39;bar&#39;: 1}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">{&#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 2}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">]</span>
<span class="go">{&#39;foo&#39;: &#39;c&#39;, &#39;bar&#39;: 2}</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.statsum">
<tt class="descclassname">petl.</tt><tt class="descname">statsum</tt><big>(</big><em>filename</em><big>)</big><a class="headerlink" href="#petl.statsum" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a crude checksum of the file by hashing the file&#8217;s absolute path
name, the file size, and the file&#8217;s time of last modification. N.B., on
some systems this will give a 1s resolution, i.e., any changes to a file
within the same second that preserve the file size will <em>not</em> change the
result.</p>
</dd></dl>

<dl class="function">
<dt id="petl.adler32sum">
<tt class="descclassname">petl.</tt><tt class="descname">adler32sum</tt><big>(</big><em>filename</em><big>)</big><a class="headerlink" href="#petl.adler32sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the Adler 32 checksum of the file at the given location. Returns
the checksum as an integer, use hex(result) to view as hexadecimal.</p>
</dd></dl>

<dl class="function">
<dt id="petl.crc32sum">
<tt class="descclassname">petl.</tt><tt class="descname">crc32sum</tt><big>(</big><em>filename</em><big>)</big><a class="headerlink" href="#petl.crc32sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the CRC32 checksum of the file at the given location. Returns
the checksum as an integer, use hex(result) to view as hexadecimal.</p>
</dd></dl>

<dl class="function">
<dt id="petl.expr">
<tt class="descclassname">petl.</tt><tt class="descname">expr</tt><big>(</big><em>s</em><big>)</big><a class="headerlink" href="#petl.expr" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a function operating on a record (i.e., a dictionary representation
of a data row, indexed by field name).</p>
<p>The expression string is converted into a lambda function by prepending
the string with <tt class="docutils literal"><span class="pre">'lambda</span> <span class="pre">rec:</span> <span class="pre">'</span></tt>, then replacing anything enclosed in 
curly braces (e.g., <tt class="docutils literal"><span class="pre">&quot;{foo}&quot;</span></tt>) with a lookup on the record (e.g., 
<tt class="docutils literal"><span class="pre">&quot;rec['foo']&quot;</span></tt>), then finally calling <a class="reference external" href="http://docs.python.org/library/functions.html#eval" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">eval()</span></tt></a>.</p>
<p>So, e.g., the expression string <tt class="docutils literal"><span class="pre">&quot;{foo}</span> <span class="pre">*</span> <span class="pre">{bar}&quot;</span></tt> is converted to the 
function <tt class="docutils literal"><span class="pre">lambda</span> <span class="pre">rec:</span> <span class="pre">rec['foo']</span> <span class="pre">*</span> <span class="pre">rec['bar']</span></tt></p>
</dd></dl>

<dl class="function">
<dt id="petl.strjoin">
<tt class="descclassname">petl.</tt><tt class="descname">strjoin</tt><big>(</big><em>s</em><big>)</big><a class="headerlink" href="#petl.strjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a function to join sequences using <cite>s</cite> as the separator.</p>
</dd></dl>

<dl class="function">
<dt id="petl.randomtable">
<tt class="descclassname">petl.</tt><tt class="descname">randomtable</tt><big>(</big><em>numflds=5</em>, <em>numrows=100</em>, <em>wait=0</em><big>)</big><a class="headerlink" href="#petl.randomtable" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a table with random numerical data. Use <cite>numflds</cite> and <cite>numrows</cite> to
specify the number of fields and rows respectively. Set <cite>wait</cite> to a float
greater than zero to simulate a delay on each row generation (number of 
seconds per row). E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">randomtable</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">randomtable</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">+---------------------+---------------------+---------------------+----------------------+----------------------+</span>
<span class="go">| &#39;f0&#39;                | &#39;f1&#39;                | &#39;f2&#39;                | &#39;f3&#39;                 | &#39;f4&#39;                 |</span>
<span class="go">+=====================+=====================+=====================+======================+======================+</span>
<span class="go">| 0.37981479583619415 | 0.5651754962690851  | 0.5219839418441516  | 0.400507081757018    | 0.18772722969580335  |</span>
<span class="go">+---------------------+---------------------+---------------------+----------------------+----------------------+</span>
<span class="go">| 0.8523718373108918  | 0.9728988775985702  | 0.539819811070272   | 0.5253127991162814   | 0.032332586052070345 |</span>
<span class="go">+---------------------+---------------------+---------------------+----------------------+----------------------+</span>
<span class="go">| 0.15767415808765595 | 0.8723372406647985  | 0.8116271113050197  | 0.19606663402788693  | 0.02917384287810021  |</span>
<span class="go">+---------------------+---------------------+---------------------+----------------------+----------------------+</span>
<span class="go">| 0.29027126477145737 | 0.9458013821235983  | 0.0558711583090582  | 0.8388382491420909   | 0.533855533396786    |</span>
<span class="go">+---------------------+---------------------+---------------------+----------------------+----------------------+</span>
<span class="go">| 0.7299727877963395  | 0.7293822340944851  | 0.953624640847381   | 0.7161554959575555   | 0.8681001821667421   |</span>
<span class="go">+---------------------+---------------------+---------------------+----------------------+----------------------+</span>
<span class="go">| 0.7057077618876934  | 0.5222733323906424  | 0.26527912571554013 | 0.41069309093677264  | 0.7062831671289698   |</span>
<span class="go">+---------------------+---------------------+---------------------+----------------------+----------------------+</span>
<span class="go">| 0.9447075997744453  | 0.3980291877822444  | 0.5748113148854611  | 0.037655670603881974 | 0.30826709590498524  |</span>
<span class="go">+---------------------+---------------------+---------------------+----------------------+----------------------+</span>
<span class="go">| 0.21559911346698513 | 0.8353039675591192  | 0.5558847892537019  | 0.8561403358605812   | 0.01109608253313421  |</span>
<span class="go">+---------------------+---------------------+---------------------+----------------------+----------------------+</span>
<span class="go">| 0.27334411287843097 | 0.10064946027523636 | 0.7476185996637322  | 0.26201984851765325  | 0.6303996377010502   |</span>
<span class="go">+---------------------+---------------------+---------------------+----------------------+----------------------+</span>
<span class="go">| 0.8348722928576766  | 0.40319578510057763 | 0.3658094978577834  | 0.9829576880714145   | 0.6170025401631835   |</span>
<span class="go">+---------------------+---------------------+---------------------+----------------------+----------------------+</span>
</pre></div>
</div>
<p>Note that the data are generated on the fly and are not stored in memory,
so this function can be used to simulate very large tables.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.6.</span></p>
<p>See also <a class="reference internal" href="#petl.dummytable" title="petl.dummytable"><tt class="xref py py-func docutils literal"><span class="pre">dummytable()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.dummytable">
<tt class="descclassname">petl.</tt><tt class="descname">dummytable</tt><big>(</big><em>numrows=100, fields=[('foo', &lt;functools.partial object at 0xb1d4be4&gt;), ('bar', &lt;functools.partial object at 0xb1d4c0c&gt;), ('baz', &lt;built-in method random of Random object at 0xa33cfcc&gt;)], wait=0</em><big>)</big><a class="headerlink" href="#petl.dummytable" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a table with dummy data. Use <cite>numrows</cite> to specify the number of 
rows. Set <cite>wait</cite> to a float greater than zero to simulate a delay on each 
row generation (number of seconds per row). E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">dummytable</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t1</span> <span class="o">=</span> <span class="n">dummytable</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">t1</span><span class="p">)</span>
<span class="go">+-------+-----------+----------------------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39;     | &#39;baz&#39;                |</span>
<span class="go">+=======+===========+======================+</span>
<span class="go">| 98    | &#39;oranges&#39; | 0.017443519200384117 |</span>
<span class="go">+-------+-----------+----------------------+</span>
<span class="go">| 85    | &#39;pears&#39;   | 0.6126183086894914   |</span>
<span class="go">+-------+-----------+----------------------+</span>
<span class="go">| 43    | &#39;apples&#39;  | 0.8354915052285888   |</span>
<span class="go">+-------+-----------+----------------------+</span>
<span class="go">| 32    | &#39;pears&#39;   | 0.9612740566307508   |</span>
<span class="go">+-------+-----------+----------------------+</span>
<span class="go">| 35    | &#39;bananas&#39; | 0.4845179128370132   |</span>
<span class="go">+-------+-----------+----------------------+</span>
<span class="go">| 16    | &#39;pears&#39;   | 0.150174888085586    |</span>
<span class="go">+-------+-----------+----------------------+</span>
<span class="go">| 98    | &#39;bananas&#39; | 0.22592589109877748  |</span>
<span class="go">+-------+-----------+----------------------+</span>
<span class="go">| 82    | &#39;bananas&#39; | 0.4887849296756226   |</span>
<span class="go">+-------+-----------+----------------------+</span>
<span class="go">| 75    | &#39;apples&#39;  | 0.8414305202212253   |</span>
<span class="go">+-------+-----------+----------------------+</span>
<span class="go">| 78    | &#39;bananas&#39; | 0.025845900016858714 |</span>
<span class="go">+-------+-----------+----------------------+</span>
</pre></div>
</div>
<p>Note that the data are generated on the fly and are not stored in memory,
so this function can be used to simulate very large tables.</p>
<p>Data generation functions can be specified via the <cite>fields</cite> keyword argument,
or set on the table via the suffix notation, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">random</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t2</span> <span class="o">=</span> <span class="n">dummytable</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">partial</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">500</span><span class="p">))])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t2</span><span class="p">[</span><span class="s">&#39;baz&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;chocolate&#39;</span><span class="p">,</span> <span class="s">&#39;strawberry&#39;</span><span class="p">,</span> <span class="s">&#39;vanilla&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">t2</span><span class="p">)</span>
<span class="go">+---------------------+-------+--------------+</span>
<span class="go">| &#39;foo&#39;               | &#39;bar&#39; | &#39;baz&#39;        |</span>
<span class="go">+=====================+=======+==============+</span>
<span class="go">| 0.04595169186388326 | 370   | &#39;strawberry&#39; |</span>
<span class="go">+---------------------+-------+--------------+</span>
<span class="go">| 0.29252999472988905 | 90    | &#39;chocolate&#39;  |</span>
<span class="go">+---------------------+-------+--------------+</span>
<span class="go">| 0.7939324498894116  | 146   | &#39;chocolate&#39;  |</span>
<span class="go">+---------------------+-------+--------------+</span>
<span class="go">| 0.4964898678468417  | 123   | &#39;chocolate&#39;  |</span>
<span class="go">+---------------------+-------+--------------+</span>
<span class="go">| 0.26250784199548494 | 327   | &#39;strawberry&#39; |</span>
<span class="go">+---------------------+-------+--------------+</span>
<span class="go">| 0.748470693146964   | 275   | &#39;strawberry&#39; |</span>
<span class="go">+---------------------+-------+--------------+</span>
<span class="go">| 0.8995553034254133  | 151   | &#39;strawberry&#39; |</span>
<span class="go">+---------------------+-------+--------------+</span>
<span class="go">| 0.26331484411715367 | 211   | &#39;chocolate&#39;  |</span>
<span class="go">+---------------------+-------+--------------+</span>
<span class="go">| 0.4740252948218193  | 364   | &#39;vanilla&#39;    |</span>
<span class="go">+---------------------+-------+--------------+</span>
<span class="go">| 0.166428545780258   | 59    | &#39;vanilla&#39;    |</span>
<span class="go">+---------------------+-------+--------------+</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.6.</span></p>
<p>Now supports different field types, e.g., non-numeric. Previous functionality
is available as <a class="reference internal" href="#petl.randomtable" title="petl.randomtable"><tt class="xref py py-func docutils literal"><span class="pre">randomtable()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.diffheaders">
<tt class="descclassname">petl.</tt><tt class="descname">diffheaders</tt><big>(</big><em>t1</em>, <em>t2</em><big>)</big><a class="headerlink" href="#petl.diffheaders" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the difference between the headers of the two tables as a pair of
sets. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">diffheaders</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;quux&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add</span><span class="p">,</span> <span class="n">sub</span> <span class="o">=</span> <span class="n">diffheaders</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add</span>
<span class="go">set([&#39;quux&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sub</span>
<span class="go">set([&#39;foo&#39;])</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 0.6.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.diffvalues">
<tt class="descclassname">petl.</tt><tt class="descname">diffvalues</tt><big>(</big><em>t1</em>, <em>t2</em>, <em>f</em><big>)</big><a class="headerlink" href="#petl.diffvalues" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the difference between the values under the given field in the two
tables, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">diffvalues</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add</span><span class="p">,</span> <span class="n">sub</span> <span class="o">=</span> <span class="n">diffvalues</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add</span>
<span class="go">set([&#39;c&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sub</span>
<span class="go">set([&#39;b&#39;])</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 0.6.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.heapqmergesorted">
<tt class="descclassname">petl.</tt><tt class="descname">heapqmergesorted</tt><big>(</big><em>key=None</em>, <em>*iterables</em><big>)</big><a class="headerlink" href="#petl.heapqmergesorted" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a single iterator over the given iterables, sorted by the given <cite>key</cite>
function, assuming the input iterables are already sorted by the same function. 
(I.e., the merge part of a general merge sort.) Uses <a class="reference external" href="http://docs.python.org/library/heapq.html#heapq.merge" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">heapq.merge()</span></tt></a> for
the underlying implementation. See also <a class="reference internal" href="#petl.shortlistmergesorted" title="petl.shortlistmergesorted"><tt class="xref py py-func docutils literal"><span class="pre">shortlistmergesorted()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.9.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.shortlistmergesorted">
<tt class="descclassname">petl.</tt><tt class="descname">shortlistmergesorted</tt><big>(</big><em>key=None</em>, <em>reverse=False</em>, <em>*iterables</em><big>)</big><a class="headerlink" href="#petl.shortlistmergesorted" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a single iterator over the given iterables, sorted by the given <cite>key</cite>
function, assuming the input iterables are already sorted by the same function. 
(I.e., the merge part of a general merge sort.) Uses <a class="reference external" href="http://docs.python.org/library/functions.html#min" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">min()</span></tt></a> (or <a class="reference external" href="http://docs.python.org/library/functions.html#max" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">max()</span></tt></a> 
if <tt class="docutils literal"><span class="pre">reverse=True</span></tt>) for the underlying implementation. See also 
<a class="reference internal" href="#petl.heapqmergesorted" title="petl.heapqmergesorted"><tt class="xref py py-func docutils literal"><span class="pre">heapqmergesorted()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.9.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.progress">
<tt class="descclassname">petl.</tt><tt class="descname">progress</tt><big>(</big><em>table</em>, <em>batchsize=1000</em>, <em>prefix=''</em>, <em>out=&lt;open file '&lt;stderr&gt;'</em>, <em>mode 'w' at 0x4042c0d0&gt;</em><big>)</big><a class="headerlink" href="#petl.progress" title="Permalink to this definition">¶</a></dt>
<dd><p>Report progress on rows passing through. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">dummytable</span><span class="p">,</span> <span class="n">progress</span><span class="p">,</span> <span class="n">tocsv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dummytable</span><span class="p">(</span><span class="mi">100500</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">progress</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tocsv</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="s">&#39;output.csv&#39;</span><span class="p">)</span>
<span class="go">10000 rows in 0.57s (17574 rows/second); batch in 0.57s (17574 rows/second)</span>
<span class="go">20000 rows in 1.13s (17723 rows/second); batch in 0.56s (17876 rows/second)</span>
<span class="go">30000 rows in 1.69s (17732 rows/second); batch in 0.56s (17749 rows/second)</span>
<span class="go">40000 rows in 2.27s (17652 rows/second); batch in 0.57s (17418 rows/second)</span>
<span class="go">50000 rows in 2.83s (17679 rows/second); batch in 0.56s (17784 rows/second)</span>
<span class="go">60000 rows in 3.39s (17694 rows/second); batch in 0.56s (17769 rows/second)</span>
<span class="go">70000 rows in 3.96s (17671 rows/second); batch in 0.57s (17534 rows/second)</span>
<span class="go">80000 rows in 4.53s (17677 rows/second); batch in 0.56s (17720 rows/second)</span>
<span class="go">90000 rows in 5.09s (17681 rows/second); batch in 0.56s (17715 rows/second)</span>
<span class="go">100000 rows in 5.66s (17675 rows/second); batch in 0.57s (17625 rows/second)</span>
<span class="go">100500 rows in 5.69s (17674 rows/second)</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#petl.clock" title="petl.clock"><tt class="xref py py-func docutils literal"><span class="pre">clock()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.10.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.clock">
<tt class="descclassname">petl.</tt><tt class="descname">clock</tt><big>(</big><em>table</em><big>)</big><a class="headerlink" href="#petl.clock" title="Permalink to this definition">¶</a></dt>
<dd><p>Time how long is spent retrieving rows from the wrapped container. Enables
diagnosis of which steps in a pipeline are taking the most time. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">dummytable</span><span class="p">,</span> <span class="n">clock</span><span class="p">,</span> <span class="n">convert</span><span class="p">,</span> <span class="n">progress</span><span class="p">,</span> <span class="n">tocsv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t1</span> <span class="o">=</span> <span class="n">dummytable</span><span class="p">(</span><span class="mi">100000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c1</span> <span class="o">=</span> <span class="n">clock</span><span class="p">(</span><span class="n">t1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t2</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c2</span> <span class="o">=</span> <span class="n">clock</span><span class="p">(</span><span class="n">t2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">progress</span><span class="p">(</span><span class="n">c2</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tocsv</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="s">&#39;dummy.csv&#39;</span><span class="p">)</span>
<span class="go">10000 rows in 1.17s (8559 rows/second); batch in 1.17s (8559 rows/second)</span>
<span class="go">20000 rows in 2.34s (8548 rows/second); batch in 1.17s (8537 rows/second)</span>
<span class="go">30000 rows in 3.51s (8547 rows/second); batch in 1.17s (8546 rows/second)</span>
<span class="go">40000 rows in 4.68s (8541 rows/second); batch in 1.17s (8522 rows/second)</span>
<span class="go">50000 rows in 5.89s (8483 rows/second); batch in 1.21s (8261 rows/second)</span>
<span class="go">60000 rows in 7.30s (8221 rows/second); batch in 1.40s (7121 rows/second)</span>
<span class="go">70000 rows in 8.59s (8144 rows/second); batch in 1.30s (7711 rows/second)</span>
<span class="go">80000 rows in 9.78s (8182 rows/second); batch in 1.18s (8459 rows/second)</span>
<span class="go">90000 rows in 10.98s (8193 rows/second); batch in 1.21s (8279 rows/second)</span>
<span class="go">100000 rows in 12.30s (8132 rows/second); batch in 1.31s (7619 rows/second)</span>
<span class="go">100000 rows in 12.30s (8132 rows/second)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># time consumed retrieving rows from t1</span>
<span class="gp">... </span><span class="n">c1</span><span class="o">.</span><span class="n">time</span>
<span class="go">5.4099999999999895</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># time consumed retrieving rows from t2</span>
<span class="gp">... </span><span class="n">c2</span><span class="o">.</span><span class="n">time</span>
<span class="go">8.740000000000006</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># actual time consumed by the convert step</span>
<span class="gp">... </span><span class="n">c2</span><span class="o">.</span><span class="n">time</span> <span class="o">-</span> <span class="n">c1</span><span class="o">.</span><span class="n">time</span> 
<span class="go">3.330000000000016</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#petl.progress" title="petl.progress"><tt class="xref py py-func docutils literal"><span class="pre">progress()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.10.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.rowgroupby">
<tt class="descclassname">petl.</tt><tt class="descname">rowgroupby</tt><big>(</big><em>table</em>, <em>key</em>, <em>value=None</em><big>)</big><a class="headerlink" href="#petl.rowgroupby" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenient adapter for <a class="reference external" href="http://docs.python.org/library/itertools.html#itertools.groupby" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">itertools.groupby()</span></tt></a>. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rowgroupby</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 3     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |       |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># group entire rows</span>
<span class="gp">... </span><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">rowgroupby</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">key</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
<span class="gp">... </span>
<span class="go">a [(&#39;a&#39;, 1, True)]</span>
<span class="go">b [(&#39;b&#39;, 3, True), (&#39;b&#39;, 2)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># group specific values</span>
<span class="gp">... </span><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">rowgroupby</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">key</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
<span class="gp">... </span>
<span class="go">a [1]</span>
<span class="go">b [3, 2]</span>
</pre></div>
</div>
<p>N.B., assumes the input table is already sorted by the given key.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.10.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.nthword">
<tt class="descclassname">petl.</tt><tt class="descname">nthword</tt><big>(</big><em>n</em>, <em>sep=None</em><big>)</big><a class="headerlink" href="#petl.nthword" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a function to return the nth word in a string. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">nthword</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="s">&#39;foo bar&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">nthword</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">&#39;foo&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">nthword</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">&#39;bar&#39;</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 0.10.</span></p>
</dd></dl>

</div>
<div class="section" id="further-reading">
<h2>Further Reading<a class="headerlink" href="#further-reading" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="fluent.html">petl.fluent - Alternative notation for combining transformations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fluent.html#petl-executable"><tt class="docutils literal"><span class="pre">petl</span></tt> executable</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="interactive.html">petl.interactive - Optimisations for Use in Interactive Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="push.html">petl.push - Branching Pipelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="push.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="push.html#push-functions">Push Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="case_study_1.html">Case Study 1 - Comparing Tables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="case_study_1.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="case_study_1.html#preparing-the-data">Preparing the data</a></li>
<li class="toctree-l2"><a class="reference internal" href="case_study_1.html#looking-for-missing-or-unexpected-rows">Looking for missing or unexpected rows</a></li>
<li class="toctree-l2"><a class="reference internal" href="case_study_1.html#finding-conflicts">Finding conflicts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="related_work.html">Related Work</a><ul>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#continuum-io">continuum.io</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#pandas-python-package">pandas (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#tabular-python-package">tabular (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#datarray-python-package">datarray (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#pydataframe-python-package">pydataframe (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#larry-python-package">larry (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#picalo-python-package">picalo (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#csvkit-python-package">csvkit (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#csvutils-python-package">csvutils (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#python-pipeline-python-package">python-pipeline (Python package</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#google-refine">Google Refine</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#data-wrangler">Data Wrangler</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#pentaho-data-integration-a-k-a-kettle">Pentaho Data Integration (a.k.a. Kettle)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#snaplogic">SnapLogic</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#talend">Talend</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#jaspersoft-etl">Jaspersoft ETL</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#cloveretl">CloverETL</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#apatar">Apatar</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#jitterbit">Jitterbit</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#scriptella">Scriptella</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#kapow-katalyst">Kapow Katalyst</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#flat-file-checker-flafi">Flat File Checker (FlaFi)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#orange">Orange</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#north-concepts-data-pipeline">North Concepts Data Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#sas-clinical-data-integration">SAS Clinical Data Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#r-reshape-package">R Reshape Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#tablefu">TableFu</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#python-tablefu">python-tablefu</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#pygrametl-python-package">pygrametl (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#etlpy-python-package">etlpy (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#openetl">OpenETL</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#data-river">Data River</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#ruffus">Ruffus</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#pyf">PyF</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#pydta">PyDTA</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#google-fusion-tables">Google Fusion Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#pivottable-python-package">pivottable (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#prettytable-python-package">PrettyTable (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#pytables-python-package">PyTables (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#plyr">plyr</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#powershell">PowerShell</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#swiftriver">SwiftRiver</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#data-science-toolkit">Data Science Toolkit</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#incpy">IncPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#articles-blogs-other">Articles, Blogs, Other ...</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="indices-and-tables">
<h2>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">petl - Extract, Transform and Load (Tables of Data)</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#dependencies-and-extensions">Dependencies and extensions</a></li>
<li><a class="reference internal" href="#conventions-row-containers-and-row-iterators">Conventions - row containers and row iterators</a></li>
<li><a class="reference internal" href="#transformation-pipelines">Transformation pipelines</a></li>
<li><a class="reference internal" href="#caching-memoization">Caching / memoization</a></li>
</ul>
</li>
<li><a class="reference internal" href="#extract-reading-tables-from-files-databases-and-other-sources">Extract - reading tables from files, databases and other sources</a></li>
<li><a class="reference internal" href="#transform-transforming-tables">Transform - transforming tables</a></li>
<li><a class="reference internal" href="#load-writing-tables-to-files-and-databases">Load - writing tables to files and databases</a></li>
<li><a class="reference internal" href="#utility-functions">Utility functions</a></li>
<li><a class="reference internal" href="#further-reading">Further Reading</a><ul>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
</ul>

  <h4>Next topic</h4>
  <p class="topless"><a href="fluent.html"
                        title="next chapter">petl.fluent - Alternative notation for combining transformations</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="fluent.html" title="petl.fluent - Alternative notation for combining transformations"
             >next</a> |</li>
        <li><a href="#">petl v0.10 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Alistair Miles.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>