

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>petl - Extract, Transform and Load (Tables of Data) &mdash; petl v0.5 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="petl v0.5 documentation" href="#" />
    <link rel="next" title="Related Work" href="related_work.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="related_work.html" title="Related Work"
             accesskey="N">next</a> |</li>
        <li><a href="#">petl v0.5 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <span class="target" id="module-petl"></span><div class="section" id="petl-extract-transform-and-load-tables-of-data">
<h1>petl - Extract, Transform and Load (Tables of Data)<a class="headerlink" href="#petl-extract-transform-and-load-tables-of-data" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="#module-petl" title="petl"><tt class="xref py py-mod docutils literal"><span class="pre">petl</span></tt></a> is a tentative Python package for extracting, transforming
and loading tables of data. For an overview of all functions in the
package, see the <a class="reference internal" href="genindex.html"><em>Index</em></a>.</p>
<ul class="simple">
<li>Documentation: <a class="reference external" href="http://packages.python.org/petl">http://packages.python.org/petl</a></li>
<li>Source Code: <a class="reference external" href="https://github.com/alimanfoo/petl">https://github.com/alimanfoo/petl</a></li>
<li>Download: <a class="reference external" href="http://pypi.python.org/pypi/petl">http://pypi.python.org/pypi/petl</a></li>
<li>Mailing List: <a class="reference external" href="http://groups.google.com/group/python-etl">http://groups.google.com/group/python-etl</a></li>
</ul>
<p>E.g., given the following data in a file at &#8216;example.csv&#8217; in the current working directory:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">foo</span><span class="p">,</span><span class="n">bar</span><span class="p">,</span><span class="n">baz</span>
<span class="n">a</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">3.4</span>
<span class="n">b</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">7.4</span>
<span class="n">c</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mf">2.2</span>
<span class="n">d</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mf">8.1</span>
</pre></div>
</div>
<p>...the interactive session below illustrates some simple uses of this module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="n">fromcsv</span><span class="p">(</span><span class="s">&#39;example.csv&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;a&#39;   | &#39;1&#39;   | &#39;3.4&#39; |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;2&#39;   | &#39;7.4&#39; |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;6&#39;   | &#39;2.2&#39; |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;d&#39;   | &#39;9&#39;   | &#39;8.1&#39; |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;upper&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">table2</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">table3</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table5</span> <span class="o">=</span> <span class="n">extend</span><span class="p">(</span><span class="n">table4</span><span class="p">,</span> <span class="s">&#39;quux&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="p">(</span><span class="s">&#39;{bar} * {baz}&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table6</span> <span class="o">=</span> <span class="n">cut</span><span class="p">(</span><span class="n">table5</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;quux&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table7</span> <span class="o">=</span> <span class="n">selectgt</span><span class="p">(</span><span class="n">table6</span><span class="p">,</span> <span class="s">&#39;quux&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table8</span> <span class="o">=</span> <span class="n">sort</span><span class="p">(</span><span class="n">table7</span><span class="p">,</span> <span class="s">&#39;quux&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table8</span><span class="p">)</span>
<span class="go">+-------+--------------------+</span>
<span class="go">| &#39;foo&#39; | &#39;quux&#39;             |</span>
<span class="go">+=======+====================+</span>
<span class="go">| &#39;C&#39;   | 13.200000000000001 |</span>
<span class="go">+-------+--------------------+</span>
<span class="go">| &#39;B&#39;   | 14.8               |</span>
<span class="go">+-------+--------------------+</span>
<span class="go">| &#39;D&#39;   | 72.89999999999999  |</span>
<span class="go">+-------+--------------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">tocsv</span><span class="p">(</span><span class="n">table8</span><span class="p">,</span> <span class="s">&#39;output.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>This module is available from the <a class="reference external" href="http://pypi.python.org/pypi/petl">Python Package Index</a>. On Linux distributions you
should be able to do <tt class="docutils literal"><span class="pre">easy_install</span> <span class="pre">petl</span></tt> or <tt class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">petl</span></tt>. On
Windows or Mac you can download manually, extract and run <tt class="docutils literal"><span class="pre">python</span>
<span class="pre">setup.py</span> <span class="pre">install</span></tt>.</p>
</div>
<div class="section" id="dependencies-and-extensions">
<h2>Dependencies and extensions<a class="headerlink" href="#dependencies-and-extensions" title="Permalink to this headline">¶</a></h2>
<p>This package has been written with no dependencies other than the
Python core modules, for ease of installation and
maintenance. However, there are many third party packages which could
usefuly be used with <a class="reference internal" href="#module-petl" title="petl"><tt class="xref py py-mod docutils literal"><span class="pre">petl</span></tt></a>, e.g., providing access to data from
other file types. Some extensions with these additional dependencies
are provided by the <a class="reference external" href="http://pypi.python.org/pypi/petlx">petlx</a> package, a
companion package to <a class="reference internal" href="#module-petl" title="petl"><tt class="xref py py-mod docutils literal"><span class="pre">petl</span></tt></a>.</p>
</div>
<div class="section" id="conventions-row-containers-and-row-iterators">
<h2>Conventions - row containers and row iterators<a class="headerlink" href="#conventions-row-containers-and-row-iterators" title="Permalink to this headline">¶</a></h2>
<p>This package defines the following convention for objects acting as
containers of tabular data and supporting row-oriented iteration over
the data.</p>
<p>A <em>row container</em> (also referred to here informally as a <em>table</em>) is
any object which satisfies the following:</p>
<ol class="arabic simple">
<li>implements the <cite>__iter__</cite> method</li>
<li><cite>__iter__</cite> returns a <em>row iterator</em> (see below)</li>
<li>all row iterators returned by <cite>__iter__</cite> are independent, i.e., consuming items from one iterator will not affect any other iterators</li>
</ol>
<p>A <em>row iterator</em> is an iterator which satisfies the following:</p>
<ol class="arabic simple" start="4">
<li>each item returned by the iterator is either a list or a tuple</li>
<li>the first item returned by the iterator is a header row comprising a list or tuple of <em>fields</em></li>
<li>each subsequent item returned by the iterator is a <em>data row</em> comprising a list or tuple of <em>data values</em></li>
<li>a <em>field</em> is typically a string (<cite>str</cite> or <cite>unicode</cite>) but may be an object of any type as long as it implements <cite>__str__</cite>, is immutable (can be used as a dictionary key) and is pickleable</li>
<li>a <em>data value</em> is any pickleable object</li>
</ol>
<p>So, for example, the list of lists shown below is a table:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
</pre></div>
</div>
<p>Note that, under this convention, an object returned by the
<a class="reference external" href="http://docs.python.org/library/csv.html#csv.reader" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">csv.reader()</span></tt></a> function from the standard Python <a class="reference external" href="http://docs.python.org/library/csv.html#csv" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">csv</span></tt></a> module
is a row iterator and <em>not</em> a row container, because it can only be
iterated over once, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">StringIO</span> <span class="kn">import</span> <span class="n">StringIO</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">csv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">csvdata</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;foo,bar</span>
<span class="gp">... </span><span class="s">a,1</span>
<span class="gp">... </span><span class="s">b,2</span>
<span class="gp">... </span><span class="s">&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rowiterator</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">csvdata</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rowiterator</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">row</span>
<span class="gp">...</span>
<span class="go">[&#39;foo&#39;, &#39;bar&#39;]</span>
<span class="go">[&#39;a&#39;, &#39;1&#39;]</span>
<span class="go">[&#39;b&#39;, &#39;2&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rowiterator</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">row</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># can only iterate once</span>
</pre></div>
</div>
<p>However, it is straightforward to define functions that support the
above convention for row containers and provide access to data from
CSV or other types of file or data source, see e.g. the
<a class="reference internal" href="#petl.fromcsv" title="petl.fromcsv"><tt class="xref py py-func docutils literal"><span class="pre">fromcsv()</span></tt></a> function in this package.</p>
<p>The main reason for requiring that row containers support independent
row iterators (point 3) is that data from a table may need to be
iterated over several times. E.g., when using <cite>petl</cite> in interactive
mode to build up a sequence of data transformation steps, the user
might want to examine outputs from several intermediate steps, before
the transformation is complete.</p>
<p>Note that this convention does not place any restrictions on the
lengths of header and data rows. A table may return a header row
and/or data rows of varying lengths.</p>
</div>
<div class="section" id="transformation-pipelines">
<h2>Transformation pipelines<a class="headerlink" href="#transformation-pipelines" title="Permalink to this headline">¶</a></h2>
<p>Note that this package makes extensive use of lazy evaluation and
iterators. This means, generally, that a transformation will not
actually be executed until data is requested.</p>
<p>E.g., given the following data in a file at &#8216;example1.csv&#8217; in the
current working directory:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">foo</span><span class="p">,</span><span class="n">bar</span><span class="p">,</span><span class="n">baz</span>
<span class="n">a</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">3.4</span>
<span class="n">b</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">7.4</span>
<span class="n">c</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mf">2.2</span>
<span class="n">d</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mf">8.1</span>
</pre></div>
</div>
<p>...the following code does not actually read the file, nor does it
load any of its contents into memory:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="n">fromcsv</span><span class="p">(</span><span class="s">&#39;example1.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Rather, <cite>table1</cite> is a row container object, which can be iterated over.</p>
<p>Similarly, if one or more transformation functions are applied, e.g.::</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;upper&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">table2</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">table3</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table5</span> <span class="o">=</span> <span class="n">extend</span><span class="p">(</span><span class="n">table4</span><span class="p">,</span> <span class="s">&#39;quux&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="p">(</span><span class="s">&#39;{bar} * {baz}&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>...no actual transformation work will be done, until data are
requested from <cite>table5</cite> or any of the other row containers returned by
the intermediate steps.</p>
<p>So in effect, a 5 step transformation pipeline has been set up, and
rows will pass through the pipeline on demand, as they are pulled from
the end of the pipeline via iteration.</p>
<p>A call to a function like <a class="reference internal" href="#petl.look" title="petl.look"><tt class="xref py py-func docutils literal"><span class="pre">look()</span></tt></a>, or any of the functions which
write data to a file or database (e.g., <a class="reference internal" href="#petl.tocsv" title="petl.tocsv"><tt class="xref py py-func docutils literal"><span class="pre">tocsv()</span></tt></a>, <a class="reference internal" href="#petl.totext" title="petl.totext"><tt class="xref py py-func docutils literal"><span class="pre">totext()</span></tt></a>,
<a class="reference internal" href="#petl.tosqlite3" title="petl.tosqlite3"><tt class="xref py py-func docutils literal"><span class="pre">tosqlite3()</span></tt></a>, <a class="reference internal" href="#petl.todb" title="petl.todb"><tt class="xref py py-func docutils literal"><span class="pre">todb()</span></tt></a>), will pull data through the pipeline
and cause all of the transformation steps to be executed on the
requested rows, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table5</span><span class="p">)</span>
<span class="go">+-------+-------+-------+--------------------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; | &#39;quux&#39;             |</span>
<span class="go">+=======+=======+=======+====================+</span>
<span class="go">| &#39;A&#39;   | 1     | 3.4   | 3.4                |</span>
<span class="go">+-------+-------+-------+--------------------+</span>
<span class="go">| &#39;B&#39;   | 2     | 7.4   | 14.8               |</span>
<span class="go">+-------+-------+-------+--------------------+</span>
<span class="go">| &#39;C&#39;   | 6     | 2.2   | 13.200000000000001 |</span>
<span class="go">+-------+-------+-------+--------------------+</span>
<span class="go">| &#39;D&#39;   | 9     | 8.1   | 72.89999999999999  |</span>
<span class="go">+-------+-------+-------+--------------------+</span>
</pre></div>
</div>
<p>...although note that <a class="reference internal" href="#petl.look" title="petl.look"><tt class="xref py py-func docutils literal"><span class="pre">look()</span></tt></a> will by default only request the
first 10 rows, and so at most only 10 rows will be processed. Calling
<a class="reference internal" href="#petl.look" title="petl.look"><tt class="xref py py-func docutils literal"><span class="pre">look()</span></tt></a> to inspect the first few rows of a table is often an
efficient way to examine the output of a transformation pipeline,
without having to execute the transformation over all of the input
data.</p>
</div>
<div class="section" id="caching-memoization">
<h2>Caching / memoization<a class="headerlink" href="#caching-memoization" title="Permalink to this headline">¶</a></h2>
<p>This package tries to make efficient use of memory by using iterators
and lazy evaluation where possible. However, some transformations
cannot be done without building data structures, either in memory or
on disk.</p>
<p>An example is the <a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function, which will either sort a
table entirely in memory, or will sort the table in memory in chunks,
writing chunks to disk and performing a final merge sort on the
chunks. Which strategy is used will depend on the arguments passed
into the <a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function when it is called.</p>
<p>In either case, the sorting can take some time, and if the sorted data
will be used more than once, it is obviously undesirable to throw away
the sorted data and start again from scratch each time. It is better
to cache (a.k.a., memoize) the sorted data, if possible, so it can be
re-used. However, if a table upstream of the sort is mutable, there
needs to be some way of discovering whether data have been changed
since the last sort was performed, and hence whether the cached data
are still fresh or not.</p>
<p>There are also cases where, even though data are generated in a purely
iterative fashion, some programs may still want to cache some or all
of the data. E.g., where data are calculated dynamically and are
relatively expensive to compute, or require scanning many rows, or
where data are being retrieved via a network and there is
latency. Again, there needs to be some way of finding out whether
cached data are fresh or not.</p>
<p>To support caching, it is recommended (but not required) that table
container objects also implement the <cite>cachetag</cite> method. This method
should return an integer which changes whenever the table&#8217;s fields or
data changes (i.e., a row iterator would yield a different sequence of
items). All <a class="reference internal" href="#module-petl" title="petl"><tt class="xref py py-mod docutils literal"><span class="pre">petl</span></tt></a> table objects implement this method, where
applicable.</p>
<p>Note in particular that the functions <a class="reference internal" href="#petl.fromcsv" title="petl.fromcsv"><tt class="xref py py-func docutils literal"><span class="pre">fromcsv()</span></tt></a>,
<a class="reference internal" href="#petl.frompickle" title="petl.frompickle"><tt class="xref py py-func docutils literal"><span class="pre">frompickle()</span></tt></a> and <a class="reference internal" href="#petl.fromsqlite3" title="petl.fromsqlite3"><tt class="xref py py-func docutils literal"><span class="pre">fromsqlite3()</span></tt></a> return tables that
implement the <cite>cachetag</cite> method, and that the implementation of
<cite>cachetag</cite> in these cases depends on a checksum function operating on
the underlying data file. By default, <a class="reference internal" href="#petl.statsum" title="petl.statsum"><tt class="xref py py-func docutils literal"><span class="pre">statsum()</span></tt></a> is used as the
checksum function, which is cheap to compute but crude because it
relies only on file name, size and time of modification, and on some
systems this will <strong>not</strong> reveal changes within the same second that
preserve file size. If you need a finer level of granularity, use
either <a class="reference internal" href="#petl.adler32sum" title="petl.adler32sum"><tt class="xref py py-func docutils literal"><span class="pre">adler32sum()</span></tt></a> or <a class="reference internal" href="#petl.crc32sum" title="petl.crc32sum"><tt class="xref py py-func docutils literal"><span class="pre">crc32sum()</span></tt></a> instead. These can be
passed in as arguments to <a class="reference internal" href="#petl.fromcsv" title="petl.fromcsv"><tt class="xref py py-func docutils literal"><span class="pre">fromcsv()</span></tt></a>, <a class="reference internal" href="#petl.frompickle" title="petl.frompickle"><tt class="xref py py-func docutils literal"><span class="pre">frompickle()</span></tt></a> and
<a class="reference internal" href="#petl.fromsqlite3" title="petl.fromsqlite3"><tt class="xref py py-func docutils literal"><span class="pre">fromsqlite3()</span></tt></a>, or can be set globally, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">petl.io</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">petl</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">defaultsumfun</span> <span class="o">=</span> <span class="n">petl</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">adler32sum</span>
</pre></div>
</div>
<p>Care must be taken to ensure correct implementation of the <cite>cachetag</cite>
method where a table is generating data dynamically from another table
or tables. In these cases, the state of the upstream tables must be
considered when generating a <cite>cachetag</cite> value. One strategy is to
construct <cite>cachetag</cite> values by hashing the internal configuration
attributes of a table, along with the <cite>cachetag</cite> values from any
tables immediately upstream.</p>
<p>In some cases, it may be difficult to determine whether data have
changed, e.g., where data are being retrieved from a database. In
these cases it is suggested that table objects use a user-configurable
time to live (TTL) to generate <cite>cachetag</cite> values. E.g., where a
database table is updated once a day at most, a TTL of a few hours
would enable data to be cached during an interactive session, which
might improve usability for someone exploring the data or developing a
transformation script.</p>
</div>
<div class="section" id="using-petl-in-interactive-mode-experimental">
<h2>Using petl in interactive mode (experimental)<a class="headerlink" href="#using-petl-in-interactive-mode-experimental" title="Permalink to this headline">¶</a></h2>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
<p>The module <tt class="xref py py-mod docutils literal"><span class="pre">petl.interactive</span></tt> provides all of the functions
present in the root <a class="reference internal" href="#module-petl" title="petl"><tt class="xref py py-mod docutils literal"><span class="pre">petl</span></tt></a> module, but with a couple of
optimisations for use within an interactive session.</p>
<p>The main optimisation is that some caching is done behind the scenes,
so that by default the first 100 rows of any table are cached in
memory the first time they are requested. This usually provides a
better experience when building up a transformation pipeline one step
at a time, where you are examining the outputs of each intermediate
step as its written via <a class="reference internal" href="#petl.look" title="petl.look"><tt class="xref py py-func docutils literal"><span class="pre">look()</span></tt></a> or <a class="reference internal" href="#petl.see" title="petl.see"><tt class="xref py py-func docutils literal"><span class="pre">see()</span></tt></a>. I.e., as each new
step is added and the output examined, as long as less than 100 rows
are requested, only that new step will actually be executed, and none
of the upstream transformations will be repeated, because the outputs
from previous steps will have been cached.</p>
<p>The effect can be observed in the following interactive session, using
the <a class="reference internal" href="#petl.dummytable" title="petl.dummytable"><tt class="xref py py-func docutils literal"><span class="pre">dummytable()</span></tt></a> function to simulate a table which is slow to
return rows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl.interactive</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">petl</span><span class="o">.</span><span class="n">interactive</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="bp">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t0</span> <span class="o">=</span> <span class="n">dummytable</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t0</span>
<span class="go">&lt;petl.testfun.dummytable object at 0x7f01d28a6cd0&gt; :: stale, updating cache</span>
<span class="go">+---------------------+---------------------+---------------------+</span>
<span class="go">| &#39;f0&#39;                | &#39;f1&#39;                | &#39;f2&#39;                |</span>
<span class="go">+=====================+=====================+=====================+</span>
<span class="go">| 5468759657750974143 | 5468759657752139192 | 5468759657753304241 |</span>
<span class="go">+---------------------+---------------------+---------------------+</span>
<span class="go">| 5468760918947972966 | 5468760918946807917 | 5468760918945642868 |</span>
<span class="go">+---------------------+---------------------+---------------------+</span>
<span class="gp">...</span>
<span class="go">+---------------------+---------------------+---------------------+</span>
<span class="go">| 5468750829371982382 | 5468750829370817333 | 5468750829369652284 |</span>
<span class="go">+---------------------+---------------------+---------------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">t0</span>
<span class="go">&lt;petl.testfun.dummytable object at 0x7f01d28a6cd0&gt; :: fresh, serving from cache, cache size 100</span>
<span class="go">+---------------------+---------------------+---------------------+</span>
<span class="go">| &#39;f0&#39;                | &#39;f1&#39;                | &#39;f2&#39;                |</span>
<span class="go">+=====================+=====================+=====================+</span>
<span class="go">| 5468759657750974143 | 5468759657752139192 | 5468759657753304241 |</span>
<span class="go">+---------------------+---------------------+---------------------+</span>
<span class="go">| 5468760918947972966 | 5468760918946807917 | 5468760918945642868 |</span>
<span class="go">+---------------------+---------------------+---------------------+</span>
<span class="gp">...</span>
<span class="go">+---------------------+---------------------+---------------------+</span>
<span class="go">| 5468750829371982382 | 5468750829370817333 | 5468750829369652284 |</span>
<span class="go">+---------------------+---------------------+---------------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">t1</span> <span class="o">=</span> <span class="n">convertall</span><span class="p">(</span><span class="n">t0</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t1</span>
<span class="go">&lt;petl.transform.FieldConvertView object at 0x7f01d28bc1d0&gt; :: stale, updating cache</span>
<span class="go">&lt;petl.testfun.dummytable object at 0x7f01d28a6cd0&gt; :: fresh, serving from cache, cache size 100</span>
<span class="go">+-----------------------------------------+-----------------------------------------+-----------------------------------------+</span>
<span class="go">| &#39;f0&#39;                                    | &#39;f1&#39;                                    | &#39;f2&#39;                                    |</span>
<span class="go">+=========================================+=========================================+=========================================+</span>
<span class="go">| 29907332194244551842941060065454584449L | 29907332194257294588882067652142412864L | 29907332194270037334823077953508586081L |</span>
<span class="go">+-----------------------------------------+-----------------------------------------+-----------------------------------------+</span>
<span class="go">| 29907345988612677740461338320266837156L | 29907345988599934991581620843693878889L | 29907345988587192242701906081799265424L |</span>
<span class="go">+-----------------------------------------+-----------------------------------------+-----------------------------------------+</span>
<span class="gp">...</span>
<span class="go">+-----------------------------------------+-----------------------------------------+-----------------------------------------+</span>
<span class="go">| 29907235633756745161010160248518393924L | 29907235633744002435640143608453232889L | 29907235633731259710270129683066416656L |</span>
<span class="go">+-----------------------------------------+-----------------------------------------+-----------------------------------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">t2</span> <span class="o">=</span> <span class="n">extend</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="p">(</span><span class="s">&#39;{f0} - {f1}&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t2</span>
<span class="go">&lt;petl.transform.ExtendView object at 0x7f01d28bc190&gt; :: stale, updating cache</span>
<span class="go">&lt;petl.transform.FieldConvertView object at 0x7f01d28bc1d0&gt; :: fresh, serving from cache, cache size 100</span>
<span class="go">+-----------------------------------------+-----------------------------------------+-----------------------------------------+------------------------------+</span>
<span class="go">| &#39;f0&#39;                                    | &#39;f1&#39;                                    | &#39;f2&#39;                                    | &#39;foo&#39;                        |</span>
<span class="go">+=========================================+=========================================+=========================================+==============================+</span>
<span class="go">| 29907332194244551842941060065454584449L | 29907332194257294588882067652142412864L | 29907332194270037334823077953508586081L | -12742745941007586687828415L |</span>
<span class="go">+-----------------------------------------+-----------------------------------------+-----------------------------------------+------------------------------+</span>
<span class="go">| 29907345988612677740461338320266837156L | 29907345988599934991581620843693878889L | 29907345988587192242701906081799265424L | 12742748879717476572958267L  |</span>
<span class="go">+-----------------------------------------+-----------------------------------------+-----------------------------------------+------------------------------+</span>
<span class="gp">...</span>
<span class="go">+-----------------------------------------+-----------------------------------------+-----------------------------------------+------------------------------+</span>
<span class="go">| 29907235633756745161010160248518393924L | 29907235633744002435640143608453232889L | 29907235633731259710270129683066416656L | 12742725370016640065161035L  |</span>
<span class="go">+-----------------------------------------+-----------------------------------------+-----------------------------------------+------------------------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">t3</span> <span class="o">=</span> <span class="n">cut</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="s">&#39;f0&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t3</span>
<span class="go">&lt;petl.transform.CutView object at 0x7f01d28bc290&gt; :: stale, updating cache</span>
<span class="go">&lt;petl.transform.ExtendView object at 0x7f01d28bc190&gt; :: fresh, serving from cache, cache size 100</span>
<span class="go">+-----------------------------------------+------------------------------+</span>
<span class="go">| &#39;f0&#39;                                    | &#39;foo&#39;                        |</span>
<span class="go">+=========================================+==============================+</span>
<span class="go">| 29907332194244551842941060065454584449L | -12742745941007586687828415L |</span>
<span class="go">+-----------------------------------------+------------------------------+</span>
<span class="go">| 29907345988612677740461338320266837156L | 12742748879717476572958267L  |</span>
<span class="go">+-----------------------------------------+------------------------------+</span>
<span class="gp">...</span>
<span class="go">+-----------------------------------------+------------------------------+</span>
<span class="go">| 29907235633756745161010160248518393924L | 12742725370016640065161035L  |</span>
<span class="go">+-----------------------------------------+------------------------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">t3</span>
<span class="go">&lt;petl.transform.CutView object at 0x7f01d28bc290&gt; :: fresh, serving from cache, cache size 100</span>
<span class="go">+-----------------------------------------+------------------------------+</span>
<span class="go">| &#39;f0&#39;                                    | &#39;foo&#39;                        |</span>
<span class="go">+=========================================+==============================+</span>
<span class="go">| 29907332194244551842941060065454584449L | -12742745941007586687828415L |</span>
<span class="go">+-----------------------------------------+------------------------------+</span>
<span class="go">| 29907345988612677740461338320266837156L | 12742748879717476572958267L  |</span>
<span class="go">+-----------------------------------------+------------------------------+</span>
<span class="gp">...</span>
<span class="go">+-----------------------------------------+------------------------------+</span>
<span class="go">| 29907235633756745161010160248518393924L | 12742725370016640065161035L  |</span>
<span class="go">+-----------------------------------------+------------------------------+</span>
</pre></div>
</div>
<p>Note also that, by default, the <a class="reference internal" href="#petl.look" title="petl.look"><tt class="xref py py-func docutils literal"><span class="pre">look()</span></tt></a> function is used to generate a
representation of tables. So you don&#8217;t need to type, e.g., <tt class="docutils literal"><span class="pre">&gt;&gt;&gt;</span>
<span class="pre">look(mytable)</span></tt>, you can just type <tt class="docutils literal"><span class="pre">&gt;&gt;&gt;</span> <span class="pre">mytable</span></tt>. The default
representation function can be changed by setting
<tt class="docutils literal"><span class="pre">petl.interactive.representation</span></tt>, e.g.,
<tt class="docutils literal"><span class="pre">petl.interactive.representation</span> <span class="pre">=</span> <span class="pre">petl.see</span></tt>, or
<tt class="docutils literal"><span class="pre">petl.interactive.representation</span> <span class="pre">=</span> <span class="pre">None</span></tt> to disable this behaviour.</p>
</div>
<div class="section" id="utility-functions">
<h2>Utility functions<a class="headerlink" href="#utility-functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="petl.header">
<tt class="descclassname">petl.</tt><tt class="descname">header</tt><big>(</big><em>table</em><big>)</big><a class="headerlink" href="#petl.header" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the header row for the given table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">header</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">[&#39;foo&#39;, &#39;bar&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.data">
<tt class="descclassname">petl.</tt><tt class="descname">data</tt><big>(</big><em>table</em>, <em>*sliceargs</em><big>)</big><a class="headerlink" href="#petl.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterator over the data rows for the given table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span> <span class="o">=</span> <span class="n">data</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">[&#39;a&#39;, 1]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">[&#39;b&#39;, 2]</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.3.</span></p>
<p>Positional arguments can be used to slice the data rows. The <cite>sliceargs</cite> are 
passed to <a class="reference external" href="http://docs.python.org/library/itertools.html#itertools.islice" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">itertools.islice()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.dataslice">
<tt class="descclassname">petl.</tt><tt class="descname">dataslice</tt><big>(</big><em>table</em>, <em>*args</em><big>)</big><a class="headerlink" href="#petl.dataslice" title="Permalink to this definition">¶</a></dt>
<dd><p class="deprecated">
<span class="versionmodified">Deprecated since version 0.3.</span></p>
<p>Use <a class="reference internal" href="#petl.data" title="petl.data"><tt class="xref py py-func docutils literal"><span class="pre">data()</span></tt></a> instead, it supports slice arguments.</p>
</dd></dl>

<dl class="function">
<dt id="petl.records">
<tt class="descclassname">petl.</tt><tt class="descname">records</tt><big>(</big><em>table</em>, <em>missing=None</em><big>)</big><a class="headerlink" href="#petl.records" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterator over the data in the table, yielding each row as a 
dictionary of values indexed by field name. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">records</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span> <span class="o">=</span> <span class="n">records</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">{&#39;foo&#39;: &#39;a&#39;, &#39;bar&#39;: 1}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">{&#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 2}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">StopIteration</span>
</pre></div>
</div>
<p>Short rows are padded, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span> <span class="o">=</span> <span class="n">records</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">{&#39;foo&#39;: &#39;a&#39;, &#39;bar&#39;: 1}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">{&#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: None}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">StopIteration</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.fieldnames">
<tt class="descclassname">petl.</tt><tt class="descname">fieldnames</tt><big>(</big><em>table</em><big>)</big><a class="headerlink" href="#petl.fieldnames" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the string values of all fields for the given table. If the fields
are strings, then this function is equivalent to <a class="reference internal" href="#petl.header" title="petl.header"><tt class="xref py py-func docutils literal"><span class="pre">header()</span></tt></a>, i.e.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">header</span><span class="p">,</span> <span class="n">fieldnames</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">[&#39;foo&#39;, &#39;bar&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fieldnames</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">[&#39;foo&#39;, &#39;bar&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span> <span class="o">==</span> <span class="n">fieldnames</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Allows for custom field objects, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">CustomField</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">description</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">id</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s">&#39;CustomField(</span><span class="si">%r</span><span class="s">, </span><span class="si">%r</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="n">CustomField</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;Get some foo.&#39;</span><span class="p">),</span> <span class="n">CustomField</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;A lot of bar.&#39;</span><span class="p">)],</span> 
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> 
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">[CustomField(&#39;foo&#39;, &#39;Get some foo.&#39;), CustomField(&#39;bar&#39;, &#39;A lot of bar.&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fieldnames</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>    
<span class="go">[&#39;foo&#39;, &#39;bar&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.rowcount">
<tt class="descclassname">petl.</tt><tt class="descname">rowcount</tt><big>(</big><em>table</em><big>)</big><a class="headerlink" href="#petl.rowcount" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of data rows in a table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rowcount</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rowcount</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.look">
<tt class="descclassname">petl.</tt><tt class="descname">look</tt><big>(</big><em>table</em>, <em>*sliceargs</em><big>)</big><a class="headerlink" href="#petl.look" title="Permalink to this definition">¶</a></dt>
<dd><p>Format a portion of the table as text for inspection in an interactive
session. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Any irregularities in the length of header and/or data rows will appear as
blank cells, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">True</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">+-------+-------+------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |      |</span>
<span class="go">+=======+=======+======+</span>
<span class="go">| &#39;a&#39;   |       |      |</span>
<span class="go">+-------+-------+------+</span>
<span class="go">| &#39;b&#39;   | 2     | True |</span>
<span class="go">+-------+-------+------+</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.3.</span></p>
<p>Positional arguments can be used to slice the data rows. The <cite>sliceargs</cite> are 
passed to <a class="reference external" href="http://docs.python.org/library/itertools.html#itertools.islice" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">itertools.islice()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.lookall">
<tt class="descclassname">petl.</tt><tt class="descname">lookall</tt><big>(</big><em>table</em><big>)</big><a class="headerlink" href="#petl.lookall" title="Permalink to this definition">¶</a></dt>
<dd><p>Format the entire table as text for inspection in an interactive session.</p>
<p>N.B., this will load the entire table into memory.</p>
</dd></dl>

<dl class="function">
<dt id="petl.see">
<tt class="descclassname">petl.</tt><tt class="descname">see</tt><big>(</big><em>table</em>, <em>*sliceargs</em><big>)</big><a class="headerlink" href="#petl.see" title="Permalink to this definition">¶</a></dt>
<dd><p>Format a portion of a table as text in a column-oriented layout for 
inspection in an interactive session. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">see</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">see</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">&#39;foo&#39;: &#39;a&#39;, &#39;b&#39;</span>
<span class="go">&#39;bar&#39;: 1, 2</span>
</pre></div>
</div>
<p>Useful for tables with a larger number of fields.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.3.</span></p>
<p>Positional arguments can be used to slice the data rows. The <cite>sliceargs</cite> are 
passed to <a class="reference external" href="http://docs.python.org/library/itertools.html#itertools.islice" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">itertools.islice()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.values">
<tt class="descclassname">petl.</tt><tt class="descname">values</tt><big>(</big><em>table</em>, <em>field</em>, <em>*sliceargs</em><big>)</big><a class="headerlink" href="#petl.values" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterator over values in a given field or fields. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">values</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span> <span class="o">=</span> <span class="n">values</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">&#39;a&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">&#39;b&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">&#39;b&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">&#39;c&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">StopIteration</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a single field name or index (starting from zero)
or a tuple of field names and/or indexes.</p>
<p>If rows are uneven, any missing values are skipped, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bar</span> <span class="o">=</span> <span class="n">values</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bar</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bar</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bar</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bar</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">StopIteration</span>
</pre></div>
</div>
<p>More than one field can be selected, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;bb&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foobaz</span> <span class="o">=</span> <span class="n">values</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foobaz</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">(1, True)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foobaz</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">(2, True)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foobaz</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">(3, False)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foobaz</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">StopIteration</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.3.</span></p>
<p>Positional arguments can be used to slice the data rows. The <cite>sliceargs</cite> are 
passed to <a class="reference external" href="http://docs.python.org/library/itertools.html#itertools.islice" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">itertools.islice()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.valueset">
<tt class="descclassname">petl.</tt><tt class="descname">valueset</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.valueset" title="Permalink to this definition">¶</a></dt>
<dd><p class="deprecated">
<span class="versionmodified">Deprecated since version 0.3.</span></p>
<p>Use <tt class="docutils literal"><span class="pre">set(values(table,</span> <span class="pre">*fields))</span></tt> instead, see also <a class="reference internal" href="#petl.values" title="petl.values"><tt class="xref py py-func docutils literal"><span class="pre">values()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.valuecount">
<tt class="descclassname">petl.</tt><tt class="descname">valuecount</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em><big>)</big><a class="headerlink" href="#petl.valuecount" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of occurrences of <cite>value</cite> under the given field. Returns
the absolute count and relative frequency as a pair. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">valuecount</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">((</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">valuecount</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span>
<span class="go">0.6666666666666666</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a single field name or index (starting from zero)
or a tuple of field names and/or indexes.</p>
</dd></dl>

<dl class="function">
<dt id="petl.valuecounts">
<tt class="descclassname">petl.</tt><tt class="descname">valuecounts</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.valuecounts" title="Permalink to this definition">¶</a></dt>
<dd><p>Find distinct values for the given field and count the number and relative
frequency of occurrences. Returns a table mapping values to counts, with most common 
values first. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">valuecounts</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valuecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="go">[(&#39;value&#39;, &#39;count&#39;, &#39;frequency&#39;), (&#39;b&#39;, 2, 0.5), (&#39;a&#39;, 1, 0.25), (&#39;c&#39;, 1, 0.25)]</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a single field name or index (starting from zero)
or a tuple of field names and/or indexes.</p>
<p>Can be combined with <cite>look</cite>, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">valuecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">))</span>
<span class="go">+---------+---------+-------------+</span>
<span class="go">| &#39;value&#39; | &#39;count&#39; | &#39;frequency&#39; |</span>
<span class="go">+=========+=========+=============+</span>
<span class="go">| &#39;b&#39;     | 2       | 0.5         |</span>
<span class="go">+---------+---------+-------------+</span>
<span class="go">| &#39;a&#39;     | 1       | 0.25        |</span>
<span class="go">+---------+---------+-------------+</span>
<span class="go">| &#39;c&#39;     | 1       | 0.25        |</span>
<span class="go">+---------+---------+-------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">valuecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">))</span>
<span class="go">+---------+---------+--------------------+</span>
<span class="go">| &#39;value&#39; | &#39;count&#39; | &#39;frequency&#39;        |</span>
<span class="go">+=========+=========+====================+</span>
<span class="go">| True    | 2       | 0.6666666666666666 |</span>
<span class="go">+---------+---------+--------------------+</span>
<span class="go">| False   | 1       | 0.3333333333333333 |</span>
<span class="go">+---------+---------+--------------------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.valuecounter">
<tt class="descclassname">petl.</tt><tt class="descname">valuecounter</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.valuecounter" title="Permalink to this definition">¶</a></dt>
<dd><p>Find distinct values for the given field and count the number of 
occurrences. Returns a <a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></a> mapping values to counts. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">valuecounter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">valuecounter</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span>
<span class="go">Counter({&#39;b&#39;: 2, &#39;a&#39;: 1, &#39;c&#39;: 1})</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a single field name or index (starting from zero)
or a tuple of field names and/or indexes.</p>
</dd></dl>

<dl class="function">
<dt id="petl.unique">
<tt class="descclassname">petl.</tt><tt class="descname">unique</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if there are no duplicate values for the given field(s), otherwise
False. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">unique</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">True</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unique</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unique</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a single field name or index (starting from zero)
or a tuple of field names and/or indexes.</p>
</dd></dl>

<dl class="function">
<dt id="petl.limits">
<tt class="descclassname">petl.</tt><tt class="descname">limits</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.limits" title="Permalink to this definition">¶</a></dt>
<dd><p>Find minimum and maximum values under the given field. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">limits</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">minv</span><span class="p">,</span> <span class="n">maxv</span> <span class="o">=</span> <span class="n">limits</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">minv</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maxv</span>
<span class="go">3</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a field name or index (starting from zero).</p>
</dd></dl>

<dl class="function">
<dt id="petl.stats">
<tt class="descclassname">petl.</tt><tt class="descname">stats</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate basic descriptive statistics on a given field. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">stats</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3.4&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">u&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;3&#39;</span><span class="p">,</span> <span class="s">u&#39;7.8&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;xyz&#39;</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>    
<span class="go">{&#39;count&#39;: 3, &#39;errors&#39;: 2, &#39;min&#39;: 1.0, &#39;max&#39;: 3.0, &#39;sum&#39;: 6.0, &#39;mean&#39;: 2.0}</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a field name or index (starting from zero).</p>
</dd></dl>

<dl class="function">
<dt id="petl.lenstats">
<tt class="descclassname">petl.</tt><tt class="descname">lenstats</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="reference internal" href="_modules/petl.html#lenstats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#petl.lenstats" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to report statistics on value lengths under the given
field. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">lenstats</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;aaa&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;aa&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;aaa&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;aaaaaaaaaaa&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lenstats</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="go">{&#39;count&#39;: 5, &#39;errors&#39;: 0, &#39;min&#39;: 1.0, &#39;max&#39;: 11.0, &#39;sum&#39;: 20.0, &#39;mean&#39;: 4.0}</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.stringpatterns">
<tt class="descclassname">petl.</tt><tt class="descname">stringpatterns</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.stringpatterns" title="Permalink to this definition">¶</a></dt>
<dd><p>Profile string patterns in the given field, returning a table of patterns,
counts and frequencies. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">stringpatterns</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;Mr. Foo&#39;</span><span class="p">,</span> <span class="s">&#39;123-1254&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;Mrs. Bar&#39;</span><span class="p">,</span> <span class="s">&#39;234-1123&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;Mr. Spo&#39;</span><span class="p">,</span> <span class="s">&#39;123-1254&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">u&#39;Mr. Baz&#39;</span><span class="p">,</span> <span class="s">u&#39;321 1434&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">u&#39;Mrs. Baz&#39;</span><span class="p">,</span> <span class="s">u&#39;321 1434&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;Mr. Quux&#39;</span><span class="p">,</span> <span class="s">&#39;123-1254-XX&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foopats</span> <span class="o">=</span> <span class="n">stringpatterns</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">foopats</span><span class="p">)</span>
<span class="go">+------------+---------+---------------------+</span>
<span class="go">| &#39;pattern&#39;  | &#39;count&#39; | &#39;frequency&#39;         |</span>
<span class="go">+============+=========+=====================+</span>
<span class="go">| &#39;Aa. Aaa&#39;  | 3       | 0.5                 |</span>
<span class="go">+------------+---------+---------------------+</span>
<span class="go">| &#39;Aaa. Aaa&#39; | 2       | 0.3333333333333333  |</span>
<span class="go">+------------+---------+---------------------+</span>
<span class="go">| &#39;Aa. Aaaa&#39; | 1       | 0.16666666666666666 |</span>
<span class="go">+------------+---------+---------------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">barpats</span> <span class="o">=</span> <span class="n">stringpatterns</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">barpats</span><span class="p">)</span>
<span class="go">+---------------+---------+---------------------+</span>
<span class="go">| &#39;pattern&#39;     | &#39;count&#39; | &#39;frequency&#39;         |</span>
<span class="go">+===============+=========+=====================+</span>
<span class="go">| &#39;999-9999&#39;    | 3       | 0.5                 |</span>
<span class="go">+---------------+---------+---------------------+</span>
<span class="go">| &#39;999 9999&#39;    | 2       | 0.3333333333333333  |</span>
<span class="go">+---------------+---------+---------------------+</span>
<span class="go">| &#39;999-9999-AA&#39; | 1       | 0.16666666666666666 |</span>
<span class="go">+---------------+---------+---------------------+</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.stringpatterncounter">
<tt class="descclassname">petl.</tt><tt class="descname">stringpatterncounter</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.stringpatterncounter" title="Permalink to this definition">¶</a></dt>
<dd><p>Profile string patterns in the given field, returning a <a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></a> 
mapping patterns to counts.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.rowlengths">
<tt class="descclassname">petl.</tt><tt class="descname">rowlengths</tt><big>(</big><em>table</em><big>)</big><a class="headerlink" href="#petl.rowlengths" title="Permalink to this definition">¶</a></dt>
<dd><p>Report on row lengths found in the table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">rowlengths</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3.4&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">u&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;3&#39;</span><span class="p">,</span> <span class="s">u&#39;7.8&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;xyz&#39;</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;F&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">rowlengths</span><span class="p">(</span><span class="n">table</span><span class="p">))</span>
<span class="go">+----------+---------+</span>
<span class="go">| &#39;length&#39; | &#39;count&#39; |</span>
<span class="go">+==========+=========+</span>
<span class="go">| 3        | 3       |</span>
<span class="go">+----------+---------+</span>
<span class="go">| 2        | 2       |</span>
<span class="go">+----------+---------+</span>
<span class="go">| 4        | 1       |</span>
<span class="go">+----------+---------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.typecounts">
<tt class="descclassname">petl.</tt><tt class="descname">typecounts</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.typecounts" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of values found for each Python type and return a table
mapping class names to counts. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">typecounts</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3.4&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">u&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;3&#39;</span><span class="p">,</span> <span class="s">u&#39;7.8&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">u&#39;xyz&#39;</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">typecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">))</span>
<span class="go">+-----------+---------+</span>
<span class="go">| &#39;type&#39;    | &#39;count&#39; |</span>
<span class="go">+===========+=========+</span>
<span class="go">| &#39;str&#39;     | 4       |</span>
<span class="go">+-----------+---------+</span>
<span class="go">| &#39;unicode&#39; | 1       |</span>
<span class="go">+-----------+---------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">typecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">))</span>
<span class="go">+-----------+---------+</span>
<span class="go">| &#39;type&#39;    | &#39;count&#39; |</span>
<span class="go">+===========+=========+</span>
<span class="go">| &#39;unicode&#39; | 3       |</span>
<span class="go">+-----------+---------+</span>
<span class="go">| &#39;int&#39;     | 2       |</span>
<span class="go">+-----------+---------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">typecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">))</span>
<span class="go">+-----------+---------+</span>
<span class="go">| &#39;type&#39;    | &#39;count&#39; |</span>
<span class="go">+===========+=========+</span>
<span class="go">| &#39;int&#39;     | 1       |</span>
<span class="go">+-----------+---------+</span>
<span class="go">| &#39;float&#39;   | 1       |</span>
<span class="go">+-----------+---------+</span>
<span class="go">| &#39;unicode&#39; | 1       |</span>
<span class="go">+-----------+---------+</span>
<span class="go">| &#39;str&#39;     | 1       |</span>
<span class="go">+-----------+---------+</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a field name or index (starting from zero).</p>
</dd></dl>

<dl class="function">
<dt id="petl.typecounter">
<tt class="descclassname">petl.</tt><tt class="descname">typecounter</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.typecounter" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of values found for each Python type. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">typecounter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3.4&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">u&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;3&#39;</span><span class="p">,</span> <span class="s">u&#39;7.8&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">u&#39;xyz&#39;</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">typecounter</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="go">Counter({&#39;str&#39;: 4, &#39;unicode&#39;: 1})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">typecounter</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="go">Counter({&#39;unicode&#39;: 3, &#39;int&#39;: 2})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">typecounter</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">)</span>
<span class="go">Counter({&#39;int&#39;: 1, &#39;float&#39;: 1, &#39;unicode&#39;: 1, &#39;str&#39;: 1})</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a field name or index (starting from zero).</p>
</dd></dl>

<dl class="function">
<dt id="petl.typeset">
<tt class="descclassname">petl.</tt><tt class="descname">typeset</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.typeset" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a set containing all Python types found for values in the given field.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">typeset</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3.4&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">u&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;3&#39;</span><span class="p">,</span> <span class="s">&#39;7.8&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">u&#39;xyz&#39;</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">typeset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span> 
<span class="go">set([&lt;type &#39;str&#39;&gt;, &lt;type &#39;unicode&#39;&gt;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">typeset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span> 
<span class="go">set([&lt;type &#39;int&#39;&gt;, &lt;type &#39;unicode&#39;&gt;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">typeset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">)</span> 
<span class="go">set([&lt;type &#39;float&#39;&gt;, &lt;type &#39;str&#39;&gt;])</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a field name or index (starting from zero).</p>
</dd></dl>

<dl class="function">
<dt id="petl.parsecounts">
<tt class="descclassname">petl.</tt><tt class="descname">parsecounts</tt><big>(</big><em>table</em>, <em>field</em>, <em>parsers={'int': &lt;type 'int'&gt;</em>, <em>'float': &lt;type 'float'&gt;}</em><big>)</big><a class="headerlink" href="#petl.parsecounts" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of <cite>str</cite> or <cite>unicode</cite> values that can be parsed as ints, 
floats or via custom parser functions. Return a table mapping parser names
to the number of values successfully parsed and the number of errors. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">parsecounts</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;aaa&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3.4&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">u&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;3&#39;</span><span class="p">,</span> <span class="s">u&#39;7.8&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;3.7&#39;</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">parsecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">))</span>
<span class="go">+---------+---------+----------+</span>
<span class="go">| &#39;type&#39;  | &#39;count&#39; | &#39;errors&#39; |</span>
<span class="go">+=========+=========+==========+</span>
<span class="go">| &#39;float&#39; | 3       | 1        |</span>
<span class="go">+---------+---------+----------+</span>
<span class="go">| &#39;int&#39;   | 2       | 2        |</span>
<span class="go">+---------+---------+----------+</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a field name or index (starting from zero).</p>
</dd></dl>

<dl class="function">
<dt id="petl.parsecounter">
<tt class="descclassname">petl.</tt><tt class="descname">parsecounter</tt><big>(</big><em>table</em>, <em>field</em>, <em>parsers={'int': &lt;type 'int'&gt;</em>, <em>'float': &lt;type 'float'&gt;}</em><big>)</big><a class="headerlink" href="#petl.parsecounter" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of <cite>str</cite> or <cite>unicode</cite> values under the given fields that can 
be parsed as ints, floats or via custom parser functions. Return a pair of 
<cite>Counter</cite> objects, the first mapping parser names to the number of strings 
successfully parsed, the second mapping parser names to the number of errors. 
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">parsecounter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;aaa&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3.4&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">u&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;3&#39;</span><span class="p">,</span> <span class="s">u&#39;7.8&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;3.7&#39;</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span><span class="p">,</span> <span class="n">errors</span> <span class="o">=</span> <span class="n">parsecounter</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span>
<span class="go">Counter({&#39;float&#39;: 3, &#39;int&#39;: 2})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">errors</span>
<span class="go">Counter({&#39;int&#39;: 2, &#39;float&#39;: 1})</span>
</pre></div>
</div>
<p>The <cite>field</cite> argument can be a field name or index (starting from zero).</p>
</dd></dl>

<dl class="function">
<dt id="petl.dateparser">
<tt class="descclassname">petl.</tt><tt class="descname">dateparser</tt><big>(</big><em>format</em><big>)</big><a class="headerlink" href="#petl.dateparser" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a function to parse strings as <a class="reference external" href="http://docs.python.org/library/datetime.html#datetime.date" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime.date</span></tt></a> objects using a given format.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">dateparser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isodate</span> <span class="o">=</span> <span class="n">dateparser</span><span class="p">(</span><span class="s">&#39;%Y-%m-</span><span class="si">%d</span><span class="s">&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isodate</span><span class="p">(</span><span class="s">&#39;2002-12-25&#39;</span><span class="p">)</span>
<span class="go">datetime.date(2002, 12, 25)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isodate</span><span class="p">(</span><span class="s">&#39;2002-02-30&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;petl/util.py&quot;</span>, line <span class="m">1032</span>, in <span class="n">parser</span>
    <span class="k">return</span> <span class="n">parser</span>
  File <span class="nb">&quot;/usr/lib/python2.7/_strptime.py&quot;</span>, line <span class="m">440</span>, in <span class="n">_strptime</span>
    <span class="n">datetime_date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">toordinal</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span>
<span class="gr">ValueError</span>: <span class="n">day is out of range for month</span>
</pre></div>
</div>
<p>Can be used with <a class="reference internal" href="#petl.parsecounts" title="petl.parsecounts"><tt class="xref py py-func docutils literal"><span class="pre">parsecounts()</span></tt></a>, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">parsecounts</span><span class="p">,</span> <span class="n">dateparser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;when&#39;</span><span class="p">,</span> <span class="s">&#39;who&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;2002-12-25&#39;</span><span class="p">,</span> <span class="s">&#39;Alex&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;2004-09-12&#39;</span><span class="p">,</span> <span class="s">&#39;Gloria&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;2002-13-25&#39;</span><span class="p">,</span> <span class="s">&#39;Marty&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;2002-02-30&#39;</span><span class="p">,</span> <span class="s">&#39;Melman&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parsers</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;date&#39;</span><span class="p">:</span> <span class="n">dateparser</span><span class="p">(</span><span class="s">&#39;%Y-%m-</span><span class="si">%d</span><span class="s">&#39;</span><span class="p">)}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">parsecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;when&#39;</span><span class="p">,</span> <span class="n">parsers</span><span class="p">))</span>
<span class="go">+--------+---------+----------+</span>
<span class="go">| &#39;type&#39; | &#39;count&#39; | &#39;errors&#39; |</span>
<span class="go">+========+=========+==========+</span>
<span class="go">| &#39;date&#39; | 2       | 2        |</span>
<span class="go">+--------+---------+----------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.timeparser">
<tt class="descclassname">petl.</tt><tt class="descname">timeparser</tt><big>(</big><em>format</em><big>)</big><a class="headerlink" href="#petl.timeparser" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a function to parse strings as <a class="reference external" href="http://docs.python.org/library/datetime.html#datetime.time" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime.time</span></tt></a> objects using a given format.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">timeparser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isotime</span> <span class="o">=</span> <span class="n">timeparser</span><span class="p">(</span><span class="s">&#39;%H:%M:%S&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isotime</span><span class="p">(</span><span class="s">&#39;00:00:00&#39;</span><span class="p">)</span>
<span class="go">datetime.time(0, 0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isotime</span><span class="p">(</span><span class="s">&#39;13:00:00&#39;</span><span class="p">)</span>
<span class="go">datetime.time(13, 0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isotime</span><span class="p">(</span><span class="s">&#39;12:00:99&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;petl/util.py&quot;</span>, line <span class="m">1046</span>, in <span class="n">parser</span>
 <span class="c">   </span>
  File <span class="nb">&quot;/usr/lib/python2.7/_strptime.py&quot;</span>, line <span class="m">328</span>, in <span class="n">_strptime</span>
    <span class="n">data_string</span><span class="p">[</span><span class="n">found</span><span class="o">.</span><span class="n">end</span><span class="p">():])</span>
<span class="gr">ValueError: unconverted data remains</span>: <span class="n">9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isotime</span><span class="p">(</span><span class="s">&#39;25:00:00&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;petl/util.py&quot;</span>, line <span class="m">1046</span>, in <span class="n">parser</span>
 <span class="c">   </span>
  File <span class="nb">&quot;/usr/lib/python2.7/_strptime.py&quot;</span>, line <span class="m">325</span>, in <span class="n">_strptime</span>
    <span class="p">(</span><span class="n">data_string</span><span class="p">,</span> <span class="n">format</span><span class="p">))</span>
<span class="gr">ValueError</span>: <span class="n">time data &#39;25:00:00&#39; does not match format &#39;%H:%M:%S&#39;</span>
</pre></div>
</div>
<p>Can be used with <a class="reference internal" href="#petl.parsecounts" title="petl.parsecounts"><tt class="xref py py-func docutils literal"><span class="pre">parsecounts()</span></tt></a>, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">parsecounts</span><span class="p">,</span> <span class="n">timeparser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;when&#39;</span><span class="p">,</span> <span class="s">&#39;who&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;00:00:00&#39;</span><span class="p">,</span> <span class="s">&#39;Alex&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;12:02:45&#39;</span><span class="p">,</span> <span class="s">&#39;Gloria&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;25:01:01&#39;</span><span class="p">,</span> <span class="s">&#39;Marty&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;09:70:00&#39;</span><span class="p">,</span> <span class="s">&#39;Melman&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parsers</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;time&#39;</span><span class="p">:</span> <span class="n">timeparser</span><span class="p">(</span><span class="s">&#39;%H:%M:%S&#39;</span><span class="p">)}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">parsecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;when&#39;</span><span class="p">,</span> <span class="n">parsers</span><span class="p">))</span>
<span class="go">+--------+---------+----------+</span>
<span class="go">| &#39;type&#39; | &#39;count&#39; | &#39;errors&#39; |</span>
<span class="go">+========+=========+==========+</span>
<span class="go">| &#39;time&#39; | 2       | 2        |</span>
<span class="go">+--------+---------+----------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.datetimeparser">
<tt class="descclassname">petl.</tt><tt class="descname">datetimeparser</tt><big>(</big><em>format</em><big>)</big><a class="headerlink" href="#petl.datetimeparser" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a function to parse strings as <a class="reference external" href="http://docs.python.org/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></tt></a> objects using a given format.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">datetimeparser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isodatetime</span> <span class="o">=</span> <span class="n">datetimeparser</span><span class="p">(</span><span class="s">&#39;%Y-%m-</span><span class="si">%d</span><span class="s">T%H:%M:%S&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isodatetime</span><span class="p">(</span><span class="s">&#39;2002-12-25T00:00:00&#39;</span><span class="p">)</span>
<span class="go">datetime.datetime(2002, 12, 25, 0, 0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isodatetime</span><span class="p">(</span><span class="s">&#39;2002-12-25T00:00:99&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;petl/util.py&quot;</span>, line <span class="m">1018</span>, in <span class="n">parser</span>
    <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="n">format</span><span class="p">)</span>
  File <span class="nb">&quot;/usr/lib/python2.7/_strptime.py&quot;</span>, line <span class="m">328</span>, in <span class="n">_strptime</span>
    <span class="n">data_string</span><span class="p">[</span><span class="n">found</span><span class="o">.</span><span class="n">end</span><span class="p">():])</span>
<span class="gr">ValueError: unconverted data remains</span>: <span class="n">9</span>
</pre></div>
</div>
<p>Can be used with <a class="reference internal" href="#petl.parsecounts" title="petl.parsecounts"><tt class="xref py py-func docutils literal"><span class="pre">parsecounts()</span></tt></a>, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">parsecounts</span><span class="p">,</span> <span class="n">datetimeparser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;when&#39;</span><span class="p">,</span> <span class="s">&#39;who&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;2002-12-25T00:00:00&#39;</span><span class="p">,</span> <span class="s">&#39;Alex&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;2004-09-12T01:10:11&#39;</span><span class="p">,</span> <span class="s">&#39;Gloria&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;2002-13-25T00:00:00&#39;</span><span class="p">,</span> <span class="s">&#39;Marty&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;2002-02-30T07:09:00&#39;</span><span class="p">,</span> <span class="s">&#39;Melman&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parsers</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;datetime&#39;</span><span class="p">:</span> <span class="n">datetimeparser</span><span class="p">(</span><span class="s">&#39;%Y-%m-</span><span class="si">%d</span><span class="s">T%H:%M:%S&#39;</span><span class="p">)}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">parsecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;when&#39;</span><span class="p">,</span> <span class="n">parsers</span><span class="p">))</span>
<span class="go">+------------+---------+----------+</span>
<span class="go">| &#39;type&#39;     | &#39;count&#39; | &#39;errors&#39; |</span>
<span class="go">+============+=========+==========+</span>
<span class="go">| &#39;datetime&#39; | 2       | 2        |</span>
<span class="go">+------------+---------+----------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.boolparser">
<tt class="descclassname">petl.</tt><tt class="descname">boolparser</tt><big>(</big><em>true_strings=['true', 't', 'yes', 'y', '1'], false_strings=['false', 'f', 'no', 'n', '0'], case_sensitive=False</em><big>)</big><a class="headerlink" href="#petl.boolparser" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a function to parse strings as <tt class="xref py py-class docutils literal"><span class="pre">bool</span></tt> objects using a given set of
string representations for <cite>True</cite> and <cite>False</cite>.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">boolparser</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">mybool</span> <span class="o">=</span> <span class="n">boolparser</span><span class="p">(</span><span class="n">true_strings</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;yes&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">],</span> <span class="n">false_strings</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;no&#39;</span><span class="p">,</span> <span class="s">&#39;n&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mybool</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mybool</span><span class="p">(</span><span class="s">&#39;Y&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mybool</span><span class="p">(</span><span class="s">&#39;yes&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mybool</span><span class="p">(</span><span class="s">&#39;No&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mybool</span><span class="p">(</span><span class="s">&#39;nO&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mybool</span><span class="p">(</span><span class="s">&#39;true&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;petl/util.py&quot;</span>, line <span class="m">1175</span>, in <span class="n">parser</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;value is not one of recognised boolean strings: </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">value</span><span class="p">)</span>
<span class="gr">ValueError: value is not one of recognised boolean strings</span>: <span class="n">&#39;true&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mybool</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;petl/util.py&quot;</span>, line <span class="m">1175</span>, in <span class="n">parser</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;value is not one of recognised boolean strings: </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">value</span><span class="p">)</span>
<span class="gr">ValueError: value is not one of recognised boolean strings</span>: <span class="n">&#39;foo&#39;</span>
</pre></div>
</div>
<p>Can be used with <a class="reference internal" href="#petl.parsecounts" title="petl.parsecounts"><tt class="xref py py-func docutils literal"><span class="pre">parsecounts()</span></tt></a>, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">parsecounts</span><span class="p">,</span> <span class="n">boolparser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;who&#39;</span><span class="p">,</span> <span class="s">&#39;vote&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;Alex&#39;</span><span class="p">,</span> <span class="s">&#39;yes&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;Gloria&#39;</span><span class="p">,</span> <span class="s">&#39;N&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;Marty&#39;</span><span class="p">,</span> <span class="s">&#39;hmmm&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;Melman&#39;</span><span class="p">,</span> <span class="s">&#39;nope&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mybool</span> <span class="o">=</span> <span class="n">boolparser</span><span class="p">(</span><span class="n">true_strings</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;yes&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">],</span> <span class="n">false_strings</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;no&#39;</span><span class="p">,</span> <span class="s">&#39;n&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parsers</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;bool&#39;</span><span class="p">:</span> <span class="n">mybool</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">parsecounts</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;vote&#39;</span><span class="p">,</span> <span class="n">parsers</span><span class="p">))</span>
<span class="go">+--------+---------+----------+</span>
<span class="go">| &#39;type&#39; | &#39;count&#39; | &#39;errors&#39; |</span>
<span class="go">+========+=========+==========+</span>
<span class="go">| &#39;bool&#39; | 2       | 2        |</span>
<span class="go">+--------+---------+----------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.parsenumber">
<tt class="descclassname">petl.</tt><tt class="descname">parsenumber</tt><big>(</big><em>v</em><big>)</big><a class="headerlink" href="#petl.parsenumber" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to parse the value as a number, trying <a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">int()</span></tt></a>, <a class="reference external" href="http://docs.python.org/library/functions.html#long" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">long()</span></tt></a>,
<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">float()</span></tt></a> and <a class="reference external" href="http://docs.python.org/library/functions.html#complex" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">complex()</span></tt></a> in that order. If all fail, return the
value as-is.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.4.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.lookup">
<tt class="descclassname">petl.</tt><tt class="descname">lookup</tt><big>(</big><em>table</em>, <em>keyspec</em>, <em>valuespec=None</em>, <em>dictionary=None</em><big>)</big><a class="headerlink" href="#petl.lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a dictionary with data from the given table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">lookup</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">[1]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">[2, 3]</span>
</pre></div>
</div>
<p>If no <cite>valuespec</cite> argument is given, defaults to the whole
row (as a tuple), e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">[(&#39;a&#39;, 1)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">[(&#39;b&#39;, 2), (&#39;b&#39;, 3)]</span>
</pre></div>
</div>
<p>Compound keys are supported, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t2</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">False</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">),</span> <span class="s">&#39;baz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="go">[True]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<span class="go">[False]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="go">[True, False]</span>
</pre></div>
</div>
<p>Data can be loaded into an existing dictionary-like object, including
persistent dictionaries created via the <a class="reference external" href="http://docs.python.org/library/shelve.html#shelve" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">shelve</span></tt></a> module, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shelve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;mylookup.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">lkp</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">exit</span><span class="p">()</span>
<span class="go">$ python</span>
<span class="go">Python 2.7.1+ (r271:86832, Apr 11 2011, 18:05:24) </span>
<span class="go">[GCC 4.5.2] on linux2</span>
<span class="go">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shelve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;mylookup.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">[1]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">[2, 3]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.lookupone">
<tt class="descclassname">petl.</tt><tt class="descname">lookupone</tt><big>(</big><em>table</em>, <em>keyspec</em>, <em>valuespec=None</em>, <em>dictionary=None</em>, <em>strict=True</em><big>)</big><a class="headerlink" href="#petl.lookupone" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a dictionary with data from the given table, assuming there is
at most one value for each key. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">lookupone</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">lookupone</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">]</span>
<span class="go">2</span>
</pre></div>
</div>
<p>If the specified key is not unique, will raise DuplicateKeyError, e.g.:</p>
<div class="highlight-python"><pre>&gt;&gt;&gt; table = [['foo', 'bar'], ['a', 1], ['b', 2], ['b', 3]]
&gt;&gt;&gt; lkp = lookupone(table, 'foo')
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "petl/util.py", line 451, in lookupone
petl.util.DuplicateKeyError</pre>
</div>
<p>Unique checks can be overridden by providing <cite>strict=False</cite>, in which case
the last value wins, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">lookupone</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">3</span>
</pre></div>
</div>
<p>Compound keys are supported, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t2</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">True</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">lookupone</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">),</span> <span class="s">&#39;baz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Data can be loaded into an existing dictionary-like object, including
persistent dictionaries created via the <a class="reference external" href="http://docs.python.org/library/shelve.html#shelve" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">shelve</span></tt></a> module, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">lookupone</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shelve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;mylookupone.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">lookupone</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">dictionary</span><span class="o">=</span><span class="n">lkp</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">exit</span><span class="p">()</span>
<span class="go">$ python</span>
<span class="go">Python 2.7.1+ (r271:86832, Apr 11 2011, 18:05:24) </span>
<span class="go">[GCC 4.5.2] on linux2</span>
<span class="go">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shelve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;mylookupone.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">]</span>
<span class="go">2</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.recordlookup">
<tt class="descclassname">petl.</tt><tt class="descname">recordlookup</tt><big>(</big><em>table</em>, <em>keyspec</em>, <em>dictionary=None</em><big>)</big><a class="headerlink" href="#petl.recordlookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a dictionary with data from the given table, mapping to records. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">recordlookup</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">recordlookup</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">[{&#39;foo&#39;: &#39;a&#39;, &#39;bar&#39;: 1}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">[{&#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 2}, {&#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 3}]</span>
</pre></div>
</div>
<p>Compound keys are supported, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t2</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">False</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">recordlookup</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="go">[{&#39;baz&#39;: True, &#39;foo&#39;: &#39;a&#39;, &#39;bar&#39;: 1}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<span class="go">[{&#39;baz&#39;: False, &#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 2}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="go">[{&#39;baz&#39;: True, &#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 3}, {&#39;baz&#39;: False, &#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 3}]</span>
</pre></div>
</div>
<p>Data can be loaded into an existing dictionary-like object, including
persistent dictionaries created via the <a class="reference external" href="http://docs.python.org/library/shelve.html#shelve" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">shelve</span></tt></a> module, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shelve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;myrecordlookup.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">recordlookup</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">dictionary</span><span class="o">=</span><span class="n">lkp</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">exit</span><span class="p">()</span>
<span class="go">$ python</span>
<span class="go">Python 2.7.1+ (r271:86832, Apr 11 2011, 18:05:24) </span>
<span class="go">[GCC 4.5.2] on linux2</span>
<span class="go">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shelve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;myrecordlookup.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">[{&#39;foo&#39;: &#39;a&#39;, &#39;bar&#39;: 1}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">[{&#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 2}, {&#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 3}]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.recordlookupone">
<tt class="descclassname">petl.</tt><tt class="descname">recordlookupone</tt><big>(</big><em>table</em>, <em>keyspec</em>, <em>dictionary=None</em>, <em>strict=True</em><big>)</big><a class="headerlink" href="#petl.recordlookupone" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a dictionary with data from the given table, mapping to records,
assuming there is at most one record for each key. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">recordlookupone</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">recordlookupone</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">{&#39;foo&#39;: &#39;a&#39;, &#39;bar&#39;: 1}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">{&#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 2}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">]</span>
<span class="go">{&#39;foo&#39;: &#39;c&#39;, &#39;bar&#39;: 2}</span>
</pre></div>
</div>
<p>If the specified key is not unique, will raise DuplicateKeyError, e.g.:</p>
<div class="highlight-python"><pre>&gt;&gt;&gt; table = [['foo', 'bar'], ['a', 1], ['b', 2], ['b', 3]]
&gt;&gt;&gt; lkp = recordlookupone(table, 'foo')
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "petl/util.py", line 451, in lookupone
petl.util.DuplicateKeyError</pre>
</div>
<p>Unique checks can be overridden by providing <cite>strict=False</cite>, in which case
the last record wins, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">recordlookupone</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">{&#39;foo&#39;: &#39;a&#39;, &#39;bar&#39;: 1}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">{&#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 3}</span>
</pre></div>
</div>
<p>Compound keys are supported, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t2</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
<span class="gp">... </span>      <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">True</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">recordlookupone</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">),</span> <span class="n">strict</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="go">{&#39;baz&#39;: True, &#39;foo&#39;: &#39;a&#39;, &#39;bar&#39;: 1}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<span class="go">{&#39;baz&#39;: False, &#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 2}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="go">{&#39;baz&#39;: True, &#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 3}</span>
</pre></div>
</div>
<p>Data can be loaded into an existing dictionary-like object, including
persistent dictionaries created via the <a class="reference external" href="http://docs.python.org/library/shelve.html#shelve" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">shelve</span></tt></a> module, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shelve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;myrecordlookupone.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">recordlookupone</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">dictionary</span><span class="o">=</span><span class="n">lkp</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">exit</span><span class="p">()</span>
<span class="go">$ python</span>
<span class="go">Python 2.7.1+ (r271:86832, Apr 11 2011, 18:05:24) </span>
<span class="go">[GCC 4.5.2] on linux2</span>
<span class="go">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shelve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span> <span class="o">=</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;myrecordlookupone.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="go">{&#39;foo&#39;: &#39;a&#39;, &#39;bar&#39;: 1}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="go">{&#39;foo&#39;: &#39;b&#39;, &#39;bar&#39;: 2}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lkp</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">]</span>
<span class="go">{&#39;foo&#39;: &#39;c&#39;, &#39;bar&#39;: 2}</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.statsum">
<tt class="descclassname">petl.</tt><tt class="descname">statsum</tt><big>(</big><em>filename</em><big>)</big><a class="headerlink" href="#petl.statsum" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a crude checksum of the file by hashing the file&#8217;s absolute path
name, the file size, and the file&#8217;s time of last modification. N.B., on
some systems this will give a 1s resolution, i.e., any changes to a file
within the same second that preserve the file size will <em>not</em> change the
result.</p>
</dd></dl>

<dl class="function">
<dt id="petl.adler32sum">
<tt class="descclassname">petl.</tt><tt class="descname">adler32sum</tt><big>(</big><em>filename</em><big>)</big><a class="headerlink" href="#petl.adler32sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the Adler 32 checksum of the file at the given location. Returns
the checksum as an integer, use hex(result) to view as hexadecimal.</p>
</dd></dl>

<dl class="function">
<dt id="petl.crc32sum">
<tt class="descclassname">petl.</tt><tt class="descname">crc32sum</tt><big>(</big><em>filename</em><big>)</big><a class="headerlink" href="#petl.crc32sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the CRC32 checksum of the file at the given location. Returns
the checksum as an integer, use hex(result) to view as hexadecimal.</p>
</dd></dl>

<dl class="function">
<dt id="petl.expr">
<tt class="descclassname">petl.</tt><tt class="descname">expr</tt><big>(</big><em>s</em><big>)</big><a class="headerlink" href="#petl.expr" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a function operating on a record (i.e., a dictionary representation
of a data row, indexed by field name).</p>
<p>The expression string is converted into a lambda function by prepending
the string with <tt class="docutils literal"><span class="pre">'lambda</span> <span class="pre">rec:</span> <span class="pre">'</span></tt>, then replacing anything enclosed in 
curly braces (e.g., <tt class="docutils literal"><span class="pre">&quot;{foo}&quot;</span></tt>) with a lookup on the record (e.g., 
<tt class="docutils literal"><span class="pre">&quot;rec['foo']&quot;</span></tt>), then finally calling <a class="reference external" href="http://docs.python.org/library/functions.html#eval" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">eval()</span></tt></a>.</p>
<p>So, e.g., the expression string <tt class="docutils literal"><span class="pre">&quot;{foo}</span> <span class="pre">*</span> <span class="pre">{bar}&quot;</span></tt> is converted to the 
function <tt class="docutils literal"><span class="pre">lambda</span> <span class="pre">rec:</span> <span class="pre">rec['foo']</span> <span class="pre">*</span> <span class="pre">rec['bar']</span></tt></p>
</dd></dl>

<dl class="function">
<dt id="petl.strjoin">
<tt class="descclassname">petl.</tt><tt class="descname">strjoin</tt><big>(</big><em>s</em><big>)</big><a class="headerlink" href="#petl.strjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a function to join sequences using <cite>s</cite> as the separator.</p>
</dd></dl>

<dl class="function">
<dt id="petl.dummytable">
<tt class="descclassname">petl.</tt><tt class="descname">dummytable</tt><big>(</big><em>numflds</em>, <em>numrows</em>, <em>wait=0</em><big>)</big><a class="headerlink" href="#petl.dummytable" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a table with dummy numerical data. Use <cite>numflds</cite> and <cite>numrows</cite> to
specify the number of fields and rows respectively. Set <cite>wait</cite> to a float
greater than zero to simulate a delay on each row generation (number of 
seconds per row).</p>
<p>Note that the data are generated on the fly and are not stored in memory,
so this function can be used to simulate very large tables.</p>
</dd></dl>

</div>
<div class="section" id="extracting-reading-tables-from-files-databases-and-other-sources">
<h2>Extracting (reading) tables from files, databases and other sources<a class="headerlink" href="#extracting-reading-tables-from-files-databases-and-other-sources" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="petl.fromcsv">
<tt class="descclassname">petl.</tt><tt class="descname">fromcsv</tt><big>(</big><em>filename</em>, <em>checksumfun=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.fromcsv" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for the standard <a class="reference external" href="http://docs.python.org/library/csv.html#csv.reader" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">csv.reader()</span></tt></a> function. Returns a table providing
access to the data in the given delimited file. The <cite>filename</cite> argument is the
path of the delimited file, all other keyword arguments are passed to 
<a class="reference external" href="http://docs.python.org/library/csv.html#csv.reader" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">csv.reader()</span></tt></a>. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">csv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># set up a CSV file to demonstrate with</span>
<span class="gp">... </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;test.csv&#39;</span><span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># now demonstrate the use of petl.fromcsv</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">fromcsv</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">testcsv</span> <span class="o">=</span> <span class="n">fromcsv</span><span class="p">(</span><span class="s">&#39;test.csv&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">testcsv</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | &#39;1&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Note that all data values are strings, and any intended numeric values will
need to be converted, see also <a class="reference internal" href="#petl.convert" title="petl.convert"><tt class="xref py py-func docutils literal"><span class="pre">convert()</span></tt></a>.</p>
<p>The returned table object implements the <cite>cachetag()</cite> method. If the 
<cite>checksumfun</cite> argument is not given, the default checksum function (whatever
<cite>petl.io.defaultsumfun</cite> is currently set to) will be used to calculate 
cachetag values.</p>
</dd></dl>

<dl class="function">
<dt id="petl.frompickle">
<tt class="descclassname">petl.</tt><tt class="descname">frompickle</tt><big>(</big><em>filename</em>, <em>checksumfun=None</em><big>)</big><a class="headerlink" href="#petl.frompickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a table providing access to the data pickled in the given file. The 
rows in the table should have been pickled to the file one at a time. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pickle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># set up a file to demonstrate with</span>
<span class="gp">... </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;test.dat&#39;</span><span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">([</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="n">f</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">([</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">([</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">f</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">([</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">],</span> <span class="n">f</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># now demonstrate the use of petl.frompickle</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">frompickle</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">testdat</span> <span class="o">=</span> <span class="n">frompickle</span><span class="p">(</span><span class="s">&#39;test.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">testdat</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2.5   |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>The returned table object implements the <cite>cachetag()</cite> method. If the 
<cite>checksumfun</cite> argument is not given, the default checksum function (whatever
<cite>petl.io.defaultsumfun</cite> is currently set to) will be used to calculate 
cachetag values.</p>
</dd></dl>

<dl class="function">
<dt id="petl.fromsqlite3">
<tt class="descclassname">petl.</tt><tt class="descname">fromsqlite3</tt><big>(</big><em>filename</em>, <em>query</em>, <em>checksumfun=None</em><big>)</big><a class="headerlink" href="#petl.fromsqlite3" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides access to data from an <a class="reference external" href="http://docs.python.org/library/sqlite3.html#sqlite3" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">sqlite3</span></tt></a> database file via a given query. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">fromsqlite3</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="c"># initial data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;create table foobar (foo, bar)&#39;</span><span class="p">)</span>
<span class="go">&lt;sqlite3.Cursor object at 0x2240b90&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;insert into foobar values (?, ?)&#39;</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>
<span class="gp">... </span>
<span class="go">&lt;sqlite3.Cursor object at 0x2240b90&gt;</span>
<span class="go">&lt;sqlite3.Cursor object at 0x2240b90&gt;</span>
<span class="go">&lt;sqlite3.Cursor object at 0x2240b90&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># demonstrate the petl.fromsqlite3 function</span>
<span class="gp">... </span><span class="n">foobar</span> <span class="o">=</span> <span class="n">fromsqlite3</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="p">,</span> <span class="s">&#39;select * from foobar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">foobar</span><span class="p">)</span>    
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| u&#39;a&#39;  | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| u&#39;b&#39;  | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| u&#39;c&#39;  | 2.0   |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>The returned table object implements the <cite>cachetag()</cite> method. If the 
<cite>checksumfun</cite> argument is not given, the default checksum function (whatever
<cite>petl.io.defaultsumfun</cite> is currently set to) will be used to calculate 
cachetag values.</p>
</dd></dl>

<dl class="function">
<dt id="petl.fromdb">
<tt class="descclassname">petl.</tt><tt class="descname">fromdb</tt><big>(</big><em>connection</em>, <em>query</em><big>)</big><a class="headerlink" href="#petl.fromdb" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides access to data from any DB-API 2.0 connection via a given query. 
E.g., using <cite>sqlite3</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">fromdb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">fromdb</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="s">&#39;select * from foobar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</pre></div>
</div>
<p>E.g., using <cite>psycopg2</cite> (assuming you&#8217;ve installed it first):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psycopg2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">fromdb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;dbname=test user=postgres&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">fromdb</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="s">&#39;select * from test&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</pre></div>
</div>
<p>E.g., using <cite>MySQLdb</cite> (assuming you&#8217;ve installed it first):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">MySQLdb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">fromdb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">MySQLdb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">passwd</span><span class="o">=</span><span class="s">&quot;moonpie&quot;</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="s">&quot;thangs&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">fromdb</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="s">&#39;select * from test&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</pre></div>
</div>
<p>The returned table object does not implement the <cite>cachetag()</cite> method.</p>
</dd></dl>

<dl class="function">
<dt id="petl.fromtext">
<tt class="descclassname">petl.</tt><tt class="descname">fromtext</tt><big>(</big><em>filename, header=['lines'], strip=None, checksumfun=None</em><big>)</big><a class="headerlink" href="#petl.fromtext" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a table from lines in the given text file. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># example data</span>
<span class="gp">... </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;test.txt&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;a</span><span class="se">\t</span><span class="s">1</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;b</span><span class="se">\t</span><span class="s">2</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;c</span><span class="se">\t</span><span class="s">3</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">fromtext</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="n">fromtext</span><span class="p">(</span><span class="s">&#39;test.txt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+--------------+</span>
<span class="go">| &#39;lines&#39;      |</span>
<span class="go">+==============+</span>
<span class="go">| &#39;a\t1&#39;     |</span>
<span class="go">+--------------+</span>
<span class="go">| &#39;b\t2&#39;     |</span>
<span class="go">+--------------+</span>
<span class="go">| &#39;c\t3&#39;     |</span>
<span class="go">+--------------+</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#petl.fromtext" title="petl.fromtext"><tt class="xref py py-func docutils literal"><span class="pre">fromtext()</span></tt></a> function provides a starting point for custom handling of 
text files. E.g., using <a class="reference internal" href="#petl.capture" title="petl.capture"><tt class="xref py py-func docutils literal"><span class="pre">capture()</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">capture</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">capture</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;lines&#39;</span><span class="p">,</span> <span class="s">&#39;(.*)</span><span class="se">\\</span><span class="s">t(.*)$&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | &#39;1&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;3&#39;   |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The strip() function is called on each line, which by default will remove 
leading and trailing whitespace, including the end-of-line character - use 
the <cite>strip</cite> keyword argument to specify alternative characters to strip.</p>
</dd></dl>

<dl class="function">
<dt id="petl.fromxml">
<tt class="descclassname">petl.</tt><tt class="descname">fromxml</tt><big>(</big><em>filename</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.fromxml" title="Permalink to this definition">¶</a></dt>
<dd><p>Access data in an XML file. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">fromxml</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;&lt;table&gt;</span>
<span class="gp">... </span><span class="s">    &lt;tr&gt;</span>
<span class="gp">... </span><span class="s">        &lt;td&gt;foo&lt;/td&gt;&lt;td&gt;bar&lt;/td&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/tr&gt;</span>
<span class="gp">... </span><span class="s">    &lt;tr&gt;</span>
<span class="gp">... </span><span class="s">        &lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/tr&gt;</span>
<span class="gp">... </span><span class="s">    &lt;tr&gt;</span>
<span class="gp">... </span><span class="s">        &lt;td&gt;b&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/tr&gt;</span>
<span class="gp">... </span><span class="s">    &lt;tr&gt;</span>
<span class="gp">... </span><span class="s">        &lt;td&gt;c&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/tr&gt;</span>
<span class="gp">... </span><span class="s">&lt;/table&gt;&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;example1.xml&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>    
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="n">fromxml</span><span class="p">(</span><span class="s">&#39;example1.xml&#39;</span><span class="p">,</span> <span class="s">&#39;tr&#39;</span><span class="p">,</span> <span class="s">&#39;td&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | &#39;1&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>If the data values are stored in an attribute, provide the attribute name
as an extra positional argument, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;&lt;table&gt;</span>
<span class="gp">... </span><span class="s">    &lt;tr&gt;</span>
<span class="gp">... </span><span class="s">        &lt;td v=&#39;foo&#39;/&gt;&lt;td v=&#39;bar&#39;/&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/tr&gt;</span>
<span class="gp">... </span><span class="s">    &lt;tr&gt;</span>
<span class="gp">... </span><span class="s">        &lt;td v=&#39;a&#39;/&gt;&lt;td v=&#39;1&#39;/&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/tr&gt;</span>
<span class="gp">... </span><span class="s">    &lt;tr&gt;</span>
<span class="gp">... </span><span class="s">        &lt;td v=&#39;b&#39;/&gt;&lt;td v=&#39;2&#39;/&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/tr&gt;</span>
<span class="gp">... </span><span class="s">    &lt;tr&gt;</span>
<span class="gp">... </span><span class="s">        &lt;td v=&#39;c&#39;/&gt;&lt;td v=&#39;2&#39;/&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/tr&gt;</span>
<span class="gp">... </span><span class="s">&lt;/table&gt;&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;example2.xml&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>    
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">fromxml</span><span class="p">(</span><span class="s">&#39;example2.xml&#39;</span><span class="p">,</span> <span class="s">&#39;tr&#39;</span><span class="p">,</span> <span class="s">&#39;td&#39;</span><span class="p">,</span> <span class="s">&#39;v&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | &#39;1&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Data values can also be extracted by providing a mapping of field names
to element paths, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;&lt;table&gt;</span>
<span class="gp">... </span><span class="s">    &lt;row&gt;</span>
<span class="gp">... </span><span class="s">        &lt;foo&gt;a&lt;/foo&gt;&lt;baz&gt;&lt;bar v=&#39;1&#39;/&gt;&lt;/baz&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/row&gt;</span>
<span class="gp">... </span><span class="s">    &lt;row&gt;</span>
<span class="gp">... </span><span class="s">        &lt;foo&gt;b&lt;/foo&gt;&lt;baz&gt;&lt;bar v=&#39;2&#39;/&gt;&lt;/baz&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/row&gt;</span>
<span class="gp">... </span><span class="s">    &lt;row&gt;</span>
<span class="gp">... </span><span class="s">        &lt;foo&gt;c&lt;/foo&gt;&lt;baz&gt;&lt;bar v=&#39;2&#39;/&gt;&lt;/baz&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/row&gt;</span>
<span class="gp">... </span><span class="s">&lt;/table&gt;&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;example3.xml&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>    
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">fromxml</span><span class="p">(</span><span class="s">&#39;example3.xml&#39;</span><span class="p">,</span> <span class="s">&#39;row&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;baz/bar&#39;</span><span class="p">,</span> <span class="s">&#39;v&#39;</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | &#39;1&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Note that the implementation is currently <em>not</em>
streaming, i.e., the whole document is loaded into memory.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.4.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.fromjson">
<tt class="descclassname">petl.</tt><tt class="descname">fromjson</tt><big>(</big><em>filename</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.fromjson" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract data from a JSON file. The file must contain a JSON array as the top
level object, and each member of the array will be treated as a row of data.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">fromjson</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="s">&#39;[{&quot;foo&quot;: &quot;a&quot;, &quot;bar&quot;: 1}, {&quot;foo&quot;: &quot;b&quot;, &quot;bar&quot;: 2}, {&quot;foo&quot;: &quot;c&quot;, &quot;bar&quot;: 2}]&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;example1.json&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="n">fromjson</span><span class="p">(</span><span class="s">&#39;example1.json&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="go">+--------+--------+</span>
<span class="go">| u&#39;foo&#39; | u&#39;bar&#39; |</span>
<span class="go">+========+========+</span>
<span class="go">| u&#39;a&#39;   | 1      |</span>
<span class="go">+--------+--------+</span>
<span class="go">| u&#39;b&#39;   | 2      |</span>
<span class="go">+--------+--------+</span>
<span class="go">| u&#39;c&#39;   | 2      |</span>
<span class="go">+--------+--------+</span>
</pre></div>
</div>
<p>If your JSON file does not fit this structure, you will need to parse it
via <a class="reference external" href="http://docs.python.org/library/json.html#json.load" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">json.load()</span></tt></a> and select the array to treat as the data, see also 
<a class="reference internal" href="#petl.fromdicts" title="petl.fromdicts"><tt class="xref py py-func docutils literal"><span class="pre">fromdicts()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.fromdicts">
<tt class="descclassname">petl.</tt><tt class="descname">fromdicts</tt><big>(</big><em>dicts</em>, <em>header=None</em><big>)</big><a class="headerlink" href="#petl.fromdicts" title="Permalink to this definition">¶</a></dt>
<dd><p>View a sequence of Python <a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></a> as a table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">fromdicts</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dicts</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&quot;foo&quot;</span><span class="p">:</span> <span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;foo&quot;</span><span class="p">:</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;foo&quot;</span><span class="p">:</span> <span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">fromdicts</span><span class="p">(</span><span class="n">dicts</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#petl.fromjson" title="petl.fromjson"><tt class="xref py py-func docutils literal"><span class="pre">fromjson()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

</div>
<div class="section" id="transforming-tables">
<h2>Transforming tables<a class="headerlink" href="#transforming-tables" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="petl.rename">
<tt class="descclassname">petl.</tt><tt class="descname">rename</tt><big>(</big><em>table</em>, <em>*args</em><big>)</big><a class="headerlink" href="#petl.rename" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace one or more fields in the table&#8217;s header row. E.g., to rename a 
single field:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">rename</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tbl1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;sex&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="s">&#39;F&#39;</span><span class="p">,</span> <span class="mi">34</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="mi">56</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tbl2</span> <span class="o">=</span> <span class="n">rename</span><span class="p">(</span><span class="n">tbl1</span><span class="p">,</span> <span class="s">&#39;sex&#39;</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">tbl2</span><span class="p">)</span>
<span class="go">+----------+-------+</span>
<span class="go">| &#39;gender&#39; | &#39;age&#39; |</span>
<span class="go">+==========+=======+</span>
<span class="go">| &#39;M&#39;      | 12    |</span>
<span class="go">+----------+-------+</span>
<span class="go">| &#39;F&#39;      | 34    |</span>
<span class="go">+----------+-------+</span>
<span class="go">| &#39;-&#39;      | 56    |</span>
<span class="go">+----------+-------+</span>
</pre></div>
</div>
<p>To rename multiple fields, pass a dictionary as the second argument, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">rename</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tbl1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;sex&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="s">&#39;F&#39;</span><span class="p">,</span> <span class="mi">34</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="mi">56</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tbl2</span> <span class="o">=</span> <span class="n">rename</span><span class="p">(</span><span class="n">tbl1</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;sex&#39;</span><span class="p">:</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">:</span> <span class="s">&#39;age_years&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">tbl2</span><span class="p">)</span>
<span class="go">+----------+-------------+</span>
<span class="go">| &#39;gender&#39; | &#39;age_years&#39; |</span>
<span class="go">+==========+=============+</span>
<span class="go">| &#39;M&#39;      | 12          |</span>
<span class="go">+----------+-------------+</span>
<span class="go">| &#39;F&#39;      | 34          |</span>
<span class="go">+----------+-------------+</span>
<span class="go">| &#39;-&#39;      | 56          |</span>
<span class="go">+----------+-------------+</span>
</pre></div>
</div>
<p>The returned table object can also be used to modify the field mapping, 
using the suffix notation, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tbl1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;sex&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="s">&#39;F&#39;</span><span class="p">,</span> <span class="mi">34</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="mi">56</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tbl2</span> <span class="o">=</span> <span class="n">rename</span><span class="p">(</span><span class="n">tbl1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">tbl2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;sex&#39; | &#39;age&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;M&#39;   | 12    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 34    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;-&#39;   | 56    |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">tbl2</span><span class="p">[</span><span class="s">&#39;sex&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;gender&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">tbl2</span><span class="p">)</span>
<span class="go">+----------+-------+</span>
<span class="go">| &#39;gender&#39; | &#39;age&#39; |</span>
<span class="go">+==========+=======+</span>
<span class="go">| &#39;M&#39;      | 12    |</span>
<span class="go">+----------+-------+</span>
<span class="go">| &#39;F&#39;      | 34    |</span>
<span class="go">+----------+-------+</span>
<span class="go">| &#39;-&#39;      | 56    |</span>
<span class="go">+----------+-------+</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>Function signature changed to support the simple 2 argument form when renaming
a single field.</p>
</dd></dl>

<dl class="function">
<dt id="petl.setheader">
<tt class="descclassname">petl.</tt><tt class="descname">setheader</tt><big>(</big><em>table</em>, <em>fields</em><big>)</big><a class="headerlink" href="#petl.setheader" title="Permalink to this definition">¶</a></dt>
<dd><p>Override fields in the given table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">setheader</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">setheader</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foofoo&#39;</span><span class="p">,</span> <span class="s">&#39;barbar&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+----------+----------+</span>
<span class="go">| &#39;foofoo&#39; | &#39;barbar&#39; |</span>
<span class="go">+==========+==========+</span>
<span class="go">| &#39;a&#39;      | 1        |</span>
<span class="go">+----------+----------+</span>
<span class="go">| &#39;b&#39;      | 2        |</span>
<span class="go">+----------+----------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.extendheader">
<tt class="descclassname">petl.</tt><tt class="descname">extendheader</tt><big>(</big><em>table</em>, <em>fields</em><big>)</big><a class="headerlink" href="#petl.extendheader" title="Permalink to this definition">¶</a></dt>
<dd><p>Extend fields in the given table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">extendheader</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">extendheader</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     | False |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.pushheader">
<tt class="descclassname">petl.</tt><tt class="descname">pushheader</tt><big>(</big><em>table</em>, <em>fields</em><big>)</big><a class="headerlink" href="#petl.pushheader" title="Permalink to this definition">¶</a></dt>
<dd><p>Push rows down and prepend a header row. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">pushheader</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">pushheader</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Useful, e.g., where data are from a CSV file that has not included a header
row.</p>
</dd></dl>

<dl class="function">
<dt id="petl.skip">
<tt class="descclassname">petl.</tt><tt class="descname">skip</tt><big>(</big><em>table</em>, <em>n</em><big>)</big><a class="headerlink" href="#petl.skip" title="Permalink to this definition">¶</a></dt>
<dd><p>Skip <cite>n</cite> rows (including the header row). E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">skip</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;#aaa&#39;</span><span class="p">,</span> <span class="s">&#39;bbb&#39;</span><span class="p">,</span> <span class="s">&#39;ccc&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;#mmm&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">skip</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.skipcomments">
<tt class="descclassname">petl.</tt><tt class="descname">skipcomments</tt><big>(</big><em>table</em>, <em>prefix</em><big>)</big><a class="headerlink" href="#petl.skipcomments" title="Permalink to this definition">¶</a></dt>
<dd><p>Skip any row where the first value is a string and starts with 
<cite>prefix</cite>. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">skipcomments</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;##aaa&#39;</span><span class="p">,</span> <span class="s">&#39;bbb&#39;</span><span class="p">,</span> <span class="s">&#39;ccc&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;##mmm&#39;</span><span class="p">,],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;#foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;##nnn&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">skipcomments</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;##&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+--------+-------+</span>
<span class="go">| &#39;#foo&#39; | &#39;bar&#39; |</span>
<span class="go">+========+=======+</span>
<span class="go">| &#39;a&#39;    | 1     |</span>
<span class="go">+--------+-------+</span>
<span class="go">| &#39;b&#39;    | 2     |</span>
<span class="go">+--------+-------+</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 0.4.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.rowslice">
<tt class="descclassname">petl.</tt><tt class="descname">rowslice</tt><big>(</big><em>table</em>, <em>*sliceargs</em><big>)</big><a class="headerlink" href="#petl.rowslice" title="Permalink to this definition">¶</a></dt>
<dd><p>Choose a subsequence of data rows. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rowslice</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">rowslice</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">rowslice</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 5     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;d&#39;   | 7     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span> <span class="o">=</span> <span class="n">rowslice</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 5     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;f&#39;   | 42    |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.3.</span></p>
<p>Positional arguments can be used to slice the data rows. The <cite>sliceargs</cite> are 
passed to <a class="reference external" href="http://docs.python.org/library/itertools.html#itertools.islice" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">itertools.islice()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.head">
<tt class="descclassname">petl.</tt><tt class="descname">head</tt><big>(</big><em>table</em>, <em>n=10</em><big>)</big><a class="headerlink" href="#petl.head" title="Permalink to this definition">¶</a></dt>
<dd><p>Choose the first n data rows. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">head</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;h&#39;</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;k&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;l&#39;</span><span class="p">,</span> <span class="mi">77</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;q&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">head</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>    
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 5     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;d&#39;   | 7     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Syntactic sugar: equivalent to <tt class="docutils literal"><span class="pre">rowslice(table,</span> <span class="pre">n)</span></tt>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.tail">
<tt class="descclassname">petl.</tt><tt class="descname">tail</tt><big>(</big><em>table</em>, <em>n=10</em><big>)</big><a class="headerlink" href="#petl.tail" title="Permalink to this definition">¶</a></dt>
<dd><p>Choose the last n data rows. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">tail</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;h&#39;</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;k&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;l&#39;</span><span class="p">,</span> <span class="mi">77</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;q&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">tail</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>    
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;h&#39;   | 90    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;k&#39;   | 12    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;l&#39;   | 77    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;q&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.cut">
<tt class="descclassname">petl.</tt><tt class="descname">cut</tt><big>(</big><em>table</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.cut" title="Permalink to this definition">¶</a></dt>
<dd><p>Choose and/or re-order columns. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">cut</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">2.7</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">3.4</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">7.8</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">cut</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 2.7   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 3.4   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 7.8   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 9.0   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;E&#39;   | None  |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Note that any short rows will be padded with <cite>None</cite> values (or whatever is
provided via the <cite>missing</cite> keyword argument).</p>
<p>Fields can also be specified by index, starting from zero. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">cut</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 2.7   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 3.4   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 7.8   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 9.0   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;E&#39;   | None  |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Field names and indices can be mixed, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span> <span class="o">=</span> <span class="n">cut</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;bar&#39; | &#39;foo&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| 1     | &#39;A&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| 2     | &#39;B&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| 3     | &#39;B&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| 42    | &#39;D&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| 12    | &#39;E&#39;   |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Use the standard <a class="reference external" href="http://docs.python.org/library/functions.html#range" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">range()</span></tt></a> runction to select a range of fields, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table5</span> <span class="o">=</span> <span class="n">cut</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="o">*</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table5</span><span class="p">)</span>    
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 3     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 42    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;E&#39;   | 12    |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#petl.cutout" title="petl.cutout"><tt class="xref py py-func docutils literal"><span class="pre">cutout()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.cutout">
<tt class="descclassname">petl.</tt><tt class="descname">cutout</tt><big>(</big><em>table</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.cutout" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove fields. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">cutout</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">((</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3.4&#39;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">u&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;3&#39;</span><span class="p">,</span> <span class="s">u&#39;7.8&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;xyz&#39;</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">cutout</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+--------+</span>
<span class="go">| &#39;foo&#39; | &#39;baz&#39;  |</span>
<span class="go">+=======+========+</span>
<span class="go">| &#39;A&#39;   | 2      |</span>
<span class="go">+-------+--------+</span>
<span class="go">| &#39;B&#39;   | &#39;3.4&#39;  |</span>
<span class="go">+-------+--------+</span>
<span class="go">| u&#39;B&#39;  | u&#39;7.8&#39; |</span>
<span class="go">+-------+--------+</span>
<span class="go">| &#39;D&#39;   | 9.0    |</span>
<span class="go">+-------+--------+</span>
<span class="go">| &#39;E&#39;   | None   |</span>
<span class="go">+-------+--------+</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#petl.cut" title="petl.cut"><tt class="xref py py-func docutils literal"><span class="pre">cut()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.3.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.select">
<tt class="descclassname">petl.</tt><tt class="descname">select</tt><big>(</big><em>table</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows meeting a condition. The second positional argument can be a function
accepting a record (i.e., a dictionary representation of a row) e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">select</span><span class="p">,</span> <span class="n">look</span>     
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mf">9.3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">88.2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">23.3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mf">42.0</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mf">100.9</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">rec</span><span class="p">:</span> <span class="n">rec</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;a&#39;</span> <span class="ow">and</span> <span class="n">rec</span><span class="p">[</span><span class="s">&#39;baz&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">88.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 2     | 88.2  |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>The second positional argument can also be an expression string, which will be converted
to a function using <a class="reference internal" href="#petl.expr" title="petl.expr"><tt class="xref py py-func docutils literal"><span class="pre">expr()</span></tt></a>, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&quot;{foo} == &#39;a&#39; and {baz} &gt; 88.1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 2     | 88.2  |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>The condition can also be applied to a single field, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span> <span class="o">==</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 4     | 9.3   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;a&#39;   | 2     | 88.2  |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectop">
<tt class="descclassname">petl.</tt><tt class="descname">selectop</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>op</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectop" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the function <cite>op</cite> applied to the given field and the given 
value returns true.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selecteq">
<tt class="descclassname">petl.</tt><tt class="descname">selecteq</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selecteq" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field equals the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectne">
<tt class="descclassname">petl.</tt><tt class="descname">selectne</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectne" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field does not equal the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectlt">
<tt class="descclassname">petl.</tt><tt class="descname">selectlt</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectlt" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is less than the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectle">
<tt class="descclassname">petl.</tt><tt class="descname">selectle</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectle" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is less than or equal to the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectgt">
<tt class="descclassname">petl.</tt><tt class="descname">selectgt</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectgt" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is greater than the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectge">
<tt class="descclassname">petl.</tt><tt class="descname">selectge</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectge" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is greater than or equal to the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectrangeopen">
<tt class="descclassname">petl.</tt><tt class="descname">selectrangeopen</tt><big>(</big><em>table</em>, <em>field</em>, <em>minv</em>, <em>maxv</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectrangeopen" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is greater than or equal to <cite>minv</cite> and 
less than or equal to <cite>maxv</cite>.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectrangeopenleft">
<tt class="descclassname">petl.</tt><tt class="descname">selectrangeopenleft</tt><big>(</big><em>table</em>, <em>field</em>, <em>minv</em>, <em>maxv</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectrangeopenleft" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is greater than or equal to <cite>minv</cite> and 
less than <cite>maxv</cite>.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectrangeopenright">
<tt class="descclassname">petl.</tt><tt class="descname">selectrangeopenright</tt><big>(</big><em>table</em>, <em>field</em>, <em>minv</em>, <em>maxv</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectrangeopenright" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is greater than <cite>minv</cite> and 
less than or equal to <cite>maxv</cite>.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectrangeclosed">
<tt class="descclassname">petl.</tt><tt class="descname">selectrangeclosed</tt><big>(</big><em>table</em>, <em>field</em>, <em>minv</em>, <em>maxv</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectrangeclosed" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is greater than <cite>minv</cite> and 
less than <cite>maxv</cite>.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectin">
<tt class="descclassname">petl.</tt><tt class="descname">selectin</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectin" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is a member of the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectnotin">
<tt class="descclassname">petl.</tt><tt class="descname">selectnotin</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectnotin" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is not a member of the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectis">
<tt class="descclassname">petl.</tt><tt class="descname">selectis</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectis" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field <cite>is</cite> the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectisnot">
<tt class="descclassname">petl.</tt><tt class="descname">selectisnot</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectisnot" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field <cite>is not</cite> the given value.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectisinstance">
<tt class="descclassname">petl.</tt><tt class="descname">selectisinstance</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectisinstance" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where the given field is an instance of the given type.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.selectre">
<tt class="descclassname">petl.</tt><tt class="descname">selectre</tt><big>(</big><em>table</em>, <em>field</em>, <em>pattern</em>, <em>flags=0</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.selectre" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows where a regular expression search using the given pattern on the
given field returns a match. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">selectre</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">((</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;aa&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mf">9.3</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;aaa&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">88.2</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">23.3</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;ccc&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mf">42.0</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;bb&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mf">100.9</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">selectre</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;[ab]{2}&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;aa&#39;  | 4     | 9.3   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;aaa&#39; | 2     | 88.2  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;bb&#39;  | 7     | 100.9 |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>See also <a class="reference external" href="http://docs.python.org/library/re.html#re.search" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">re.search()</span></tt></a>.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.rowselect">
<tt class="descclassname">petl.</tt><tt class="descname">rowselect</tt><big>(</big><em>table</em>, <em>where</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.rowselect" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows matching a condition. The <cite>where</cite> argument should be a function
accepting a row (list or tuple) as argument and returning True or False.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.recordselect">
<tt class="descclassname">petl.</tt><tt class="descname">recordselect</tt><big>(</big><em>table</em>, <em>where</em>, <em>missing=None</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.recordselect" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows matching a condition. The <cite>where</cite> argument should be a function
accepting a record (row as dictionary of values indexed by field name) as 
argument and returning True or False.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.rowlenselect">
<tt class="descclassname">petl.</tt><tt class="descname">rowlenselect</tt><big>(</big><em>table</em>, <em>n</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.rowlenselect" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows of length <cite>n</cite>.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.fieldselect">
<tt class="descclassname">petl.</tt><tt class="descname">fieldselect</tt><big>(</big><em>table</em>, <em>field</em>, <em>where</em>, <em>complement=False</em><big>)</big><a class="headerlink" href="#petl.fieldselect" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows matching a condition. The <cite>where</cite> argument should be a function
accepting a single data value as argument and returning True or False.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.4.</span></p>
<p>The complement of the selection can be returned (i.e., the query can be 
inverted) by providing <cite>complement=True</cite> as a keyword argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.facet">
<tt class="descclassname">petl.</tt><tt class="descname">facet</tt><big>(</big><em>table</em>, <em>field</em><big>)</big><a class="headerlink" href="#petl.facet" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary mapping field values to tables. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">facet</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mf">9.3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">88.2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">23.3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mf">42.0</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mf">100.9</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span> <span class="o">=</span> <span class="n">facet</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;a&#39;, &#39;c&#39;, &#39;b&#39;, &#39;d&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">foo</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 4     | 9.3   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;a&#39;   | 2     | 88.2  |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">foo</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">])</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;c&#39;   | 8     | 42.0  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |       |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.rangefacet">
<tt class="descclassname">petl.</tt><tt class="descname">rangefacet</tt><big>(</big><em>table</em>, <em>field</em>, <em>width</em>, <em>minv=None</em>, <em>maxv=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.rangefacet" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary mapping ranges to tables. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rangefacet</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rf</span> <span class="o">=</span> <span class="n">rangefacet</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rf</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[(1, 3), (3, 5), (5, 7), (7, 9)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">rf</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)])</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">rf</span><span class="p">[(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">)])</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 7     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 9     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Note that the last bin includes both edges.</p>
</dd></dl>

<dl class="function">
<dt id="petl.replace">
<tt class="descclassname">petl.</tt><tt class="descname">replace</tt><big>(</big><em>table</em>, <em>field</em>, <em>a</em>, <em>b</em><big>)</big><a class="headerlink" href="#petl.replace" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to replace all occurrences of <cite>a</cite> with <cite>b</cite> under the 
given field. See also <a class="reference internal" href="#petl.convert" title="petl.convert"><tt class="xref py py-func docutils literal"><span class="pre">convert()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.replaceall">
<tt class="descclassname">petl.</tt><tt class="descname">replaceall</tt><big>(</big><em>table</em>, <em>a</em>, <em>b</em><big>)</big><a class="headerlink" href="#petl.replaceall" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to replace all instances of <cite>a</cite> with <cite>b</cite> under all 
fields. See also <a class="reference internal" href="#petl.convertall" title="petl.convertall"><tt class="xref py py-func docutils literal"><span class="pre">convertall()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.convert">
<tt class="descclassname">petl.</tt><tt class="descname">convert</tt><big>(</big><em>table</em>, <em>field</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.convert" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform values under the given field via an arbitrary function or method
invocation. E.g., using the built-in <a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">float()</span></tt></a> function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">convert</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;2.4&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;5.7&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;1.2&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;8.3&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 2.4   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 5.7   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 1.2   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 8.3   |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>E.g., using a lambda function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">table2</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>    
<span class="go">+-------+-------------------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39;             |</span>
<span class="go">+=======+===================+</span>
<span class="go">| &#39;A&#39;   | 5.76              |</span>
<span class="go">+-------+-------------------+</span>
<span class="go">| &#39;B&#39;   | 32.49             |</span>
<span class="go">+-------+-------------------+</span>
<span class="go">| &#39;C&#39;   | 1.44              |</span>
<span class="go">+-------+-------------------+</span>
<span class="go">| &#39;D&#39;   | 68.89000000000001 |</span>
<span class="go">+-------+-------------------+</span>
</pre></div>
</div>
<p>A method of the data value can also be invoked by passing the method name. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;lower&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | &#39;2.4&#39; |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;5.7&#39; |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;1.2&#39; |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;d&#39;   | &#39;8.3&#39; |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Arguments to the method invocation can also be given, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table5</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">table4</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;replace&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;aa&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table5</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;aa&#39;  | &#39;2.4&#39; |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;5.7&#39; |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;1.2&#39; |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;d&#39;   | &#39;8.3&#39; |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Useful for, among other things, string manipulation, see also the methods
on the <a class="reference external" href="http://docs.python.org/library/stdtypes.html#string-methods">str</a> 
type.</p>
<p>Values can also be translated via a dictionary, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table6</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;F&#39;</span><span class="p">,</span> <span class="mi">34</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="mi">56</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table7</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">table6</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;M&#39;</span><span class="p">:</span> <span class="s">&#39;male&#39;</span><span class="p">,</span> <span class="s">&#39;F&#39;</span><span class="p">:</span> <span class="s">&#39;female&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table7</span><span class="p">)</span>
<span class="go">+----------+-------+</span>
<span class="go">| &#39;gender&#39; | &#39;age&#39; |</span>
<span class="go">+==========+=======+</span>
<span class="go">| &#39;male&#39;   | 12    |</span>
<span class="go">+----------+-------+</span>
<span class="go">| &#39;female&#39; | 34    |</span>
<span class="go">+----------+-------+</span>
<span class="go">| &#39;-&#39;      | 56    |</span>
<span class="go">+----------+-------+</span>
</pre></div>
</div>
<p>Note that the <cite>field</cite> argument can be a list or tuple of fields, in which
case the conversion will be applied to all of the fields given.</p>
</dd></dl>

<dl class="function">
<dt id="petl.convertall">
<tt class="descclassname">petl.</tt><tt class="descname">convertall</tt><big>(</big><em>table</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.convertall" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to convert all fields in the table using a common 
function or mapping. See also <a class="reference internal" href="#petl.convert" title="petl.convert"><tt class="xref py py-func docutils literal"><span class="pre">convert()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.4.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.fieldconvert">
<tt class="descclassname">petl.</tt><tt class="descname">fieldconvert</tt><big>(</big><em>table</em>, <em>converters=None</em>, <em>failonerror=False</em>, <em>errorvalue=None</em><big>)</big><a class="headerlink" href="#petl.fieldconvert" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform values in one or more fields via functions or method invocations. 
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">fieldconvert</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;2.4&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;3&#39;</span><span class="p">,</span> <span class="s">&#39;7.9&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;7&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;8.3&#39;</span><span class="p">,</span> <span class="s">&#39;42.0&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">fieldconvert</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| 1     | 2.4   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| 3     | 7.9   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| 7     | 2.0   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| None  | 42.0  |</span>
<span class="go">+-------+-------+</span>
<span class="go">| 2     | None  |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Converters can also be added or updated using the suffix notation on the
returned table object. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;2.4&#39;</span><span class="p">,</span> <span class="mi">14</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;3&#39;</span><span class="p">,</span> <span class="s">&#39;7.9&#39;</span><span class="p">,</span> <span class="mi">47</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;7&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;8.3&#39;</span><span class="p">,</span> <span class="s">&#39;42.0&#39;</span><span class="p">,</span> <span class="mi">33</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;xyz&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span> <span class="o">=</span> <span class="n">fieldconvert</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+-------+--------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39;  | &#39;baz&#39; |</span>
<span class="go">+=======+========+=======+</span>
<span class="go">| &#39;1&#39;   | &#39;2.4&#39;  | 14    |</span>
<span class="go">+-------+--------+-------+</span>
<span class="go">| &#39;3&#39;   | &#39;7.9&#39;  | 47    |</span>
<span class="go">+-------+--------+-------+</span>
<span class="go">| &#39;7&#39;   | &#39;2&#39;    | 11    |</span>
<span class="go">+-------+--------+-------+</span>
<span class="go">| &#39;8.3&#39; | &#39;42.0&#39; | 33    |</span>
<span class="go">+-------+--------+-------+</span>
<span class="go">| &#39;2&#39;   | &#39;abc&#39;  | &#39;xyz&#39; |</span>
<span class="go">+-------+--------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span><span class="p">[</span><span class="s">&#39;baz&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| 1     | 2.4   | 196   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 3     | 7.9   | 2209  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 7     | 2.0   | 121   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| None  | 42.0  | 1089  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 2     | None  | None  |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>Converters can be functions, method names, or method names with arguments. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table5</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;5&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;8.3&#39;</span><span class="p">,</span> <span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;z&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table6</span> <span class="o">=</span> <span class="n">fieldconvert</span><span class="p">(</span><span class="n">table5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table6</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table6</span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;lower&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table6</span><span class="p">[</span><span class="s">&#39;baz&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;replace&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;yy&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table6</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| 2     | &#39;a&#39;   | &#39;x&#39;   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 5     | &#39;b&#39;   | &#39;yy&#39;  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 1     | &#39;c&#39;   | &#39;yy&#39;  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| None  | &#39;d&#39;   | &#39;z&#39;   |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>Converters can also be dictionaries, which will be used to translate values
under the specified field.</p>
</dd></dl>

<dl class="function">
<dt id="petl.convertnumbers">
<tt class="descclassname">petl.</tt><tt class="descname">convertnumbers</tt><big>(</big><em>table</em><big>)</big><a class="headerlink" href="#petl.convertnumbers" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to convert all field values to numbers where possible. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">convertnumbers</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="s">&#39;quux&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;3.0&#39;</span><span class="p">,</span> <span class="s">&#39;9+3j&#39;</span><span class="p">,</span> <span class="s">&#39;aaa&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;1.3&#39;</span><span class="p">,</span> <span class="s">&#39;7+2j&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">convertnumbers</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+--------+--------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39;  | &#39;quux&#39; |</span>
<span class="go">+=======+=======+========+========+</span>
<span class="go">| 1     | 3.0   | (9+3j) | &#39;aaa&#39;  |</span>
<span class="go">+-------+-------+--------+--------+</span>
<span class="go">| 2     | 1.3   | (7+2j) | None   |</span>
<span class="go">+-------+-------+--------+--------+</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 0.4.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.resub">
<tt class="descclassname">petl.</tt><tt class="descname">resub</tt><big>(</big><em>table</em>, <em>field</em>, <em>pattern</em>, <em>repl</em>, <em>count=0</em>, <em>flags=0</em><big>)</big><a class="headerlink" href="#petl.resub" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to convert values under the given field using a 
regular expression substitution. See also <a class="reference external" href="http://docs.python.org/library/re.html#re.sub" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">re.sub()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.extend">
<tt class="descclassname">petl.</tt><tt class="descname">extend</tt><big>(</big><em>table</em>, <em>field</em>, <em>value</em>, <em>failonerror=False</em>, <em>errorvalue=None</em><big>)</big><a class="headerlink" href="#petl.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>Extend a table with a fixed value or calculated field. E.g., using a fixed
value:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">extend</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;F&#39;</span><span class="p">,</span> <span class="mi">34</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="mi">56</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">extend</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;M&#39;   | 12    | 42    |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 34    | 42    |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;-&#39;   | 56    | 42    |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>E.g., calculating the value:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">extend</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">rec</span><span class="p">:</span> <span class="n">rec</span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;M&#39;   | 12    | 24    |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 34    | 68    |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;-&#39;   | 56    | 112   |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>When using a calculated value, the function should accept a record, i.e., a
dictionary representation of the row, with values indexed by field name.</p>
<p>An expression string can also be used via <a class="reference internal" href="#petl.expr" title="petl.expr"><tt class="xref py py-func docutils literal"><span class="pre">expr()</span></tt></a>, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">extend</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="p">(</span><span class="s">&#39;{bar} * 2&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;M&#39;   | 12    | 24    |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 34    | 68    |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;-&#39;   | 56    | 112   |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.capture">
<tt class="descclassname">petl.</tt><tt class="descname">capture</tt><big>(</big><em>table</em>, <em>field</em>, <em>pattern</em>, <em>newfields=None</em>, <em>include_original=False</em>, <em>flags=0</em><big>)</big><a class="headerlink" href="#petl.capture" title="Permalink to this definition">¶</a></dt>
<dd><p>Extend the table with one or more new fields with values captured from an
existing field searched via a regular expression. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">capture</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;variable&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;A1&#39;</span><span class="p">,</span> <span class="s">&#39;12&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;A2&#39;</span><span class="p">,</span> <span class="s">&#39;15&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;3&#39;</span><span class="p">,</span> <span class="s">&#39;B1&#39;</span><span class="p">,</span> <span class="s">&#39;18&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;4&#39;</span><span class="p">,</span> <span class="s">&#39;C12&#39;</span><span class="p">,</span> <span class="s">&#39;19&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">capture</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;variable&#39;</span><span class="p">,</span> <span class="s">&#39;(\w)(\d+)&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;treat&#39;</span><span class="p">,</span> <span class="s">&#39;time&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+------+---------+---------+--------+</span>
<span class="go">| &#39;id&#39; | &#39;value&#39; | &#39;treat&#39; | &#39;time&#39; |</span>
<span class="go">+======+=========+=========+========+</span>
<span class="go">| &#39;1&#39;  | &#39;12&#39;    | &#39;A&#39;     | &#39;1&#39;    |</span>
<span class="go">+------+---------+---------+--------+</span>
<span class="go">| &#39;2&#39;  | &#39;15&#39;    | &#39;A&#39;     | &#39;2&#39;    |</span>
<span class="go">+------+---------+---------+--------+</span>
<span class="go">| &#39;3&#39;  | &#39;18&#39;    | &#39;B&#39;     | &#39;1&#39;    |</span>
<span class="go">+------+---------+---------+--------+</span>
<span class="go">| &#39;4&#39;  | &#39;19&#39;    | &#39;C&#39;     | &#39;12&#39;   |</span>
<span class="go">+------+---------+---------+--------+</span>
</pre></div>
</div>
<p>See also <a class="reference external" href="http://docs.python.org/library/re.html#re.search" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">re.search()</span></tt></a>.</p>
<p>By default the field on which the capture is performed is omitted. It can
be included using the <cite>include_original</cite> argument, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">capture</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;variable&#39;</span><span class="p">,</span> <span class="s">&#39;(\w)(\d+)&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;treat&#39;</span><span class="p">,</span> <span class="s">&#39;time&#39;</span><span class="p">],</span> <span class="n">include_original</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+------+------------+---------+---------+--------+</span>
<span class="go">| &#39;id&#39; | &#39;variable&#39; | &#39;value&#39; | &#39;treat&#39; | &#39;time&#39; |</span>
<span class="go">+======+============+=========+=========+========+</span>
<span class="go">| &#39;1&#39;  | &#39;A1&#39;       | &#39;12&#39;    | &#39;A&#39;     | &#39;1&#39;    |</span>
<span class="go">+------+------------+---------+---------+--------+</span>
<span class="go">| &#39;2&#39;  | &#39;A2&#39;       | &#39;15&#39;    | &#39;A&#39;     | &#39;2&#39;    |</span>
<span class="go">+------+------------+---------+---------+--------+</span>
<span class="go">| &#39;3&#39;  | &#39;B1&#39;       | &#39;18&#39;    | &#39;B&#39;     | &#39;1&#39;    |</span>
<span class="go">+------+------------+---------+---------+--------+</span>
<span class="go">| &#39;4&#39;  | &#39;C12&#39;      | &#39;19&#39;    | &#39;C&#39;     | &#39;12&#39;   |</span>
<span class="go">+------+------------+---------+---------+--------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.split">
<tt class="descclassname">petl.</tt><tt class="descname">split</tt><big>(</big><em>table</em>, <em>field</em>, <em>pattern</em>, <em>newfields=None</em>, <em>include_original=False</em>, <em>maxsplit=0</em>, <em>flags=0</em><big>)</big><a class="headerlink" href="#petl.split" title="Permalink to this definition">¶</a></dt>
<dd><p>Extend the table with one or more new fields with values generated by 
splitting an existing value around occurrences of a regular expression. 
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">split</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;variable&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;parad1&#39;</span><span class="p">,</span> <span class="s">&#39;12&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;parad2&#39;</span><span class="p">,</span> <span class="s">&#39;15&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;3&#39;</span><span class="p">,</span> <span class="s">&#39;tempd1&#39;</span><span class="p">,</span> <span class="s">&#39;18&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;4&#39;</span><span class="p">,</span> <span class="s">&#39;tempd2&#39;</span><span class="p">,</span> <span class="s">&#39;19&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">split</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;variable&#39;</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;variable&#39;</span><span class="p">,</span> <span class="s">&#39;day&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+------+---------+------------+-------+</span>
<span class="go">| &#39;id&#39; | &#39;value&#39; | &#39;variable&#39; | &#39;day&#39; |</span>
<span class="go">+======+=========+============+=======+</span>
<span class="go">| &#39;1&#39;  | &#39;12&#39;    | &#39;para&#39;     | &#39;1&#39;   |</span>
<span class="go">+------+---------+------------+-------+</span>
<span class="go">| &#39;2&#39;  | &#39;15&#39;    | &#39;para&#39;     | &#39;2&#39;   |</span>
<span class="go">+------+---------+------------+-------+</span>
<span class="go">| &#39;3&#39;  | &#39;18&#39;    | &#39;temp&#39;     | &#39;1&#39;   |</span>
<span class="go">+------+---------+------------+-------+</span>
<span class="go">| &#39;4&#39;  | &#39;19&#39;    | &#39;temp&#39;     | &#39;2&#39;   |</span>
<span class="go">+------+---------+------------+-------+</span>
</pre></div>
</div>
<p>See also <a class="reference external" href="http://docs.python.org/library/re.html#re.split" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">re.split()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.unpack">
<tt class="descclassname">petl.</tt><tt class="descname">unpack</tt><big>(</big><em>table</em>, <em>field</em>, <em>newfields=None</em>, <em>maxunpack=None</em>, <em>include_original=False</em><big>)</big><a class="headerlink" href="#petl.unpack" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpack data values that are lists or tuples. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">unpack</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">]],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">]],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="s">&#39;f&#39;</span><span class="p">]]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="s">&#39;quux&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;foo&#39; | &#39;baz&#39; | &#39;quux&#39; |</span>
<span class="go">+=======+=======+========+</span>
<span class="go">| 1     | &#39;a&#39;   | &#39;b&#39;    |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| 2     | &#39;c&#39;   | &#39;d&#39;    |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| 3     | &#39;e&#39;   | &#39;f&#39;    |</span>
<span class="go">+-------+-------+--------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.fieldmap">
<tt class="descclassname">petl.</tt><tt class="descname">fieldmap</tt><big>(</big><em>table</em>, <em>mappings=None</em>, <em>failonerror=False</em>, <em>errorvalue=None</em><big>)</big><a class="headerlink" href="#petl.fieldmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform a table, mapping fields arbitrarily between input and output. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">fieldmap</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;sex&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="s">&#39;height&#39;</span><span class="p">,</span> <span class="s">&#39;weight&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;male&#39;</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mf">1.45</span><span class="p">,</span> <span class="mf">62.0</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;female&#39;</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mf">1.34</span><span class="p">,</span> <span class="mf">55.4</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;female&#39;</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mf">1.78</span><span class="p">,</span> <span class="mf">74.4</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;male&#39;</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mf">1.33</span><span class="p">,</span> <span class="mf">45.2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mf">1.65</span><span class="p">,</span> <span class="mf">51.9</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mappings</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># rename a field</span>
<span class="gp">... </span><span class="n">mappings</span><span class="p">[</span><span class="s">&#39;subject_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;id&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># translate a field</span>
<span class="gp">... </span><span class="n">mappings</span><span class="p">[</span><span class="s">&#39;gender&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;sex&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;male&#39;</span><span class="p">:</span> <span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;female&#39;</span><span class="p">:</span> <span class="s">&#39;F&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># apply a calculation to a field</span>
<span class="gp">... </span><span class="n">mappings</span><span class="p">[</span><span class="s">&#39;age_months&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span> <span class="o">*</span> <span class="mi">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># apply a calculation to a combination of fields</span>
<span class="gp">... </span><span class="n">mappings</span><span class="p">[</span><span class="s">&#39;bmi&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">rec</span><span class="p">:</span> <span class="n">rec</span><span class="p">[</span><span class="s">&#39;weight&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">rec</span><span class="p">[</span><span class="s">&#39;height&#39;</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="c"># transform and inspect the output</span>
<span class="gp">... </span><span class="n">table2</span> <span class="o">=</span> <span class="n">fieldmap</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">mappings</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| &#39;subject_id&#39; | &#39;gender&#39; | &#39;age_months&#39; | &#39;bmi&#39;              |</span>
<span class="go">+==============+==========+==============+====================+</span>
<span class="go">| 1            | &#39;M&#39;      | 192          | 29.48870392390012  |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 2            | &#39;F&#39;      | 228          | 30.8531967030519   |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 3            | &#39;F&#39;      | 204          | 23.481883600555488 |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 4            | &#39;M&#39;      | 252          | 25.55260331279326  |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 5            | &#39;-&#39;      | 300          | 19.0633608815427   |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
</pre></div>
</div>
<p>Field mappings can also be added and/or updated after the table is created via
the suffix notation. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">fieldmap</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span><span class="p">[</span><span class="s">&#39;subject_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;id&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span><span class="p">[</span><span class="s">&#39;gender&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;sex&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;male&#39;</span><span class="p">:</span> <span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;female&#39;</span><span class="p">:</span> <span class="s">&#39;F&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span><span class="p">[</span><span class="s">&#39;age_months&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span> <span class="o">*</span> <span class="mi">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># use an expression string this time</span>
<span class="gp">... </span><span class="n">table3</span><span class="p">[</span><span class="s">&#39;bmi&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;{weight} / {height}**2&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| &#39;subject_id&#39; | &#39;gender&#39; | &#39;age_months&#39; | &#39;bmi&#39;              |</span>
<span class="go">+==============+==========+==============+====================+</span>
<span class="go">| 1            | &#39;M&#39;      | 192          | 29.48870392390012  |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 2            | &#39;F&#39;      | 228          | 30.8531967030519   |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 3            | &#39;F&#39;      | 204          | 23.481883600555488 |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 4            | &#39;M&#39;      | 252          | 25.55260331279326  |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 5            | &#39;-&#39;      | 300          | 19.0633608815427   |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
</pre></div>
</div>
<p>Note also that the mapping value can be an expression string, which will be 
converted to a lambda function via <a class="reference internal" href="#petl.expr" title="petl.expr"><tt class="xref py py-func docutils literal"><span class="pre">expr()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.rowmap">
<tt class="descclassname">petl.</tt><tt class="descname">rowmap</tt><big>(</big><em>table</em>, <em>rowmapper</em>, <em>fields</em>, <em>failonerror=False</em><big>)</big><a class="headerlink" href="#petl.rowmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform rows via an arbitrary function. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rowmap</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;sex&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="s">&#39;height&#39;</span><span class="p">,</span> <span class="s">&#39;weight&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;male&#39;</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mf">1.45</span><span class="p">,</span> <span class="mf">62.0</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;female&#39;</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mf">1.34</span><span class="p">,</span> <span class="mf">55.4</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;female&#39;</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mf">1.78</span><span class="p">,</span> <span class="mf">74.4</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;male&#39;</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mf">1.33</span><span class="p">,</span> <span class="mf">45.2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mf">1.65</span><span class="p">,</span> <span class="mf">51.9</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">rowmapper</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">transmf</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;male&#39;</span><span class="p">:</span> <span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;female&#39;</span><span class="p">:</span> <span class="s">&#39;F&#39;</span><span class="p">}</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">transmf</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">transmf</span> <span class="k">else</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="mi">12</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">/</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">rowmap</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">rowmapper</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;subject_id&#39;</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;age_months&#39;</span><span class="p">,</span> <span class="s">&#39;bmi&#39;</span><span class="p">])</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>    
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| &#39;subject_id&#39; | &#39;gender&#39; | &#39;age_months&#39; | &#39;bmi&#39;              |</span>
<span class="go">+==============+==========+==============+====================+</span>
<span class="go">| 1            | &#39;M&#39;      | 192          | 29.48870392390012  |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 2            | &#39;F&#39;      | 228          | 30.8531967030519   |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 3            | &#39;F&#39;      | 204          | 23.481883600555488 |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 4            | &#39;M&#39;      | 252          | 25.55260331279326  |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 5            | &#39;-&#39;      | 300          | 19.0633608815427   |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
</pre></div>
</div>
<p>The <cite>rowmapper</cite> function should accept a row (list or tuple) and return a
single row (list or tuple).</p>
</dd></dl>

<dl class="function">
<dt id="petl.recordmap">
<tt class="descclassname">petl.</tt><tt class="descname">recordmap</tt><big>(</big><em>table</em>, <em>recmapper</em>, <em>fields</em>, <em>failonerror=False</em><big>)</big><a class="headerlink" href="#petl.recordmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform records via an arbitrary function. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">recordmap</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;sex&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="s">&#39;height&#39;</span><span class="p">,</span> <span class="s">&#39;weight&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;male&#39;</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mf">1.45</span><span class="p">,</span> <span class="mf">62.0</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;female&#39;</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mf">1.34</span><span class="p">,</span> <span class="mf">55.4</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;female&#39;</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mf">1.78</span><span class="p">,</span> <span class="mf">74.4</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;male&#39;</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mf">1.33</span><span class="p">,</span> <span class="mf">45.2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mf">1.65</span><span class="p">,</span> <span class="mf">51.9</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">recmapper</span><span class="p">(</span><span class="n">rec</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">transmf</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;male&#39;</span><span class="p">:</span> <span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;female&#39;</span><span class="p">:</span> <span class="s">&#39;F&#39;</span><span class="p">}</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">[</span><span class="n">rec</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">transmf</span><span class="p">[</span><span class="n">rec</span><span class="p">[</span><span class="s">&#39;sex&#39;</span><span class="p">]]</span> <span class="k">if</span> <span class="n">rec</span><span class="p">[</span><span class="s">&#39;sex&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">transmf</span> <span class="k">else</span> <span class="n">rec</span><span class="p">[</span><span class="s">&#39;sex&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">rec</span><span class="p">[</span><span class="s">&#39;age&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">12</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">rec</span><span class="p">[</span><span class="s">&#39;weight&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">rec</span><span class="p">[</span><span class="s">&#39;height&#39;</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">recordmap</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">recmapper</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;subject_id&#39;</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;age_months&#39;</span><span class="p">,</span> <span class="s">&#39;bmi&#39;</span><span class="p">])</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| &#39;subject_id&#39; | &#39;gender&#39; | &#39;age_months&#39; | &#39;bmi&#39;              |</span>
<span class="go">+==============+==========+==============+====================+</span>
<span class="go">| 1            | &#39;M&#39;      | 192          | 29.48870392390012  |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 2            | &#39;F&#39;      | 228          | 30.8531967030519   |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 3            | &#39;F&#39;      | 204          | 23.481883600555488 |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 4            | &#39;M&#39;      | 252          | 25.55260331279326  |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
<span class="go">| 5            | &#39;-&#39;      | 300          | 19.0633608815427   |</span>
<span class="go">+--------------+----------+--------------+--------------------+</span>
</pre></div>
</div>
<p>The <cite>recmapper</cite> function should accept a record (dictionary of data values
indexed by field) and return a single row (list or tuple).</p>
</dd></dl>

<dl class="function">
<dt id="petl.rowmapmany">
<tt class="descclassname">petl.</tt><tt class="descname">rowmapmany</tt><big>(</big><em>table</em>, <em>rowgenerator</em>, <em>fields</em>, <em>failonerror=False</em><big>)</big><a class="headerlink" href="#petl.rowmapmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Map each input row to any number of output rows via an arbitrary function.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rowmapmany</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;sex&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="s">&#39;height&#39;</span><span class="p">,</span> <span class="s">&#39;weight&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;male&#39;</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mf">1.45</span><span class="p">,</span> <span class="mf">62.0</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;female&#39;</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mf">1.34</span><span class="p">,</span> <span class="mf">55.4</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mf">1.78</span><span class="p">,</span> <span class="mf">74.4</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;male&#39;</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mf">1.33</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">rowgenerator</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">transmf</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;male&#39;</span><span class="p">:</span> <span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;female&#39;</span><span class="p">:</span> <span class="s">&#39;F&#39;</span><span class="p">}</span>
<span class="gp">... </span>    <span class="k">yield</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="n">transmf</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">transmf</span> <span class="k">else</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
<span class="gp">... </span>    <span class="k">yield</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&#39;age_months&#39;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="mi">12</span><span class="p">]</span>
<span class="gp">... </span>    <span class="k">yield</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&#39;bmi&#39;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">/</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">rowmapmany</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">rowgenerator</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;subject_id&#39;</span><span class="p">,</span> <span class="s">&#39;variable&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">])</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| &#39;subject_id&#39; | &#39;variable&#39;   | &#39;value&#39;            |</span>
<span class="go">+==============+==============+====================+</span>
<span class="go">| 1            | &#39;gender&#39;     | &#39;M&#39;                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 1            | &#39;age_months&#39; | 192                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 1            | &#39;bmi&#39;        | 29.48870392390012  |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 2            | &#39;gender&#39;     | &#39;F&#39;                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 2            | &#39;age_months&#39; | 228                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 2            | &#39;bmi&#39;        | 30.8531967030519   |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 3            | &#39;gender&#39;     | &#39;-&#39;                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 3            | &#39;age_months&#39; | 204                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 3            | &#39;bmi&#39;        | 23.481883600555488 |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 4            | &#39;gender&#39;     | &#39;M&#39;                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
</pre></div>
</div>
<p>The <cite>rowgenerator</cite> function should accept a row (list or tuple) and yield
zero or more rows (lists or tuples).</p>
<p>See also the <a class="reference internal" href="#petl.melt" title="petl.melt"><tt class="xref py py-func docutils literal"><span class="pre">melt()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.recordmapmany">
<tt class="descclassname">petl.</tt><tt class="descname">recordmapmany</tt><big>(</big><em>table</em>, <em>rowgenerator</em>, <em>fields</em>, <em>failonerror=False</em><big>)</big><a class="headerlink" href="#petl.recordmapmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Map each input row (as a record) to any number of output rows via an 
arbitrary function. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">recordmapmany</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;sex&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="s">&#39;height&#39;</span><span class="p">,</span> <span class="s">&#39;weight&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;male&#39;</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mf">1.45</span><span class="p">,</span> <span class="mf">62.0</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;female&#39;</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mf">1.34</span><span class="p">,</span> <span class="mf">55.4</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mf">1.78</span><span class="p">,</span> <span class="mf">74.4</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;male&#39;</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mf">1.33</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">rowgenerator</span><span class="p">(</span><span class="n">rec</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">transmf</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;male&#39;</span><span class="p">:</span> <span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;female&#39;</span><span class="p">:</span> <span class="s">&#39;F&#39;</span><span class="p">}</span>
<span class="gp">... </span>    <span class="k">yield</span> <span class="p">[</span><span class="n">rec</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">],</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="n">transmf</span><span class="p">[</span><span class="n">rec</span><span class="p">[</span><span class="s">&#39;sex&#39;</span><span class="p">]]</span> <span class="k">if</span> <span class="n">rec</span><span class="p">[</span><span class="s">&#39;sex&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">transmf</span> <span class="k">else</span> <span class="n">rec</span><span class="p">[</span><span class="s">&#39;sex&#39;</span><span class="p">]]</span>
<span class="gp">... </span>    <span class="k">yield</span> <span class="p">[</span><span class="n">rec</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">],</span> <span class="s">&#39;age_months&#39;</span><span class="p">,</span> <span class="n">rec</span><span class="p">[</span><span class="s">&#39;age&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">12</span><span class="p">]</span>
<span class="gp">... </span>    <span class="k">yield</span> <span class="p">[</span><span class="n">rec</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">],</span> <span class="s">&#39;bmi&#39;</span><span class="p">,</span> <span class="n">rec</span><span class="p">[</span><span class="s">&#39;weight&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">rec</span><span class="p">[</span><span class="s">&#39;height&#39;</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">recordmapmany</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">rowgenerator</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;subject_id&#39;</span><span class="p">,</span> <span class="s">&#39;variable&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">])</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| &#39;subject_id&#39; | &#39;variable&#39;   | &#39;value&#39;            |</span>
<span class="go">+==============+==============+====================+</span>
<span class="go">| 1            | &#39;gender&#39;     | &#39;M&#39;                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 1            | &#39;age_months&#39; | 192                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 1            | &#39;bmi&#39;        | 29.48870392390012  |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 2            | &#39;gender&#39;     | &#39;F&#39;                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 2            | &#39;age_months&#39; | 228                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 2            | &#39;bmi&#39;        | 30.8531967030519   |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 3            | &#39;gender&#39;     | &#39;-&#39;                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 3            | &#39;age_months&#39; | 204                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 3            | &#39;bmi&#39;        | 23.481883600555488 |</span>
<span class="go">+--------------+--------------+--------------------+</span>
<span class="go">| 4            | &#39;gender&#39;     | &#39;M&#39;                |</span>
<span class="go">+--------------+--------------+--------------------+</span>
</pre></div>
</div>
<p>The <cite>rowgenerator</cite> function should accept a record (dictionary of data values
indexed by field) and yield zero or more rows (lists or tuples).</p>
<p>See also the <a class="reference internal" href="#petl.melt" title="petl.melt"><tt class="xref py py-func docutils literal"><span class="pre">melt()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.cat">
<tt class="descclassname">petl.</tt><tt class="descname">cat</tt><big>(</big><em>*tables</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.cat" title="Permalink to this definition">¶</a></dt>
<dd><p>Concatenate data from two or more tables. Note that the tables do not need
to share exactly the same fields, any missing fields will be padded with
<cite>None</cite> (or whatever is provided via the <cite>missing</cite> keyword argument). E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">cat</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">cat</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| 1     | &#39;A&#39;   | None  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 2     | &#39;B&#39;   | None  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| None  | &#39;C&#39;   | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| None  | &#39;D&#39;   | False |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>This function can also be used to square up a table with uneven rows, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3.4&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">u&#39;B&#39;</span><span class="p">,</span> <span class="s">u&#39;3&#39;</span><span class="p">,</span> <span class="s">u&#39;7.8&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;xyz&#39;</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">cat</span><span class="p">(</span><span class="n">table4</span><span class="p">))</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39;  |</span>
<span class="go">+=======+=======+========+</span>
<span class="go">| &#39;A&#39;   | 1     | 2      |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;B&#39;   | &#39;2&#39;   | &#39;3.4&#39;  |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| u&#39;B&#39;  | u&#39;3&#39;  | u&#39;7.8&#39; |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;D&#39;   | &#39;xyz&#39; | 9.0    |</span>
<span class="go">+-------+-------+--------+</span>
<span class="go">| &#39;E&#39;   | None  | None   |</span>
<span class="go">+-------+-------+--------+</span>
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.5.</span></p>
<p>By default, the fields for the output table will be determined as the 
union of all fields found in the input tables. Use the <cite>header</cite> keyword 
argument to override this behaviour and specify a fixed set of fields for 
the output table. E.g., with a single input table:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table5</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table6</span> <span class="o">=</span> <span class="n">cat</span><span class="p">(</span><span class="n">table5</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table6</span><span class="p">)</span>
<span class="go">+------+-------+------+-------+------+</span>
<span class="go">| &#39;A&#39;  | &#39;foo&#39; | &#39;B&#39;  | &#39;bar&#39; | &#39;C&#39;  |</span>
<span class="go">+======+=======+======+=======+======+</span>
<span class="go">| None | 1     | None | &#39;A&#39;   | None |</span>
<span class="go">+------+-------+------+-------+------+</span>
<span class="go">| None | 2     | None | &#39;B&#39;   | None |</span>
<span class="go">+------+-------+------+-------+------+</span>
</pre></div>
</div>
<p>E.g., with two input tables:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table7</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table8</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table9</span> <span class="o">=</span> <span class="n">cat</span><span class="p">(</span><span class="n">table7</span><span class="p">,</span> <span class="n">table8</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table9</span><span class="p">)</span>
<span class="go">+------+-------+------+-------+------+</span>
<span class="go">| &#39;A&#39;  | &#39;foo&#39; | &#39;B&#39;  | &#39;bar&#39; | &#39;C&#39;  |</span>
<span class="go">+======+=======+======+=======+======+</span>
<span class="go">| None | 1     | None | &#39;A&#39;   | None |</span>
<span class="go">+------+-------+------+-------+------+</span>
<span class="go">| None | 2     | None | &#39;B&#39;   | None |</span>
<span class="go">+------+-------+------+-------+------+</span>
<span class="go">| None | None  | None | &#39;C&#39;   | None |</span>
<span class="go">+------+-------+------+-------+------+</span>
<span class="go">| None | None  | None | &#39;D&#39;   | None |</span>
<span class="go">+------+-------+------+-------+------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.duplicates">
<tt class="descclassname">petl.</tt><tt class="descname">duplicates</tt><big>(</big><em>table</em>, <em>key</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.duplicates" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows with duplicate values under a given key. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">duplicates</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">3.4</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mf">9.3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">7.8</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">12.3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mf">14.5</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">duplicates</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;B&#39;   | 2     | 3.4   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 3     | 7.8   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     | 12.3  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 6     | 9.3   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 4     | 14.5  |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>Compound keys are supported, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">duplicates</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;B&#39;   | 2     | 3.4   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;B&#39;   | 2     | 12.3  |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.conflicts">
<tt class="descclassname">petl.</tt><tt class="descname">conflicts</tt><big>(</big><em>table</em>, <em>key</em>, <em>missing=None</em>, <em>ignore=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.conflicts" title="Permalink to this definition">¶</a></dt>
<dd><p>Select rows with the same key value but differing in some other field. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">conflicts</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">2.7</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">None</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">9.4</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="mf">7.8</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">12.3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">None</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">conflicts</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | 2.7   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;A&#39;   | 2     | None  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 3     | 9.4   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 3     | 12.3  |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>Missing values are not considered conflicts. By default, <cite>None</cite> is treated
as the missing value, this can be changed via the <cite>missing</cite> keyword 
argument.</p>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.5.</span></p>
<p>One or more fields can be ignored when determining conflicts by providing
the <cite>ignore</cite> keyword argument. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">conflicts</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="s">&#39;baz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | 2.7   |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;A&#39;   | 2     | None  |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.sort">
<tt class="descclassname">petl.</tt><tt class="descname">sort</tt><big>(</big><em>table</em>, <em>key=None</em>, <em>reverse=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">sort</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;F&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">sort</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 9     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;A&#39;   | 6     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 10    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Sorting by compound key is supported, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">sort</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 6     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;A&#39;   | 9     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 10    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Field names or indices (from zero) can be used to specify the key.</p>
<p>If no key is specified, the default is a lexical sort, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span> <span class="o">=</span> <span class="n">sort</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 6     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;A&#39;   | 9     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;D&#39;   | 10    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;F&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>The <cite>buffersize</cite> argument should be an <cite>int</cite> or <cite>None</cite>.</p>
<p>If the number of rows in the table is less than <cite>buffersize</cite>, the table
will be sorted in memory. Otherwise, the table is sorted in chunks of
no more than <cite>buffersize</cite> rows, each chunk is written to a temporary file, 
and then a merge sort is performed on the temporary files.</p>
<p>If <cite>buffersize</cite> is <cite>None</cite>, the value of <cite>petl.transform.defaultbuffersize</cite> 
will be used. By default this is set to 100000 rows, but can be changed, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">petl.transform</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">petl</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">defaultbuffersize</span> <span class="o">=</span> <span class="mi">500000</span>
</pre></div>
</div>
<p>If <cite>petl.transform.defaultbuffersize</cite> is set to <cite>None</cite>, this forces all
sorting to be done entirely in memory.</p>
</dd></dl>

<dl class="function">
<dt id="petl.join">
<tt class="descclassname">petl.</tt><tt class="descname">join</tt><big>(</big><em>left</em>, <em>right</em>, <em>key=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.join" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform an equi-join on the given tables. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">join</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;colour&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;blue&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;red&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;purple&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;shape&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;circle&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;square&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;ellipse&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+------+----------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; | &#39;shape&#39;  |</span>
<span class="go">+======+==========+==========+</span>
<span class="go">| 1    | &#39;blue&#39;   | &#39;circle&#39; |</span>
<span class="go">+------+----------+----------+</span>
<span class="go">| 3    | &#39;purple&#39; | &#39;square&#39; |</span>
<span class="go">+------+----------+----------+</span>
</pre></div>
</div>
<p>If no <cite>key</cite> is given, a natural join is tried, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+------+----------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; | &#39;shape&#39;  |</span>
<span class="go">+======+==========+==========+</span>
<span class="go">| 1    | &#39;blue&#39;   | &#39;circle&#39; |</span>
<span class="go">+------+----------+----------+</span>
<span class="go">| 3    | &#39;purple&#39; | &#39;square&#39; |</span>
<span class="go">+------+----------+----------+</span>
</pre></div>
</div>
<p>Note behaviour if the key is not unique in either or both tables:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table5</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;colour&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;blue&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;red&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;purple&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table6</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;shape&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;circle&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;square&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;ellipse&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table7</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">table5</span><span class="p">,</span> <span class="n">table6</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table7</span><span class="p">)</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; | &#39;shape&#39;   |</span>
<span class="go">+======+==========+===========+</span>
<span class="go">| 1    | &#39;blue&#39;   | &#39;circle&#39;  |</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| 1    | &#39;blue&#39;   | &#39;square&#39;  |</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| 1    | &#39;red&#39;    | &#39;circle&#39;  |</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| 1    | &#39;red&#39;    | &#39;square&#39;  |</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| 2    | &#39;purple&#39; | &#39;ellipse&#39; |</span>
<span class="go">+------+----------+-----------+</span>
</pre></div>
</div>
<p>Compound keys are supported, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table8</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;time&#39;</span><span class="p">,</span> <span class="s">&#39;height&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">12.3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">34.5</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">56.7</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table9</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;time&#39;</span><span class="p">,</span> <span class="s">&#39;weight&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">6.7</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">8.9</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table10</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">table8</span><span class="p">,</span> <span class="n">table9</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;time&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table10</span><span class="p">)</span>
<span class="go">+------+--------+----------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;time&#39; | &#39;height&#39; | &#39;weight&#39; |</span>
<span class="go">+======+========+==========+==========+</span>
<span class="go">| 1    | 2      | 34.5     | 4.5      |</span>
<span class="go">+------+--------+----------+----------+</span>
<span class="go">| 2    | 1      | 56.7     | 6.7      |</span>
<span class="go">+------+--------+----------+----------+</span>
</pre></div>
</div>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.leftjoin">
<tt class="descclassname">petl.</tt><tt class="descname">leftjoin</tt><big>(</big><em>left</em>, <em>right</em>, <em>key=None</em>, <em>missing=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.leftjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a left outer join on the given tables. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">leftjoin</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;colour&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;blue&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;red&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;purple&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;shape&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;circle&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;square&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;ellipse&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">leftjoin</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+------+----------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; | &#39;shape&#39;  |</span>
<span class="go">+======+==========+==========+</span>
<span class="go">| 1    | &#39;blue&#39;   | &#39;circle&#39; |</span>
<span class="go">+------+----------+----------+</span>
<span class="go">| 2    | &#39;red&#39;    | None     |</span>
<span class="go">+------+----------+----------+</span>
<span class="go">| 3    | &#39;purple&#39; | &#39;square&#39; |</span>
<span class="go">+------+----------+----------+</span>
</pre></div>
</div>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.rightjoin">
<tt class="descclassname">petl.</tt><tt class="descname">rightjoin</tt><big>(</big><em>left</em>, <em>right</em>, <em>key=None</em>, <em>missing=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.rightjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a right outer join on the given tables. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rightjoin</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;colour&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;blue&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;red&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;purple&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;shape&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;circle&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;square&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;ellipse&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">rightjoin</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; | &#39;shape&#39;   |</span>
<span class="go">+======+==========+===========+</span>
<span class="go">| 1    | &#39;blue&#39;   | &#39;circle&#39;  |</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| 3    | &#39;purple&#39; | &#39;square&#39;  |</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| 4    | None     | &#39;ellipse&#39; |</span>
<span class="go">+------+----------+-----------+</span>
</pre></div>
</div>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.outerjoin">
<tt class="descclassname">petl.</tt><tt class="descname">outerjoin</tt><big>(</big><em>left</em>, <em>right</em>, <em>key=None</em>, <em>missing=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.outerjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a full outer join on the given tables. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">outerjoin</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;colour&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;blue&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;red&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;purple&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;shape&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;circle&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;square&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;ellipse&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">outerjoin</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; | &#39;shape&#39;   |</span>
<span class="go">+======+==========+===========+</span>
<span class="go">| 1    | &#39;blue&#39;   | &#39;circle&#39;  |</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| 2    | &#39;red&#39;    | None      |</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| 3    | &#39;purple&#39; | &#39;square&#39;  |</span>
<span class="go">+------+----------+-----------+</span>
<span class="go">| 4    | None     | &#39;ellipse&#39; |</span>
<span class="go">+------+----------+-----------+</span>
</pre></div>
</div>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.crossjoin">
<tt class="descclassname">petl.</tt><tt class="descname">crossjoin</tt><big>(</big><em>*tables</em><big>)</big><a class="headerlink" href="#petl.crossjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Form the cartesian product of the given tables. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">crossjoin</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;colour&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;blue&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;red&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;shape&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;circle&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;square&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">crossjoin</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+------+----------+------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; | &#39;id&#39; | &#39;shape&#39;  |</span>
<span class="go">+======+==========+======+==========+</span>
<span class="go">| 1    | &#39;blue&#39;   | 1    | &#39;circle&#39; |</span>
<span class="go">+------+----------+------+----------+</span>
<span class="go">| 1    | &#39;blue&#39;   | 3    | &#39;square&#39; |</span>
<span class="go">+------+----------+------+----------+</span>
<span class="go">| 2    | &#39;red&#39;    | 1    | &#39;circle&#39; |</span>
<span class="go">+------+----------+------+----------+</span>
<span class="go">| 2    | &#39;red&#39;    | 3    | &#39;square&#39; |</span>
<span class="go">+------+----------+------+----------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.antijoin">
<tt class="descclassname">petl.</tt><tt class="descname">antijoin</tt><big>(</big><em>left</em>, <em>right</em>, <em>key=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.antijoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return rows from the <cite>left</cite> table where the key value does not occur in the
<cite>right</cite> table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">antijoin</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;colour&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;black&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;blue&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;red&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;yellow&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;white&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;shape&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;circle&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;square&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">antijoin</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;colour&#39; |</span>
<span class="go">+======+==========+</span>
<span class="go">| 0    | &#39;black&#39;  |</span>
<span class="go">+------+----------+</span>
<span class="go">| 2    | &#39;red&#39;    |</span>
<span class="go">+------+----------+</span>
<span class="go">| 4    | &#39;yellow&#39; |</span>
<span class="go">+------+----------+</span>
<span class="go">| 5    | &#39;white&#39;  |</span>
<span class="go">+------+----------+</span>
</pre></div>
</div>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.complement">
<tt class="descclassname">petl.</tt><tt class="descname">complement</tt><big>(</big><em>a</em>, <em>b</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.complement" title="Permalink to this definition">¶</a></dt>
<dd><p>Return rows in <cite>a</cite> that are not in <cite>b</cite>. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">complement</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="bp">True</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;z&#39;</span><span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="bp">True</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aminusb</span> <span class="o">=</span> <span class="n">complement</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">aminusb</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 7     | False |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">bminusa</span> <span class="o">=</span> <span class="n">complement</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">bminusa</span><span class="p">)</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;x&#39; | &#39;y&#39; | &#39;z&#39;   |</span>
<span class="go">+=====+=====+=======+</span>
<span class="go">| &#39;A&#39; | 9   | False |</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;B&#39; | 3   | True  |</span>
<span class="go">+-----+-----+-------+</span>
</pre></div>
</div>
<p>Note that the field names of each table are ignored - rows are simply compared
following a lexical sort. See also the <a class="reference internal" href="#petl.recordcomplement" title="petl.recordcomplement"><tt class="xref py py-func docutils literal"><span class="pre">recordcomplement()</span></tt></a> function.</p>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.diff">
<tt class="descclassname">petl.</tt><tt class="descname">diff</tt><big>(</big><em>a</em>, <em>b</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the difference between rows in two tables. Returns a pair of tables, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">diff</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="bp">True</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;z&#39;</span><span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="bp">True</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">added</span><span class="p">,</span> <span class="n">subtracted</span> <span class="o">=</span> <span class="n">diff</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># rows in b not in a</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">added</span><span class="p">)</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;x&#39; | &#39;y&#39; | &#39;z&#39;   |</span>
<span class="go">+=====+=====+=======+</span>
<span class="go">| &#39;A&#39; | 9   | False |</span>
<span class="go">+-----+-----+-------+</span>
<span class="go">| &#39;B&#39; | 3   | True  |</span>
<span class="go">+-----+-----+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># rows in a not in b</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">subtracted</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 7     | False |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>Convenient shorthand for <tt class="docutils literal"><span class="pre">(complement(b,</span> <span class="pre">a),</span> <span class="pre">complement(a,</span> <span class="pre">b))</span></tt>. See also
<a class="reference internal" href="#petl.complement" title="petl.complement"><tt class="xref py py-func docutils literal"><span class="pre">complement()</span></tt></a>.</p>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.recordcomplement">
<tt class="descclassname">petl.</tt><tt class="descname">recordcomplement</tt><big>(</big><em>a</em>, <em>b</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.recordcomplement" title="Permalink to this definition">¶</a></dt>
<dd><p>Find records in <cite>a</cite> that are not in <cite>b</cite>. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">recordcomplement</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablea</span> <span class="o">=</span> <span class="p">((</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="bp">True</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tableb</span> <span class="o">=</span> <span class="p">((</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aminusb</span> <span class="o">=</span> <span class="n">recordcomplement</span><span class="p">(</span><span class="n">tablea</span><span class="p">,</span> <span class="n">tableb</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">aminusb</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 7     | False |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">bminusa</span> <span class="o">=</span> <span class="n">recordcomplement</span><span class="p">(</span><span class="n">tableb</span><span class="p">,</span> <span class="n">tablea</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">bminusa</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;bar&#39; | &#39;foo&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| 3     | &#39;B&#39;   | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 9     | &#39;A&#39;   | False |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>Note that both tables must have the same set of fields, but that the order
of the fields does not matter. See also the <a class="reference internal" href="#petl.complement" title="petl.complement"><tt class="xref py py-func docutils literal"><span class="pre">complement()</span></tt></a> function.</p>
<p>See also the discussion of the <cite>buffersize</cite> argument under the <a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> 
function.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.3.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.recorddiff">
<tt class="descclassname">petl.</tt><tt class="descname">recorddiff</tt><big>(</big><em>a</em>, <em>b</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.recorddiff" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the difference between records in two tables. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">recorddiff</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablea</span> <span class="o">=</span> <span class="p">((</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="bp">True</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tableb</span> <span class="o">=</span> <span class="p">((</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">added</span><span class="p">,</span> <span class="n">subtracted</span> <span class="o">=</span> <span class="n">recorddiff</span><span class="p">(</span><span class="n">tablea</span><span class="p">,</span> <span class="n">tableb</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">added</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;bar&#39; | &#39;foo&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| 3     | &#39;B&#39;   | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| 9     | &#39;A&#39;   | False |</span>
<span class="go">+-------+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">subtracted</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;A&#39;   | 1     | True  |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 7     | False |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>Convenient shorthand for <tt class="docutils literal"><span class="pre">(recordcomplement(b,</span> <span class="pre">a),</span> <span class="pre">recordcomplement(a,</span> <span class="pre">b))</span></tt>. 
See also <a class="reference internal" href="#petl.recordcomplement" title="petl.recordcomplement"><tt class="xref py py-func docutils literal"><span class="pre">recordcomplement()</span></tt></a>.</p>
<p>See also the discussion of the <cite>buffersize</cite> argument under the <a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> 
function.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.3.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.intersection">
<tt class="descclassname">petl.</tt><tt class="descname">intersection</tt><big>(</big><em>a</em>, <em>b</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.intersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return rows in <cite>a</cite> that are also in <cite>b</cite>. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">intersection</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">((</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="bp">True</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="p">((</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;z&#39;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="bp">True</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">intersection</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39; |</span>
<span class="go">+=======+=======+=======+</span>
<span class="go">| &#39;B&#39;   | 2     | False |</span>
<span class="go">+-------+-------+-------+</span>
<span class="go">| &#39;C&#39;   | 9     | True  |</span>
<span class="go">+-------+-------+-------+</span>
</pre></div>
</div>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.aggregate">
<tt class="descclassname">petl.</tt><tt class="descname">aggregate</tt><big>(</big><em>table</em>, <em>key</em>, <em>aggregators=None</em>, <em>failonerror=False</em>, <em>errorvalue=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.aggregate" title="Permalink to this definition">¶</a></dt>
<dd><p>Group rows under the given key then apply aggregation functions. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">aggregate</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;e&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aggregators</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aggregators</span><span class="p">[</span><span class="s">&#39;minbar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">min</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aggregators</span><span class="p">[</span><span class="s">&#39;maxbar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">max</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aggregators</span><span class="p">[</span><span class="s">&#39;sumbar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">sum</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aggregators</span><span class="p">[</span><span class="s">&#39;listbar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">aggregate</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">aggregators</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+----------+----------+----------+-----------+</span>
<span class="go">| &#39;foo&#39; | &#39;minbar&#39; | &#39;maxbar&#39; | &#39;sumbar&#39; | &#39;listbar&#39; |</span>
<span class="go">+=======+==========+==========+==========+===========+</span>
<span class="go">| &#39;a&#39;   | 3        | 7        | 10       | [3, 7]    |</span>
<span class="go">+-------+----------+----------+----------+-----------+</span>
<span class="go">| &#39;b&#39;   | 1        | 9        | 12       | [2, 1, 9] |</span>
<span class="go">+-------+----------+----------+----------+-----------+</span>
<span class="go">| &#39;c&#39;   | 4        | 4        | 4        | [4]       |</span>
<span class="go">+-------+----------+----------+----------+-----------+</span>
<span class="go">| &#39;d&#39;   | 3        | 3        | 3        | [3]       |</span>
<span class="go">+-------+----------+----------+----------+-----------+</span>
<span class="go">| &#39;e&#39;   | None     | None     | 0        | []        |</span>
<span class="go">+-------+----------+----------+----------+-----------+</span>
</pre></div>
</div>
<p>Aggregation functions can also be added and/or updated using the suffix
notation on the returned table object, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">aggregate</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span><span class="p">[</span><span class="s">&#39;minbar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">min</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span><span class="p">[</span><span class="s">&#39;maxbar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">max</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span><span class="p">[</span><span class="s">&#39;sumbar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">sum</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span><span class="p">[</span><span class="s">&#39;listbar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span> <span class="c"># default aggregation is list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+----------+----------+----------+-----------+</span>
<span class="go">| &#39;foo&#39; | &#39;minbar&#39; | &#39;maxbar&#39; | &#39;sumbar&#39; | &#39;listbar&#39; |</span>
<span class="go">+=======+==========+==========+==========+===========+</span>
<span class="go">| &#39;a&#39;   | 3        | 7        | 10       | [3, 7]    |</span>
<span class="go">+-------+----------+----------+----------+-----------+</span>
<span class="go">| &#39;b&#39;   | 1        | 9        | 12       | [2, 1, 9] |</span>
<span class="go">+-------+----------+----------+----------+-----------+</span>
<span class="go">| &#39;c&#39;   | 4        | 4        | 4        | [4]       |</span>
<span class="go">+-------+----------+----------+----------+-----------+</span>
<span class="go">| &#39;d&#39;   | 3        | 3        | 3        | [3]       |</span>
<span class="go">+-------+----------+----------+----------+-----------+</span>
<span class="go">| &#39;e&#39;   | None     | None     | 0        | []        |</span>
<span class="go">+-------+----------+----------+----------+-----------+</span>
</pre></div>
</div>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.rangeaggregate">
<tt class="descclassname">petl.</tt><tt class="descname">rangeaggregate</tt><big>(</big><em>table</em>, <em>key</em>, <em>width</em>, <em>aggregators=None</em>, <em>minv=None</em>, <em>maxv=None</em>, <em>failonerror=False</em>, <em>errorvalue=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.rangeaggregate" title="Permalink to this definition">¶</a></dt>
<dd><p>Group rows into bins then apply aggregation functions. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rangeaggregate</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">rangeaggregate</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span><span class="p">[</span><span class="s">&#39;foocount&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="nb">len</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span><span class="p">[</span><span class="s">&#39;foolist&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;foo&#39;</span> <span class="c"># default is list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+---------+------------+-----------------+</span>
<span class="go">| &#39;bar&#39;   | &#39;foocount&#39; | &#39;foolist&#39;       |</span>
<span class="go">+=========+============+=================+</span>
<span class="go">| (1, 3)  | 2          | [&#39;b&#39;, &#39;b&#39;]      |</span>
<span class="go">+---------+------------+-----------------+</span>
<span class="go">| (3, 5)  | 3          | [&#39;a&#39;, &#39;d&#39;, &#39;c&#39;] |</span>
<span class="go">+---------+------------+-----------------+</span>
<span class="go">| (5, 7)  | 0          | []              |</span>
<span class="go">+---------+------------+-----------------+</span>
<span class="go">| (7, 9)  | 1          | [&#39;a&#39;]           |</span>
<span class="go">+---------+------------+-----------------+</span>
<span class="go">| (9, 11) | 1          | [&#39;b&#39;]           |</span>
<span class="go">+---------+------------+-----------------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.rangecounts">
<tt class="descclassname">petl.</tt><tt class="descname">rangecounts</tt><big>(</big><em>table</em>, <em>key</em>, <em>width</em>, <em>minv=None</em>, <em>maxv=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.rangecounts" title="Permalink to this definition">¶</a></dt>
<dd><p>Group rows into bins then count the number of rows in each bin. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rangecounts</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">rangecounts</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+---------+---------+</span>
<span class="go">| &#39;range&#39; | &#39;count&#39; |</span>
<span class="go">+=========+=========+</span>
<span class="go">| (1, 3)  | 2       |</span>
<span class="go">+---------+---------+</span>
<span class="go">| (3, 5)  | 3       |</span>
<span class="go">+---------+---------+</span>
<span class="go">| (5, 7)  | 0       |</span>
<span class="go">+---------+---------+</span>
<span class="go">| (7, 9)  | 1       |</span>
<span class="go">+---------+---------+</span>
<span class="go">| (9, 11) | 1       |</span>
<span class="go">+---------+---------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.rowreduce">
<tt class="descclassname">petl.</tt><tt class="descname">rowreduce</tt><big>(</big><em>table</em>, <em>key</em>, <em>reducer</em>, <em>fields=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.rowreduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce rows grouped under the given key via an arbitrary function. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rowreduce</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">sumbar</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">rows</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">[</span><span class="n">key</span><span class="p">,</span> <span class="nb">sum</span><span class="p">([</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">])]</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">rowreduce</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">reducer</span><span class="o">=</span><span class="n">sumbar</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;barsum&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+----------+</span>
<span class="go">| &#39;foo&#39; | &#39;barsum&#39; |</span>
<span class="go">+=======+==========+</span>
<span class="go">| &#39;a&#39;   | 10       |</span>
<span class="go">+-------+----------+</span>
<span class="go">| &#39;b&#39;   | 12       |</span>
<span class="go">+-------+----------+</span>
<span class="go">| &#39;c&#39;   | 4        |</span>
<span class="go">+-------+----------+</span>
</pre></div>
</div>
<p>The <cite>reducer</cite> function should accept two arguments, a key and a sequence
of rows, and return a single row.</p>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.recordreduce">
<tt class="descclassname">petl.</tt><tt class="descname">recordreduce</tt><big>(</big><em>table</em>, <em>key</em>, <em>reducer</em>, <em>fields=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.recordreduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce records grouped under the given key via an arbitrary function. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">recordreduce</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">sumbar</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">records</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">[</span><span class="n">key</span><span class="p">,</span> <span class="nb">sum</span><span class="p">([</span><span class="n">rec</span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">records</span><span class="p">])]</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">recordreduce</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">reducer</span><span class="o">=</span><span class="n">sumbar</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;barsum&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+----------+</span>
<span class="go">| &#39;foo&#39; | &#39;barsum&#39; |</span>
<span class="go">+=======+==========+</span>
<span class="go">| &#39;a&#39;   | 10       |</span>
<span class="go">+-------+----------+</span>
<span class="go">| &#39;b&#39;   | 12       |</span>
<span class="go">+-------+----------+</span>
<span class="go">| &#39;c&#39;   | 4        |</span>
<span class="go">+-------+----------+</span>
</pre></div>
</div>
<p>The <cite>reducer</cite> function should accept two arguments, a key and a sequence
of records (i.e., dictionaries of values indexed by field) and return a single
row.</p>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.rangerowreduce">
<tt class="descclassname">petl.</tt><tt class="descname">rangerowreduce</tt><big>(</big><em>table</em>, <em>key</em>, <em>width</em>, <em>reducer</em>, <em>fields=None</em>, <em>minv=None</em>, <em>maxv=None</em>, <em>failonerror=False</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.rangerowreduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce rows grouped into bins under the given key via an arbitrary function. 
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rangerowreduce</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">redu</span><span class="p">(</span><span class="n">minv</span><span class="p">,</span> <span class="n">maxunpack</span><span class="p">,</span> <span class="n">rows</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">[</span><span class="n">minv</span><span class="p">,</span> <span class="n">maxunpack</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">])]</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">rangerowreduce</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">reducer</span><span class="o">=</span><span class="n">redu</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;frombar&#39;</span><span class="p">,</span> <span class="s">&#39;tobar&#39;</span><span class="p">,</span> <span class="s">&#39;foos&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-----------+---------+--------+</span>
<span class="go">| &#39;frombar&#39; | &#39;tobar&#39; | &#39;foos&#39; |</span>
<span class="go">+===========+=========+========+</span>
<span class="go">| 1         | 3       | &#39;bb&#39;   |</span>
<span class="go">+-----------+---------+--------+</span>
<span class="go">| 3         | 5       | &#39;ac&#39;   |</span>
<span class="go">+-----------+---------+--------+</span>
<span class="go">| 5         | 7       | &#39;&#39;     |</span>
<span class="go">+-----------+---------+--------+</span>
<span class="go">| 7         | 9       | &#39;a&#39;    |</span>
<span class="go">+-----------+---------+--------+</span>
<span class="go">| 9         | 11      | &#39;b&#39;    |</span>
<span class="go">+-----------+---------+--------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.rangerecordreduce">
<tt class="descclassname">petl.</tt><tt class="descname">rangerecordreduce</tt><big>(</big><em>table</em>, <em>key</em>, <em>width</em>, <em>reducer</em>, <em>fields=None</em>, <em>minv=None</em>, <em>maxv=None</em>, <em>failonerror=False</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.rangerecordreduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce records grouped into bins under the given key via an arbitrary function. 
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">rangerecordreduce</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">redu</span><span class="p">(</span><span class="n">minv</span><span class="p">,</span> <span class="n">maxunpack</span><span class="p">,</span> <span class="n">recs</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">[</span><span class="n">minv</span><span class="p">,</span> <span class="n">maxunpack</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">rec</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">recs</span><span class="p">])]</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">rangerecordreduce</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">reducer</span><span class="o">=</span><span class="n">redu</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;frombar&#39;</span><span class="p">,</span> <span class="s">&#39;tobar&#39;</span><span class="p">,</span> <span class="s">&#39;foos&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-----------+---------+--------+</span>
<span class="go">| &#39;frombar&#39; | &#39;tobar&#39; | &#39;foos&#39; |</span>
<span class="go">+===========+=========+========+</span>
<span class="go">| 1         | 3       | &#39;bb&#39;   |</span>
<span class="go">+-----------+---------+--------+</span>
<span class="go">| 3         | 5       | &#39;ac&#39;   |</span>
<span class="go">+-----------+---------+--------+</span>
<span class="go">| 5         | 7       | &#39;&#39;     |</span>
<span class="go">+-----------+---------+--------+</span>
<span class="go">| 7         | 9       | &#39;a&#39;    |</span>
<span class="go">+-----------+---------+--------+</span>
<span class="go">| 9         | 11      | &#39;b&#39;    |</span>
<span class="go">+-----------+---------+--------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.mergereduce">
<tt class="descclassname">petl.</tt><tt class="descname">mergereduce</tt><big>(</big><em>table</em>, <em>key</em>, <em>missing=None</em>, <em>presorted=False</em>, <em>buffersize=None</em><big>)</big><a class="headerlink" href="#petl.mergereduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge rows under the given key. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">mergereduce</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">2.7</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">None</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">9.4</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="mf">7.8</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">12.3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">None</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">mergereduce</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+-------+--------+-------------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39;  | &#39;baz&#39;       |</span>
<span class="go">+=======+========+=============+</span>
<span class="go">| &#39;A&#39;   | (1, 2) | 2.7         |</span>
<span class="go">+-------+--------+-------------+</span>
<span class="go">| &#39;B&#39;   | 2      | 7.8         |</span>
<span class="go">+-------+--------+-------------+</span>
<span class="go">| &#39;D&#39;   | 3      | (9.4, 12.3) |</span>
<span class="go">+-------+--------+-------------+</span>
<span class="go">| &#39;E&#39;   | None   |             |</span>
<span class="go">+-------+--------+-------------+</span>
</pre></div>
</div>
<p>Missing values are overridden by non-missing values. Conflicting values are
reported as a tuple.</p>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.3.</span></p>
<p>Previously conflicts were reported as a list, this is changed to a tuple in 
version 0.3.</p>
</dd></dl>

<dl class="function">
<dt id="petl.merge">
<tt class="descclassname">petl.</tt><tt class="descname">merge</tt><big>(</big><em>*tables</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to concatenate multiple tables (via <a class="reference internal" href="#petl.cat" title="petl.cat"><tt class="xref py py-func docutils literal"><span class="pre">cat()</span></tt></a>) then 
reduce rows by merging under the given key (via <a class="reference internal" href="#petl.mergereduce" title="petl.mergereduce"><tt class="xref py py-func docutils literal"><span class="pre">mergereduce()</span></tt></a>). E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">merge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="s">&#39;quux&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="mf">42.0</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mf">79.3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mf">12.4</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">merge</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="n">table2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+-------+-------+---------------+--------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; | &#39;baz&#39;         | &#39;quux&#39; |</span>
<span class="go">+=======+=======+===============+========+</span>
<span class="go">| 1     | &#39;A&#39;   | True          | 42.0   |</span>
<span class="go">+-------+-------+---------------+--------+</span>
<span class="go">| 2     | &#39;B&#39;   | False         | 79.3   |</span>
<span class="go">+-------+-------+---------------+--------+</span>
<span class="go">| 4     | &#39;C&#39;   | (False, True) | 12.4   |</span>
<span class="go">+-------+-------+---------------+--------+</span>
</pre></div>
</div>
<p>If <cite>presorted</cite> is True, it is assumed that the data are already sorted by
the given key, and the <cite>buffersize</cite> argument is ignored. Otherwise, the data 
are sorted, see also the discussion of the <cite>buffersize</cite> argument under the 
<a class="reference internal" href="#petl.sort" title="petl.sort"><tt class="xref py py-func docutils literal"><span class="pre">sort()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.melt">
<tt class="descclassname">petl.</tt><tt class="descname">melt</tt><big>(</big><em>table</em>, <em>key=None</em>, <em>variables=None</em>, <em>variablefield='variable'</em>, <em>valuefield='value'</em><big>)</big><a class="headerlink" href="#petl.melt" title="Permalink to this definition">¶</a></dt>
<dd><p>Reshape a table, melting fields into data. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">melt</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;F&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="mi">17</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="mi">16</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">melt</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| &#39;id&#39; | &#39;variable&#39; | &#39;value&#39; |</span>
<span class="go">+======+============+=========+</span>
<span class="go">| 1    | &#39;gender&#39;   | &#39;F&#39;     |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| 1    | &#39;age&#39;      | 12      |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| 2    | &#39;gender&#39;   | &#39;M&#39;     |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| 2    | &#39;age&#39;      | 17      |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| 3    | &#39;gender&#39;   | &#39;M&#39;     |</span>
<span class="go">+------+------------+---------+</span>
<span class="go">| 3    | &#39;age&#39;      | 16      |</span>
<span class="go">+------+------------+---------+</span>
</pre></div>
</div>
<p>Compound keys are supported, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;time&#39;</span><span class="p">,</span> <span class="s">&#39;height&#39;</span><span class="p">,</span> <span class="s">&#39;weight&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mf">66.4</span><span class="p">,</span> <span class="mf">12.2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mf">53.2</span><span class="p">,</span> <span class="mf">17.3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mf">34.5</span><span class="p">,</span> <span class="mf">9.4</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span> <span class="o">=</span> <span class="n">melt</span><span class="p">(</span><span class="n">table3</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;time&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| &#39;id&#39; | &#39;time&#39; | &#39;variable&#39; | &#39;value&#39; |</span>
<span class="go">+======+========+============+=========+</span>
<span class="go">| 1    | 11     | &#39;height&#39;   | 66.4    |</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| 1    | 11     | &#39;weight&#39;   | 12.2    |</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| 2    | 16     | &#39;height&#39;   | 53.2    |</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| 2    | 16     | &#39;weight&#39;   | 17.3    |</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| 3    | 12     | &#39;height&#39;   | 34.5    |</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| 3    | 12     | &#39;weight&#39;   | 9.4     |</span>
<span class="go">+------+--------+------------+---------+</span>
</pre></div>
</div>
<p>A subset of variable fields can be selected, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table5</span> <span class="o">=</span> <span class="n">melt</span><span class="p">(</span><span class="n">table3</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;time&#39;</span><span class="p">],</span> <span class="n">variables</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;height&#39;</span><span class="p">])</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table5</span><span class="p">)</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| &#39;id&#39; | &#39;time&#39; | &#39;variable&#39; | &#39;value&#39; |</span>
<span class="go">+======+========+============+=========+</span>
<span class="go">| 1    | 11     | &#39;height&#39;   | 66.4    |</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| 2    | 16     | &#39;height&#39;   | 53.2    |</span>
<span class="go">+------+--------+------------+---------+</span>
<span class="go">| 3    | 12     | &#39;height&#39;   | 34.5    |</span>
<span class="go">+------+--------+------------+---------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.recast">
<tt class="descclassname">petl.</tt><tt class="descname">recast</tt><big>(</big><em>table</em>, <em>key=None</em>, <em>variablefield='variable'</em>, <em>valuefield='value'</em>, <em>samplesize=1000</em>, <em>reducers=None</em>, <em>missing=None</em><big>)</big><a class="headerlink" href="#petl.recast" title="Permalink to this definition">¶</a></dt>
<dd><p>Recast molten data. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">recast</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;variable&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="mi">16</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;F&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;M&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="mi">17</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;M&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">recast</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+------+-------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;age&#39; | &#39;gender&#39; |</span>
<span class="go">+======+=======+==========+</span>
<span class="go">| 1    | 12    | &#39;F&#39;      |</span>
<span class="go">+------+-------+----------+</span>
<span class="go">| 2    | 17    | &#39;M&#39;      |</span>
<span class="go">+------+-------+----------+</span>
<span class="go">| 3    | 16    | &#39;M&#39;      |</span>
<span class="go">+------+-------+----------+</span>
</pre></div>
</div>
<p>If variable and value fields are different from the defaults, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;vars&#39;</span><span class="p">,</span> <span class="s">&#39;vals&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="mi">16</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;F&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;M&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="mi">17</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;M&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span> <span class="o">=</span> <span class="n">recast</span><span class="p">(</span><span class="n">table3</span><span class="p">,</span> <span class="n">variablefield</span><span class="o">=</span><span class="s">&#39;vars&#39;</span><span class="p">,</span> <span class="n">valuefield</span><span class="o">=</span><span class="s">&#39;vals&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+------+-------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;age&#39; | &#39;gender&#39; |</span>
<span class="go">+======+=======+==========+</span>
<span class="go">| 1    | 12    | &#39;F&#39;      |</span>
<span class="go">+------+-------+----------+</span>
<span class="go">| 2    | 17    | &#39;M&#39;      |</span>
<span class="go">+------+-------+----------+</span>
<span class="go">| 3    | 16    | &#39;M&#39;      |</span>
<span class="go">+------+-------+----------+</span>
</pre></div>
</div>
<p>If there are multiple values for each key/variable pair, and no reducers
function is provided, then all values will be listed. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table6</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;time&#39;</span><span class="p">,</span> <span class="s">&#39;variable&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s">&#39;weight&#39;</span><span class="p">,</span> <span class="mf">66.4</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="s">&#39;weight&#39;</span><span class="p">,</span> <span class="mf">55.2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s">&#39;weight&#39;</span><span class="p">,</span> <span class="mf">53.2</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="s">&#39;weight&#39;</span><span class="p">,</span> <span class="mf">43.3</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s">&#39;weight&#39;</span><span class="p">,</span> <span class="mf">34.5</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="s">&#39;weight&#39;</span><span class="p">,</span> <span class="mf">49.4</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table7</span> <span class="o">=</span> <span class="n">recast</span><span class="p">(</span><span class="n">table6</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table7</span><span class="p">)</span>
<span class="go">+------+--------------+</span>
<span class="go">| &#39;id&#39; | &#39;weight&#39;     |</span>
<span class="go">+======+==============+</span>
<span class="go">| 1    | [66.4, 55.2] |</span>
<span class="go">+------+--------------+</span>
<span class="go">| 2    | [53.2, 43.3] |</span>
<span class="go">+------+--------------+</span>
<span class="go">| 3    | [34.5, 49.4] |</span>
<span class="go">+------+--------------+</span>
</pre></div>
</div>
<p>Multiple values can be reduced via an aggregation function, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">mean</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">values</span><span class="p">))</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table8</span> <span class="o">=</span> <span class="n">recast</span><span class="p">(</span><span class="n">table6</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">reducers</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;weight&#39;</span><span class="p">:</span> <span class="n">mean</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table8</span><span class="p">)</span>    
<span class="go">+------+--------------------+</span>
<span class="go">| &#39;id&#39; | &#39;weight&#39;           |</span>
<span class="go">+======+====================+</span>
<span class="go">| 1    | 60.800000000000004 |</span>
<span class="go">+------+--------------------+</span>
<span class="go">| 2    | 48.25              |</span>
<span class="go">+------+--------------------+</span>
<span class="go">| 3    | 41.95              |</span>
<span class="go">+------+--------------------+</span>
</pre></div>
</div>
<p>Missing values are padded with whatever is provided via the <cite>missing</cite> 
keyword argument (<cite>None</cite> by default), e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table9</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;variable&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;F&#39;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="mi">17</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span>
<span class="gp">... </span>          <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;M&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table10</span> <span class="o">=</span> <span class="n">recast</span><span class="p">(</span><span class="n">table9</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table10</span><span class="p">)</span>
<span class="go">+------+-------+----------+</span>
<span class="go">| &#39;id&#39; | &#39;age&#39; | &#39;gender&#39; |</span>
<span class="go">+======+=======+==========+</span>
<span class="go">| 1    | 12    | &#39;F&#39;      |</span>
<span class="go">+------+-------+----------+</span>
<span class="go">| 2    | 17    | None     |</span>
<span class="go">+------+-------+----------+</span>
<span class="go">| 3    | None  | &#39;M&#39;      |</span>
<span class="go">+------+-------+----------+</span>
</pre></div>
</div>
<p>Note that the table is scanned once to discover variables, then a second
time to reshape the data and recast variables as fields. How many rows are
scanned in the first pass is determined by the <cite>samplesize</cite> argument.</p>
</dd></dl>

<dl class="function">
<dt id="petl.transpose">
<tt class="descclassname">petl.</tt><tt class="descname">transpose</tt><big>(</big><em>table</em><big>)</big><a class="headerlink" href="#petl.transpose" title="Permalink to this definition">¶</a></dt>
<dd><p>Transpose rows into columns. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">transpose</span><span class="p">,</span> <span class="n">look</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">((</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;colour&#39;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;blue&#39;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;red&#39;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;purple&#39;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;yellow&#39;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s">&#39;orange&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">transpose</span><span class="p">(</span><span class="n">table1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+----------+--------+-------+----------+----------+----------+</span>
<span class="go">| &#39;id&#39;     | 1      | 2     | 3        | 5        | 7        |</span>
<span class="go">+==========+========+=======+==========+==========+==========+</span>
<span class="go">| &#39;colour&#39; | &#39;blue&#39; | &#39;red&#39; | &#39;purple&#39; | &#39;yellow&#39; | &#39;orange&#39; |</span>
<span class="go">+----------+--------+-------+----------+----------+----------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.pivot">
<tt class="descclassname">petl.</tt><tt class="descname">pivot</tt><big>(</big><em>table</em>, <em>f1</em>, <em>f2</em>, <em>f3</em>, <em>aggfun</em>, <em>presorted=False</em>, <em>buffersize=None</em>, <em>missing=None</em><big>)</big><a class="headerlink" href="#petl.pivot" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a pivot table. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">pivot</span><span class="p">,</span> <span class="n">look</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table1</span> <span class="o">=</span> <span class="p">((</span><span class="s">&#39;region&#39;</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;style&#39;</span><span class="p">,</span> <span class="s">&#39;units&#39;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;east&#39;</span><span class="p">,</span> <span class="s">&#39;boy&#39;</span><span class="p">,</span> <span class="s">&#39;tee&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;east&#39;</span><span class="p">,</span> <span class="s">&#39;boy&#39;</span><span class="p">,</span> <span class="s">&#39;golf&#39;</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;east&#39;</span><span class="p">,</span> <span class="s">&#39;boy&#39;</span><span class="p">,</span> <span class="s">&#39;fancy&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;east&#39;</span><span class="p">,</span> <span class="s">&#39;girl&#39;</span><span class="p">,</span> <span class="s">&#39;tee&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;east&#39;</span><span class="p">,</span> <span class="s">&#39;girl&#39;</span><span class="p">,</span> <span class="s">&#39;golf&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;east&#39;</span><span class="p">,</span> <span class="s">&#39;girl&#39;</span><span class="p">,</span> <span class="s">&#39;fancy&#39;</span><span class="p">,</span> <span class="mi">18</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;west&#39;</span><span class="p">,</span> <span class="s">&#39;boy&#39;</span><span class="p">,</span> <span class="s">&#39;tee&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;west&#39;</span><span class="p">,</span> <span class="s">&#39;boy&#39;</span><span class="p">,</span> <span class="s">&#39;golf&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;west&#39;</span><span class="p">,</span> <span class="s">&#39;boy&#39;</span><span class="p">,</span> <span class="s">&#39;fancy&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;west&#39;</span><span class="p">,</span> <span class="s">&#39;girl&#39;</span><span class="p">,</span> <span class="s">&#39;tee&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;west&#39;</span><span class="p">,</span> <span class="s">&#39;girl&#39;</span><span class="p">,</span> <span class="s">&#39;golf&#39;</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="s">&#39;west&#39;</span><span class="p">,</span> <span class="s">&#39;girl&#39;</span><span class="p">,</span> <span class="s">&#39;fancy&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">pivot</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;region&#39;</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;units&#39;</span><span class="p">,</span> <span class="nb">sum</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span>
<span class="go">+----------+-------+--------+</span>
<span class="go">| &#39;region&#39; | &#39;boy&#39; | &#39;girl&#39; |</span>
<span class="go">+==========+=======+========+</span>
<span class="go">| &#39;east&#39;   | 33    | 29     |</span>
<span class="go">+----------+-------+--------+</span>
<span class="go">| &#39;west&#39;   | 35    | 23     |</span>
<span class="go">+----------+-------+--------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">pivot</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;region&#39;</span><span class="p">,</span> <span class="s">&#39;style&#39;</span><span class="p">,</span> <span class="s">&#39;units&#39;</span><span class="p">,</span> <span class="nb">sum</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span>
<span class="go">+----------+---------+--------+-------+</span>
<span class="go">| &#39;region&#39; | &#39;fancy&#39; | &#39;golf&#39; | &#39;tee&#39; |</span>
<span class="go">+==========+=========+========+=======+</span>
<span class="go">| &#39;east&#39;   | 25      | 22     | 15    |</span>
<span class="go">+----------+---------+--------+-------+</span>
<span class="go">| &#39;west&#39;   | 9       | 31     | 18    |</span>
<span class="go">+----------+---------+--------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">table4</span> <span class="o">=</span> <span class="n">pivot</span><span class="p">(</span><span class="n">table1</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">,</span> <span class="s">&#39;style&#39;</span><span class="p">,</span> <span class="s">&#39;units&#39;</span><span class="p">,</span> <span class="nb">sum</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">table4</span><span class="p">)</span>
<span class="go">+----------+---------+--------+-------+</span>
<span class="go">| &#39;gender&#39; | &#39;fancy&#39; | &#39;golf&#39; | &#39;tee&#39; |</span>
<span class="go">+==========+=========+========+=======+</span>
<span class="go">| &#39;boy&#39;    | 15      | 29     | 24    |</span>
<span class="go">+----------+---------+--------+-------+</span>
<span class="go">| &#39;girl&#39;   | 19      | 24     | 9     |</span>
<span class="go">+----------+---------+--------+-------+</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#petl.recast" title="petl.recast"><tt class="xref py py-func docutils literal"><span class="pre">recast()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.hashjoin">
<tt class="descclassname">petl.</tt><tt class="descname">hashjoin</tt><big>(</big><em>left</em>, <em>right</em>, <em>key=None</em><big>)</big><a class="headerlink" href="#petl.hashjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative implementation of <a class="reference internal" href="#petl.join" title="petl.join"><tt class="xref py py-func docutils literal"><span class="pre">join()</span></tt></a>, where the join is executed
by constructing an in-memory lookup for the right hand table, then iterating over rows 
from the left hand table.</p>
<p>May be faster and/or more resource efficient where the right table is small
and the left table is large.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.hashleftjoin">
<tt class="descclassname">petl.</tt><tt class="descname">hashleftjoin</tt><big>(</big><em>left</em>, <em>right</em>, <em>key=None</em>, <em>missing=None</em><big>)</big><a class="headerlink" href="#petl.hashleftjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative implementation of <a class="reference internal" href="#petl.leftjoin" title="petl.leftjoin"><tt class="xref py py-func docutils literal"><span class="pre">leftjoin()</span></tt></a>, where the join is executed
by constructing an in-memory lookup for the right hand table, then iterating over rows 
from the left hand table.</p>
<p>May be faster and/or more resource efficient where the right table is small
and the left table is large.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.hashrightjoin">
<tt class="descclassname">petl.</tt><tt class="descname">hashrightjoin</tt><big>(</big><em>left</em>, <em>right</em>, <em>key=None</em>, <em>missing=None</em><big>)</big><a class="headerlink" href="#petl.hashrightjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative implementation of <a class="reference internal" href="#petl.rightjoin" title="petl.rightjoin"><tt class="xref py py-func docutils literal"><span class="pre">rightjoin()</span></tt></a>, where the join is executed
by constructing an in-memory lookup for the left hand table, then iterating over rows 
from the right hand table.</p>
<p>May be faster and/or more resource efficient where the left table is small
and the right table is large.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.hashantijoin">
<tt class="descclassname">petl.</tt><tt class="descname">hashantijoin</tt><big>(</big><em>left</em>, <em>right</em>, <em>key=None</em><big>)</big><a class="headerlink" href="#petl.hashantijoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative implementation of <a class="reference internal" href="#petl.antijoin" title="petl.antijoin"><tt class="xref py py-func docutils literal"><span class="pre">antijoin()</span></tt></a>, where the join is executed
by constructing an in-memory set for all keys found in the right hand table, then 
iterating over rows from the left hand table.</p>
<p>May be faster and/or more resource efficient where the right table is small
and the left table is large.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.hashcomplement">
<tt class="descclassname">petl.</tt><tt class="descname">hashcomplement</tt><big>(</big><em>a</em>, <em>b</em><big>)</big><a class="headerlink" href="#petl.hashcomplement" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative implementation of <a class="reference internal" href="#petl.complement" title="petl.complement"><tt class="xref py py-func docutils literal"><span class="pre">complement()</span></tt></a>, where the complement is executed
by constructing an in-memory set for all rows found in the right hand table, then 
iterating over rows from the left hand table.</p>
<p>May be faster and/or more resource efficient where the right table is small
and the left table is large.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

<dl class="function">
<dt id="petl.hashintersection">
<tt class="descclassname">petl.</tt><tt class="descname">hashintersection</tt><big>(</big><em>a</em>, <em>b</em><big>)</big><a class="headerlink" href="#petl.hashintersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative implementation of <a class="reference internal" href="#petl.intersection" title="petl.intersection"><tt class="xref py py-func docutils literal"><span class="pre">intersection()</span></tt></a>, where the intersection is executed
by constructing an in-memory set for all rows found in the right hand table, then 
iterating over rows from the left hand table.</p>
<p>May be faster and/or more resource efficient where the right table is small
and the left table is large.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

</div>
<div class="section" id="loading-writing-tables-to-files-and-databases">
<h2>Loading (writing) tables to files and databases<a class="headerlink" href="#loading-writing-tables-to-files-and-databases" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="petl.tocsv">
<tt class="descclassname">petl.</tt><tt class="descname">tocsv</tt><big>(</big><em>table</em>, <em>filename</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.tocsv" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the table to a CSV file. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">tocsv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tocsv</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;test.csv&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># look what it did</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">fromcsv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">fromcsv</span><span class="p">(</span><span class="s">&#39;test.csv&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">))</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | &#39;1&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Note that if a file already exists at the given location, it will be overwritten.</p>
</dd></dl>

<dl class="function">
<dt id="petl.appendcsv">
<tt class="descclassname">petl.</tt><tt class="descname">appendcsv</tt><big>(</big><em>table</em>, <em>filename</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.appendcsv" title="Permalink to this definition">¶</a></dt>
<dd><p>Append data rows to an existing CSV file. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># look at an existing CSV file</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">fromcsv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">testcsv</span> <span class="o">=</span> <span class="n">fromcsv</span><span class="p">(</span><span class="s">&#39;test.csv&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">testcsv</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | &#39;1&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># append some data</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">appendcsv</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">appendcsv</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;test.csv&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># look what it did</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">testcsv</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | &#39;1&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | &#39;2&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;d&#39;   | &#39;7&#39;   |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;e&#39;   | &#39;42&#39;  |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;f&#39;   | &#39;12&#39;  |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Note that no attempt is made to check that the fields or row lengths are 
consistent with the existing data, the data rows from the table are simply
appended to the file. See also the <a class="reference internal" href="#petl.cat" title="petl.cat"><tt class="xref py py-func docutils literal"><span class="pre">cat()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.topickle">
<tt class="descclassname">petl.</tt><tt class="descname">topickle</tt><big>(</big><em>table</em>, <em>filename</em>, <em>protocol=-1</em><big>)</big><a class="headerlink" href="#petl.topickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the table to a pickle file. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">topickle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">topickle</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;test.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># look what it did</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">frompickle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">frompickle</span><span class="p">(</span><span class="s">&#39;test.dat&#39;</span><span class="p">))</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Note that if a file already exists at the given location, it will be overwritten.</p>
<p>The pickle file format preserves type information, i.e., reading and writing 
is round-trippable.</p>
</dd></dl>

<dl class="function">
<dt id="petl.appendpickle">
<tt class="descclassname">petl.</tt><tt class="descname">appendpickle</tt><big>(</big><em>table</em>, <em>filename</em>, <em>protocol=-1</em><big>)</big><a class="headerlink" href="#petl.appendpickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Append data to an existing pickle file. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># inspect an existing pickle file</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">frompickle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">testdat</span> <span class="o">=</span> <span class="n">frompickle</span><span class="p">(</span><span class="s">&#39;test.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">testdat</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># append some data</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">appendpickle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">appendpickle</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;test.dat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># look what it did</span>
<span class="gp">... </span><span class="n">look</span><span class="p">(</span><span class="n">testdat</span><span class="p">)</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| &#39;a&#39;   | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;b&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;c&#39;   | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;d&#39;   | 7     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;e&#39;   | 42    |</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;f&#39;   | 12    |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
<p>Note that no attempt is made to check that the fields or row lengths are 
consistent with the existing data, the data rows from the table are simply
appended to the file. See also the <a class="reference internal" href="#petl.cat" title="petl.cat"><tt class="xref py py-func docutils literal"><span class="pre">cat()</span></tt></a> function.</p>
</dd></dl>

<dl class="function">
<dt id="petl.tosqlite3">
<tt class="descclassname">petl.</tt><tt class="descname">tosqlite3</tt><big>(</big><em>table</em>, <em>filename</em>, <em>tablename</em>, <em>create=True</em><big>)</big><a class="headerlink" href="#petl.tosqlite3" title="Permalink to this definition">¶</a></dt>
<dd><p>Load data into a table in an <a class="reference external" href="http://docs.python.org/library/sqlite3.html#sqlite3" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">sqlite3</span></tt></a> database. Note that if
the database table exists, it will be truncated, i.e., all
existing rows will be deleted prior to inserting the new
data. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">tosqlite3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># by default, if the table does not already exist, it will be created</span>
<span class="gp">... </span><span class="n">tosqlite3</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;test.db&#39;</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># look what it did</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">fromsqlite3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">fromsqlite3</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="p">,</span> <span class="s">&#39;select * from foobar&#39;</span><span class="p">))</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| u&#39;a&#39;  | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| u&#39;b&#39;  | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| u&#39;c&#39;  | 2     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.appendsqlite3">
<tt class="descclassname">petl.</tt><tt class="descname">appendsqlite3</tt><big>(</big><em>table</em>, <em>filename</em>, <em>tablename</em><big>)</big><a class="headerlink" href="#petl.appendsqlite3" title="Permalink to this definition">¶</a></dt>
<dd><p>Load data into an existing table in an <a class="reference external" href="http://docs.python.org/library/sqlite3.html#sqlite3" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">sqlite3</span></tt></a>
database. Note that the database table will be appended, i.e., the
new data will be inserted into the table, and any existing rows
will remain. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">moredata</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<span class="gp">... </span>            <span class="p">[</span><span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
<span class="gp">... </span>            <span class="p">[</span><span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">appendsqlite3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">appendsqlite3</span><span class="p">(</span><span class="n">moredata</span><span class="p">,</span> <span class="s">&#39;test.db&#39;</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">)</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="c"># look what it did</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">look</span><span class="p">,</span> <span class="n">fromsqlite3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">look</span><span class="p">(</span><span class="n">fromsqlite3</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="p">,</span> <span class="s">&#39;select * from foobar&#39;</span><span class="p">))</span>
<span class="go">+-------+-------+</span>
<span class="go">| &#39;foo&#39; | &#39;bar&#39; |</span>
<span class="go">+=======+=======+</span>
<span class="go">| u&#39;a&#39;  | 1     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| u&#39;b&#39;  | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| u&#39;c&#39;  | 2     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| u&#39;d&#39;  | 7     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| u&#39;e&#39;  | 9     |</span>
<span class="go">+-------+-------+</span>
<span class="go">| u&#39;f&#39;  | 1     |</span>
<span class="go">+-------+-------+</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.todb">
<tt class="descclassname">petl.</tt><tt class="descname">todb</tt><big>(</big><em>table</em>, <em>connection</em>, <em>tablename</em>, <em>commit=True</em><big>)</big><a class="headerlink" href="#petl.todb" title="Permalink to this definition">¶</a></dt>
<dd><p>Load data into an existing database table via a DB-API 2.0
connection. Note that the database table will be truncated, i.e.,
all existing rows will be deleted prior to inserting the new data.</p>
<p>E.g., using <a class="reference external" href="http://docs.python.org/library/sqlite3.html#sqlite3" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">sqlite3</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">todb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># assuming table &quot;foobar&quot; already exists in the database</span>
<span class="gp">... </span><span class="n">todb</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">)</span>    
</pre></div>
</div>
<p>E.g., using <tt class="xref py py-mod docutils literal"><span class="pre">psycopg2</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psycopg2</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;dbname=test user=postgres&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">todb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># assuming table &quot;foobar&quot; already exists in the database</span>
<span class="gp">... </span><span class="n">todb</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">)</span>    
</pre></div>
</div>
<p>E.g., using <tt class="xref py py-mod docutils literal"><span class="pre">MySQLdb</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">MySQLdb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">MySQLdb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">passwd</span><span class="o">=</span><span class="s">&quot;moonpie&quot;</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="s">&quot;thangs&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">todb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># assuming table &quot;foobar&quot; already exists in the database</span>
<span class="gp">... </span><span class="n">todb</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">)</span>    
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.appenddb">
<tt class="descclassname">petl.</tt><tt class="descname">appenddb</tt><big>(</big><em>table</em>, <em>connection</em>, <em>tablename</em>, <em>commit=True</em><big>)</big><a class="headerlink" href="#petl.appenddb" title="Permalink to this definition">¶</a></dt>
<dd><p>Load data into an existing database table via a DB-API 2.0
connection. Note that the database table will be appended, i.e.,
the new data will be inserted into the table, and any existing
rows will remain.</p>
<p>E.g., using <a class="reference external" href="http://docs.python.org/library/sqlite3.html#sqlite3" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">sqlite3</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">appenddb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># assuming table &quot;foobar&quot; already exists in the database</span>
<span class="gp">... </span><span class="n">appenddb</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">)</span>    
</pre></div>
</div>
<p>E.g., using <tt class="xref py py-mod docutils literal"><span class="pre">psycopg2</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psycopg2</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;dbname=test user=postgres&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">appenddb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># assuming table &quot;foobar&quot; already exists in the database</span>
<span class="gp">... </span><span class="n">appenddb</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">)</span>    
</pre></div>
</div>
<p>E.g., using <tt class="xref py py-mod docutils literal"><span class="pre">MySQLdb</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">MySQLdb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">MySQLdb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">passwd</span><span class="o">=</span><span class="s">&quot;moonpie&quot;</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="s">&quot;thangs&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">appenddb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># assuming table &quot;foobar&quot; already exists in the database</span>
<span class="gp">... </span><span class="n">appenddb</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">)</span>    
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="petl.totext">
<tt class="descclassname">petl.</tt><tt class="descname">totext</tt><big>(</big><em>table</em>, <em>filename</em>, <em>template</em>, <em>prologue=None</em>, <em>epilogue=None</em><big>)</big><a class="headerlink" href="#petl.totext" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the table to a text file. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">totext</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prologue</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{| class=&quot;wikitable&quot;</span>
<span class="gp">... </span><span class="s">|-</span>
<span class="gp">... </span><span class="s">! foo</span>
<span class="gp">... </span><span class="s">! bar</span>
<span class="gp">... </span><span class="s">&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;|-</span>
<span class="gp">... </span><span class="s">| {foo}</span>
<span class="gp">... </span><span class="s">| {bar}</span>
<span class="gp">... </span><span class="s">&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">epilogue</span> <span class="o">=</span> <span class="s">&quot;|}&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">totext</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;test.txt&#39;</span><span class="p">,</span> <span class="n">template</span><span class="p">,</span> <span class="n">prologue</span><span class="p">,</span> <span class="n">epilogue</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># see what we did</span>
<span class="gp">... </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;test.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">... </span>    
<span class="go">{| class=&quot;wikitable&quot;</span>
<span class="go">|-</span>
<span class="go">! foo</span>
<span class="go">! bar</span>
<span class="go">|-</span>
<span class="go">| a</span>
<span class="go">| 1</span>
<span class="go">|-</span>
<span class="go">| b</span>
<span class="go">| 2</span>
<span class="go">|-</span>
<span class="go">| c</span>
<span class="go">| 2</span>
<span class="go">|}</span>
</pre></div>
</div>
<p>The <cite>template</cite> will be used to format each row via <a class="reference external" href="http://docs.python.org/library/stdtypes.html#str.format">str.format</a>.</p>
</dd></dl>

<dl class="function">
<dt id="petl.appendtext">
<tt class="descclassname">petl.</tt><tt class="descname">appendtext</tt><big>(</big><em>table</em>, <em>filename</em>, <em>template</em>, <em>prologue=None</em>, <em>epilogue=None</em><big>)</big><a class="headerlink" href="#petl.appendtext" title="Permalink to this definition">¶</a></dt>
<dd><p>As <a class="reference internal" href="#petl.totext" title="petl.totext"><tt class="xref py py-func docutils literal"><span class="pre">totext()</span></tt></a> but the file is opened in append mode.</p>
</dd></dl>

<dl class="function">
<dt id="petl.tojson">
<tt class="descclassname">petl.</tt><tt class="descname">tojson</tt><big>(</big><em>table</em>, <em>filename</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#petl.tojson" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a table in JSON format. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">petl</span> <span class="kn">import</span> <span class="n">tojson</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tojson</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;example.json&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># check what it did</span>
<span class="gp">... </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;example.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">... </span>
<span class="go">[{u&#39;foo&#39;: u&#39;a&#39;, u&#39;bar&#39;: 1}, {u&#39;foo&#39;: u&#39;b&#39;, u&#39;bar&#39;: 2}, {u&#39;foo&#39;: u&#39;c&#39;, u&#39;bar&#39;: 2}]</span>
</pre></div>
</div>
<p>Note that this is currently not streaming, all data is loaded into memory
before being written to the file.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.5.</span></p>
</dd></dl>

</div>
<div class="section" id="further-reading">
<h2>Further Reading<a class="headerlink" href="#further-reading" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="related_work.html">Related Work</a><ul>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#continuum-io">continuum.io</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#pandas-python-package">pandas (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#tabular-python-package">tabular (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#datarray-python-package">datarray (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#pydataframe-python-package">pydataframe (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#larry-python-package">larry (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#picalo-python-package">picalo (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#csvkit-python-package">csvkit (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#csvutils-python-package">csvutils (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#python-pipeline-python-package">python-pipeline (Python package</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#google-refine">Google Refine</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#data-wrangler">Data Wrangler</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#pentaho-data-integration-a-k-a-kettle">Pentaho Data Integration (a.k.a. Kettle)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#snaplogic">SnapLogic</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#talend">Talend</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#jaspersoft-etl">Jaspersoft ETL</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#cloveretl">CloverETL</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#apatar">Apatar</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#jitterbit">Jitterbit</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#scriptella">Scriptella</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#kapow-katalyst">Kapow Katalyst</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#flat-file-checker-flafi">Flat File Checker (FlaFi)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#orange">Orange</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#north-concepts-data-pipeline">North Concepts Data Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#sas-clinical-data-integration">SAS Clinical Data Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#r-reshape-package">R Reshape Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#tablefu">TableFu</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#python-tablefu">python-tablefu</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#pygrametl-python-package">pygrametl (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#etlpy-python-package">etlpy (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#openetl">OpenETL</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#data-river">Data River</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#ruffus">Ruffus</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#pyf">PyF</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#pydta">PyDTA</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#google-fusion-tables">Google Fusion Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#pivottable-python-package">pivottable (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#prettytable-python-package">PrettyTable (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#pytables-python-package">PyTables (Python package)</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#plyr">plyr</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#powershell">PowerShell</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#swiftriver">SwiftRiver</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#data-science-toolkit">Data Science Toolkit</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#incpy">IncPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_work.html#articles-blogs-other">Articles, Blogs, Other ...</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="indices-and-tables">
<h2>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">petl - Extract, Transform and Load (Tables of Data)</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#dependencies-and-extensions">Dependencies and extensions</a></li>
<li><a class="reference internal" href="#conventions-row-containers-and-row-iterators">Conventions - row containers and row iterators</a></li>
<li><a class="reference internal" href="#transformation-pipelines">Transformation pipelines</a></li>
<li><a class="reference internal" href="#caching-memoization">Caching / memoization</a></li>
<li><a class="reference internal" href="#using-petl-in-interactive-mode-experimental">Using petl in interactive mode (experimental)</a></li>
<li><a class="reference internal" href="#utility-functions">Utility functions</a></li>
<li><a class="reference internal" href="#extracting-reading-tables-from-files-databases-and-other-sources">Extracting (reading) tables from files, databases and other sources</a></li>
<li><a class="reference internal" href="#transforming-tables">Transforming tables</a></li>
<li><a class="reference internal" href="#loading-writing-tables-to-files-and-databases">Loading (writing) tables to files and databases</a></li>
<li><a class="reference internal" href="#further-reading">Further Reading</a><ul>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
</ul>

  <h4>Next topic</h4>
  <p class="topless"><a href="related_work.html"
                        title="next chapter">Related Work</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="related_work.html" title="Related Work"
             >next</a> |</li>
        <li><a href="#">petl v0.5 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Alistair Miles.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>